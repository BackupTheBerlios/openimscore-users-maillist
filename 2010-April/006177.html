<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [OpenIMSCore-Users] IMPI and IMPU
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/openimscore-users/2010-April/index.html" >
   <LINK REL="made" HREF="mailto:openimscore-users%40lists.berlios.de?Subject=Re%3A%20%5BOpenIMSCore-Users%5D%20IMPI%20and%20IMPU&In-Reply-To=%3Cq2rbdbdc2651004060739rdf7ded45sd358411483808b68%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="006175.html">
   <LINK REL="Next"  HREF="006178.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[OpenIMSCore-Users] IMPI and IMPU</H1>
    <B>Peter Darvasi</B> 
    <A HREF="mailto:openimscore-users%40lists.berlios.de?Subject=Re%3A%20%5BOpenIMSCore-Users%5D%20IMPI%20and%20IMPU&In-Reply-To=%3Cq2rbdbdc2651004060739rdf7ded45sd358411483808b68%40mail.gmail.com%3E"
       TITLE="[OpenIMSCore-Users] IMPI and IMPU">darvasi.peter at gmail.com
       </A><BR>
    <I>Tue Apr  6 16:39:38 CEST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="006175.html">[OpenIMSCore-Users] IMPI and IMPU
</A></li>
        <LI>Next message: <A HREF="006178.html">[OpenIMSCore-Users] IMPI and IMPU
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6177">[ date ]</a>
              <a href="thread.html#6177">[ thread ]</a>
              <a href="subject.html#6177">[ subject ]</a>
              <a href="author.html#6177">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Thanks for the answer.

Could you please tell me, if the password is the same in client and server
side, and the IMPU (sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">darvasipeter at open-ims.test</A>) and IMPI (darvasipeter)
((is it legal to name IMPI like this?)) are set and linked, and the client
supports MD5, how can the following trace occur?

REGISTER sip:open-ims.test SIP/2.0
Via: SIP/2.0/UDP 192.168.10.196:51134
;rport;branch=z9hG4bKPjSEpxorhplZtv8zLQwYSbyLhMcF5fwlsa
Max-Forwards: 70
From: &quot;Peter Darvasi&quot; &lt;sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">darvasipeter at open-ims.test</A>
&gt;<i>;tag=4GSE4f8S2qtYVJeVA.SNMyzPDOhtc0m2
</I>To: &quot;Peter Darvasi&quot; &lt;sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">darvasipeter at open-ims.test</A>&gt;
Contact: &lt;sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">jcpwyfev at 192.168.10.196</A>:51134&gt;
Call-ID: .HhebuOpo6e3xWPfjMlbO-zL.qIyPcsE
CSeq: 1 REGISTER
Route: &lt;sip:192.168.10.186:4060;lr&gt;
Expires: 600
User-Agent: blink-0.16.3
Content-Length:  0

SIP/2.0 401 Unauthorized - Challenging the UE
Via: SIP/2.0/UDP 192.168.10.196:51134
;rport=51134;branch=z9hG4bKPjSEpxorhplZtv8zLQwYSbyLhMcF5fwlsa
From: &quot;Peter Darvasi&quot; &lt;sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">darvasipeter at open-ims.test</A>
&gt;<i>;tag=4GSE4f8S2qtYVJeVA.SNMyzPDOhtc0m2
</I>To: &quot;Peter Darvasi&quot; &lt;sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">darvasipeter at open-ims.test</A>
&gt;<i>;tag=1bc71c692a807d7fb08f3d42ddcbd339-421f
</I>Call-ID: .HhebuOpo6e3xWPfjMlbO-zL.qIyPcsE
CSeq: 1 REGISTER
Path: &lt;sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">term at pcscf.open-ims.test</A>:4060;lr&gt;
Service-Route: &lt;sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">orig at scscf.open-ims.test</A>:6060;lr&gt;
Allow: INVITE, ACK, CANCEL, OPTIONS, BYE, REFER, SUBSCRIBE, NOTIFY, PUBLISH,
MESSAGE, INFO
Server: Sip EXpress router (2.1.0-dev1 OpenIMSCore (i386/linux))
Content-Length: 0
WWW-Authenticate: Digest realm=&quot;open-ims.test&quot;,
nonce=&quot;d7ee0154792a31d238a1817f777c1a1d&quot;, algorithm=MD5, qop=&quot;auth,auth-int&quot;

REGISTER sip:open-ims.test SIP/2.0
Via: SIP/2.0/UDP 192.168.10.196:51134
;rport;branch=z9hG4bKPjc.8a6B1vFXXszxY4zN3sRCqRg2dojfum
Max-Forwards: 70
From: &quot;Peter Darvasi&quot; &lt;sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">darvasipeter at open-ims.test</A>
&gt;<i>;tag=4GSE4f8S2qtYVJeVA.SNMyzPDOhtc0m2
</I>To: &quot;Peter Darvasi&quot; &lt;sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">darvasipeter at open-ims.test</A>&gt;
Contact: &lt;sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">jcpwyfev at 192.168.10.196</A>:51134&gt;
Call-ID: .HhebuOpo6e3xWPfjMlbO-zL.qIyPcsE
CSeq: 2 REGISTER
Route: &lt;sip:192.168.10.186:4060;lr&gt;
Expires: 600
User-Agent: blink-0.16.3
Authorization: Digest username=&quot;darvasipeter&quot;, realm=&quot;open-ims.test&quot;,
nonce=&quot;d7ee0154792a31d238a1817f777c1a1d&quot;, uri=&quot;sip:open-ims.test&quot;,
response=&quot;67dd7a8a51a8eeda4452cb7c0497cb5e&quot;, algorithm=MD5,
cnonce=&quot;iwl3Hf129jcVhR8LRF3zlOau73k2pj5m&quot;, qop=auth, nc=00000001
Content-Length:  0

SIP/2.0 401 Unauthorized - Challenging the UE
Via: SIP/2.0/UDP 192.168.10.196:51134
;rport=51134;branch=z9hG4bKPjc.8a6B1vFXXszxY4zN3sRCqRg2dojfum
From: &quot;Peter Darvasi&quot; &lt;sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">darvasipeter at open-ims.test</A>
&gt;<i>;tag=4GSE4f8S2qtYVJeVA.SNMyzPDOhtc0m2
</I>To: &quot;Peter Darvasi&quot; &lt;sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">darvasipeter at open-ims.test</A>
&gt;<i>;tag=1bc71c692a807d7fb08f3d42ddcbd339-0803
</I>Call-ID: .HhebuOpo6e3xWPfjMlbO-zL.qIyPcsE
CSeq: 2 REGISTER
Path: &lt;sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">term at pcscf.open-ims.test</A>:4060;lr&gt;
Service-Route: &lt;sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">orig at scscf.open-ims.test</A>:6060;lr&gt;
Allow: INVITE, ACK, CANCEL, OPTIONS, BYE, REFER, SUBSCRIBE, NOTIFY, PUBLISH,
MESSAGE, INFO
Server: Sip EXpress router (2.1.0-dev1 OpenIMSCore (i386/linux))
Content-Length: 0
WWW-Authenticate: Digest realm=&quot;open-ims.test&quot;,
nonce=&quot;df4d3c2d243baca9dffbec37fecd5056&quot;, algorithm=MD5, qop=&quot;auth,auth-int&quot;

The Open-IMS log says only:

DEBUG de.fhg.fokus.hss.main.Task- execute - Processing UAR!
DEBUG de.fhg.fokus.hss.main.Task- execute - Processing MAR!
DEBUG de.fhg.fokus.hss.cx.op.MAR- generateAuthVector - Auth-Scheme is
Digest-MD5
DEBUG de.fhg.fokus.hss.main.Task- execute - Processing UAR!
DEBUG de.fhg.fokus.hss.main.Task- execute - Processing MAR!
DEBUG de.fhg.fokus.hss.cx.op.MAR- generateAuthVector - Auth-Scheme is
Digest-MD5v

Thanks!

Regards,

Peter

On Tue, Apr 6, 2010 at 12:54 PM, Dushyant Dhalia &lt;
<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">dushyant.dhalia at rancoretech.com</A>&gt; wrote:

&gt;<i>  I don't know how you added the users. You can try the following mysql
</I>&gt;<i> queries to insert a user and try again -
</I>&gt;<i> INSERT INTO `impi` VALUES (11,11,'<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">usim000000 at open-ims.test</A>
</I>&gt;<i> ','abcdefgh',127,1,'\0\0','\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0','000000000000','','',0,3600,1);
</I>&gt;<i> INSERT INTO `impu` VALUES (11,'sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">subs000000 at open-ims.test</A>
</I>&gt;<i> ',0,0,0,1,11,1,'','',0,1);
</I>&gt;<i> INSERT INTO `impi_impu` VALUES (11,11,11,0);
</I>&gt;<i> INSERT INTO `impu_visited_network` VALUES (11,11,1);
</I>&gt;<i> INSERT INTO `imsu` VALUES (11,'subs000000','','',1,1);
</I>&gt;<i>
</I>&gt;<i> where IMPI is *<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">usim000000 at open-ims.test</A>**,* IMPU is *
</I>&gt;<i> sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">subs000000 at open-ims.test</A>**,* *11* is the serial number in the table
</I>&gt;<i> for this entry and *abcdefgh* is the password.
</I>&gt;<i>
</I>&gt;<i> Regards,
</I>&gt;<i> Dushyant P S Dhalia
</I>&gt;<i>
</I>&gt;<i> &quot;When work is a pleasure, life is a joy! When work is duty, life is slavery.&quot;
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Peter Darvasi wrote:
</I>&gt;<i>
</I>&gt;<i> Hello Everyone!
</I>&gt;<i>
</I>&gt;<i> Could you please help me with my configuration issue?
</I>&gt;<i> I am trying to register with a client, in which no manual IMPI
</I>&gt;<i> configuration is possible.
</I>&gt;<i> It autoconfigures the IMPI  (in 'Authorization' header) to a value of
</I>&gt;<i> 'IMPU' minus the value of the realm.
</I>&gt;<i> I inserted the corresponding entries to the HSS and linked them, but I get
</I>&gt;<i> 403 Forbidden - HSS Identities don't match.
</I>&gt;<i>
</I>&gt;<i> Is this error thrown when the difference between IMPI and IMPU is not only
</I>&gt;<i> the sip: prefix (assumption based on
</I>&gt;<i> <A HREF="../2007-July/002150.html">http://lists.berlios.de/pipermail/openimscore-users/2007-July/002150.html</A>)
</I>&gt;<i> or have I done some config in the HSS wrong (IMPI,IMPU,IMSU)?
</I>&gt;<i>
</I>&gt;<i> Thanks,
</I>&gt;<i>
</I>&gt;<i> Regards,
</I>&gt;<i>
</I>&gt;<i> Peter Darvasi
</I>&gt;<i>
</I>&gt;<i> ------------------------------
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> OpenIMSCore-Users mailing <A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">listOpenIMSCore-Users at lists.berlios.dehttps</A>://lists.berlios.de/mailman/listinfo/openimscore-users
</I>&gt;<i>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="https://lists.berlios.de/pipermail/openimscore-users/attachments/20100406/8aebd49f/attachment.html">https://lists.berlios.de/pipermail/openimscore-users/attachments/20100406/8aebd49f/attachment.html</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="006175.html">[OpenIMSCore-Users] IMPI and IMPU
</A></li>
	<LI>Next message: <A HREF="006178.html">[OpenIMSCore-Users] IMPI and IMPU
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6177">[ date ]</a>
              <a href="thread.html#6177">[ thread ]</a>
              <a href="subject.html#6177">[ subject ]</a>
              <a href="author.html#6177">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/openimscore-users">More information about the OpenIMSCore-Users
mailing list</a><br>
</body></html>
