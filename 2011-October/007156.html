<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [OpenIMSCore-Users] question on security-server missing header in	openIMS
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/openimscore-users/2011-October/index.html" >
   <LINK REL="made" HREF="mailto:openimscore-users%40lists.berlios.de?Subject=Re%3A%20%5BOpenIMSCore-Users%5D%20question%20on%20security-server%20missing%20header%20in%0A%09openIMS&In-Reply-To=%3CD9AD3D1627F52341B829F32E6DDE08910A1D5A%40rvil-mail2010%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="007155.html">
   <LINK REL="Next"  HREF="007158.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[OpenIMSCore-Users] question on security-server missing header in	openIMS</H1>
    <B>Ofer Goren</B> 
    <A HREF="mailto:openimscore-users%40lists.berlios.de?Subject=Re%3A%20%5BOpenIMSCore-Users%5D%20question%20on%20security-server%20missing%20header%20in%0A%09openIMS&In-Reply-To=%3CD9AD3D1627F52341B829F32E6DDE08910A1D5A%40rvil-mail2010%3E"
       TITLE="[OpenIMSCore-Users] question on security-server missing header in	openIMS">oferg at radvision.com
       </A><BR>
    <I>Sun Oct  9 16:52:03 CEST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="007155.html">[OpenIMSCore-Users] Fwd: 408: Request Time Out
</A></li>
        <LI>Next message: <A HREF="007158.html">[OpenIMSCore-Users] question on security-server missing header	in	openIMS
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7156">[ date ]</a>
              <a href="thread.html#7156">[ thread ]</a>
              <a href="subject.html#7156">[ subject ]</a>
              <a href="author.html#7156">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi.

I'm trying to REGISTER to the openIMS server, including establishing a security agreement between the UE and the server.
The REGISTER message contains a security-client header, but the 401 reply does not contain security-server header. I'm guessing I miss-configured something (probably on BOB's profile), but I don't know what.

The REGISTER message is:
REGISTER sip:open-ims.test SIP/2.0
From: &lt;sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">bob at open-ims.test</A>&gt;;tag=fc5728-19021cac-17b6-6009-0-34666339-0
To: &lt;sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">bob at open-ims.test</A>&gt;
Call-ID: fcd898-19021cac-17b6-6009-0-282f7644-0
CSeq: 1 REGISTER
Via: SIP/2.0/UDP 172.28.2.25:6070;rport;branch=z9hG4bK-0-1e3-59ccdc97-fc0558
Expires: 3600
Max-Forwards: 70
Supported: sec-agree,path
Require: sec-agree
Proxy-Require: sec-agree
Authorization: Digest username=&quot;<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">bob at open-ims.test</A>&quot;,realm=&quot;open-ims.test&quot;,nonce=&quot;&quot;,uri=&quot;sip:open-ims.test:5060&quot;,response=&quot;&quot;
Security-Client: ipsec-3gpp;alg=hmac-md5-96;prot=esp;mod=trans;ealg=aes-cbc;spi-c=689;spi-s=1827;port-c=57461;port-s=37208
Contact: &lt;sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">bob at arrow.radvision.com</A>&gt;
Content-Length: 0



And the reply is

SIP/2.0 401 Unauthorized - Challenging the UE
From: &lt;sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">bob at open-ims.test</A>&gt;;tag=fc5728-19021cac-17b6-6009-0-34666339-0
To: &lt;sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">bob at open-ims.test</A>&gt;;tag=cccd8f4e1ed94e96ba5b32f95e238000-5de9
Call-ID: fcd898-19021cac-17b6-6009-0-282f7644-0
CSeq: 1 REGISTER
Via: SIP/2.0/UDP 172.28.2.25:6070;rport=6070;branch=z9hG4bK-0-1e3-59ccdc97-fc0558
Path: &lt;sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">term at pcscf.open-ims.test</A>:4060;lr&gt;
Service-Route: &lt;sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">orig at scscf.open-ims.test</A>:6060;lr&gt;
Allow: INVITE, ACK, CANCEL, OPTIONS, BYE, REFER, SUBSCRIBE, NOTIFY, PUBLISH, MESSAGE, INFO
Server: Sip EXpress router (2.1.0-dev1 OpenIMSCore (i386/linux))
Content-Length: 0
Warning: 392 172.16.71.19:6060 &quot;Noisy feedback tells:  pid=3028 req_src_ip=172.16.71.19 req_src_port=5060 in_uri=sip:scscf.open-ims.test:6060 out_uri=sip:scscf.open-ims.test:6060 via_cnt==3&quot;
WWW-Authenticate: Digest realm=&quot;open-ims.test&quot;, nonce=&quot;uTUr/Lk5hDeGX76oDztN4CYh6wFdsAAA5hePaq7cz0M=&quot;, algorithm=AKAv1-MD5, qop=&quot;auth,auth-int&quot;

Thanks,

Ofer Goren

-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="https://lists.berlios.de/pipermail/openimscore-users/attachments/20111009/c8fd6ed4/attachment.html">https://lists.berlios.de/pipermail/openimscore-users/attachments/20111009/c8fd6ed4/attachment.html</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="007155.html">[OpenIMSCore-Users] Fwd: 408: Request Time Out
</A></li>
	<LI>Next message: <A HREF="007158.html">[OpenIMSCore-Users] question on security-server missing header	in	openIMS
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7156">[ date ]</a>
              <a href="thread.html#7156">[ thread ]</a>
              <a href="subject.html#7156">[ subject ]</a>
              <a href="author.html#7156">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/openimscore-users">More information about the OpenIMSCore-Users
mailing list</a><br>
</body></html>
