<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [OpenIMSCore-Users] Problems when registering
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/openimscore-users/2007-October/index.html" >
   <LINK REL="made" HREF="mailto:openimscore-users%40lists.berlios.de?Subject=Re%3A%20%5BOpenIMSCore-Users%5D%20Problems%20when%20registering&In-Reply-To=%3C2d9988550710230435k2390571fxc8f14d2279998e01%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002807.html">
   <LINK REL="Next"  HREF="002811.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[OpenIMSCore-Users] Problems when registering</H1>
    <B>Veronica Kumlin</B> 
    <A HREF="mailto:openimscore-users%40lists.berlios.de?Subject=Re%3A%20%5BOpenIMSCore-Users%5D%20Problems%20when%20registering&In-Reply-To=%3C2d9988550710230435k2390571fxc8f14d2279998e01%40mail.gmail.com%3E"
       TITLE="[OpenIMSCore-Users] Problems when registering">vkumlin at gmail.com
       </A><BR>
    <I>Tue Oct 23 13:35:07 CEST 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="002807.html">[OpenIMSCore-Users] [OpenIMSCore-CSCF] Avp problems
</A></li>
        <LI>Next message: <A HREF="002811.html">[OpenIMSCore-Users] Problems when registering
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2803">[ date ]</a>
              <a href="thread.html#2803">[ thread ]</a>
              <a href="subject.html#2803">[ subject ]</a>
              <a href="author.html#2803">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>  Hi!

I have just started to use OpenIMSCore and I am experiensing a few problems.

Firstly, when I look at &quot;COMMAND COUNTER&quot; at the hss.web.console this is
shown:

Then when I try to register my SIP-client I get errors.

*In the first case:*
The logging hss.web.console showes this:


&gt;<i> INFO  de.fhg.fokus.hss.util.LoggerHelper- init - WebLoggingAppender
</I>&gt;<i> added/cleared.
</I>&gt;<i> WARN  de.fhg.fokus.hss.diam.cx.UARCommandListener- recvMessage -
</I>&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">de.fhg.fokus.hss.diam.cx.UARCommandListener at 126b8f1</A>
</I>&gt;<i> de.fhg.fokus.cx.exceptions.base.InvalidAvpValue
</I>&gt;<i>  at de.fhg.fokus.hss.diam.cx.CxCommandListener.loadPrivateUserIdentity(
</I>&gt;<i> CxCommandListener.java:140)
</I>&gt;<i>  at de.fhg.fokus.hss.diam.cx.UARCommandListener.recvMessage (
</I>&gt;<i> UARCommandListener.java:115)
</I>&gt;<i>  at de.fhg.fokus.diameter.DiameterPeer.DiameterWorker.run(
</I>&gt;<i> DiameterWorker.java:100)
</I>&gt;<i>
</I>
And wireshark shows this:


&gt;<i> Request-Line: REGISTER sip:open-ims.test:5060;transport=udp SIP/2.0
</I>&gt;<i>
</I>&gt;<i> Message Header
</I>&gt;<i>
</I>&gt;<i> Call-ID: <A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">3f5261695c7d4a7121ad241d08dd1f02 at 192.168.9.103</A>
</I>&gt;<i>
</I>&gt;<i> CSeq: 1 REGISTER
</I>&gt;<i>
</I>&gt;<i> Via: SIP/2.0/UDP 192.168.9.103:9000;branch=z9hG4bKca6ad98eb1e57db9e661a5c361b66e5f
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Contact: &lt;sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">anonymous at 192.168.9.103</A>:9000;transport=udp&gt;
</I>&gt;<i>
</I>&gt;<i> To: Alice &lt;sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">alice at 192.168.9.103</A>:9000&gt;
</I>&gt;<i>
</I>&gt;<i> From: Alice &lt;sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">alice at 192.168.9.103</A>:9000&gt;;tag=161430446
</I>&gt;<i>
</I>&gt;<i> Max-Forwards: 6
</I>&gt;<i>
</I>&gt;<i> P-Visited-Network-ID: Visited Network Number 1
</I>&gt;<i>
</I>&gt;<i> Content-Length: 0
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Status-Line: SIP/2.0 403 Forbidden - HSS responded with unknown Result
</I>&gt;<i> Code
</I>&gt;<i>
</I>&gt;<i> Message Header
</I>&gt;<i>
</I>&gt;<i> Call-ID: <A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">3f5261695c7d4a7121ad241d08dd1f02 at 192.168.9.103</A>
</I>&gt;<i>
</I>&gt;<i> CSeq: 1 REGISTER
</I>&gt;<i>
</I>&gt;<i> Via: SIP/2.0/UDP 192.168.9.103:9000;branch=z9hG4bKca6ad98eb1e57db9e661a5c361b66e5f
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> To: Alice &lt;sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">alice at 192.168.9.103</A>
</I>&gt;<i> :9000&gt;;tag=d9c23c71c24e8715e1adda344c861367-f95a
</I>&gt;<i>
</I>&gt;<i> From: Alice &lt;sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">alice at 192.168.9.103</A>:9000&gt;;tag=161430446
</I>&gt;<i>
</I>&gt;<i> Server: Sip EXpress router (0.10.99-dev53-tm_fixes (i386/linux))
</I>&gt;<i>
</I>&gt;<i> Content-Length: 0
</I>&gt;<i>
</I>&gt;<i> Warning: 392 192.168.9.106:5060 &quot;Noisy feedback tells:   pid=6454
</I>&gt;<i> req_src_ip= 192.168.9.103 req_src_port=2263 in_uri=sip:open-ims.test:5060;transport=udp
</I>&gt;<i> out_uri=sip: open-ims.test:5060;transport=udp via_cnt==1&quot;
</I>&gt;<i>
</I>
*In the second case:*
I thought that maybe something in the headers were wrong so I changed a bit,
then

 The logging hss.web.console showes this:

&gt;<i>
</I>&gt;<i>  INFO  de.fhg.fokus.hss.util.LoggerHelper- init - WebLoggingAppender
</I>&gt;<i> added/cleared.
</I>&gt;<i> WARN  de.fhg.fokus.hss.diam.cx.UARCommandListener- recvMessage -
</I>&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">de.fhg.fokus.hss.diam.cx.UARCommandListener at 126b8f1</A>
</I>&gt;<i> de.fhg.fokus.cx.exceptions.ims.RoamingNotAllowed
</I>&gt;<i>  at de.fhg.fokus.hss.server.cx.op.QueryCxOperation.execute(
</I>&gt;<i> QueryCxOperation.java:131)
</I>&gt;<i>  at de.fhg.fokus.hss.server.cx.HSScxOperationsImpl.cxQuery (
</I>&gt;<i> HSScxOperationsImpl.java:99)
</I>&gt;<i>  at de.fhg.fokus.hss.diam.cx.UARCommandListener.recvMessage(
</I>&gt;<i> UARCommandListener.java:131)
</I>&gt;<i>  at de.fhg.fokus.diameter.DiameterPeer.DiameterWorker.run(
</I>&gt;<i> DiameterWorker.java:100)
</I>&gt;<i> WARN  de.fhg.fokus.hss.diam.cx.UARCommandListener - recvMessage -
</I>&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">de.fhg.fokus.hss.diam.cx.UARCommandListener at 126b8f1</A>
</I>&gt;<i>
</I>
And wireshark shows this:


&gt;<i>  Request-Line: REGISTER sip:open-ims.test:5060;transport=udp SIP/2.0
</I>&gt;<i>
</I>&gt;<i> Message Header
</I>&gt;<i>
</I>&gt;<i> Call-ID: <A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">8c40d6926bd79bf44e95ad339e70a5f6 at 192.168.9.103</A>
</I>&gt;<i>
</I>&gt;<i> CSeq: 1 REGISTER
</I>&gt;<i>
</I>&gt;<i> Via: SIP/2.0/UDP 192.168.9.103:9000;branch=z9hG4bK9fb22e55f8836058cd9d0012d2781e9a
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Contact: &lt;sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">anonymous at 192.168.9.103</A>:9000;transport=udp&gt;
</I>&gt;<i>
</I>&gt;<i> To: Alice &lt;sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">alice at open-ims.test</A>&gt;
</I>&gt;<i>
</I>&gt;<i> From: Alice &lt;sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">alice at open-ims.test</A>&gt;;tag=483546008
</I>&gt;<i>
</I>&gt;<i> Max-Forwards: 6
</I>&gt;<i>
</I>&gt;<i> P-Visited-Network-ID: Visited Network Number 1
</I>&gt;<i>
</I>&gt;<i> Content-Length: 0
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Status-Line: SIP/2.0 403 Forbidden - HSS Roaming not allowed
</I>&gt;<i>
</I>&gt;<i> Message Header
</I>&gt;<i>
</I>&gt;<i> Call-ID: <A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">8c40d6926bd79bf44e95ad339e70a5f6 at 192.168.9.103</A>
</I>&gt;<i>
</I>&gt;<i> CSeq: 1 REGISTER
</I>&gt;<i>
</I>&gt;<i> Via: SIP/2.0/UDP 192.168.9.103:9000;branch=z9hG4bK9fb22e55f8836058cd9d0012d2781e9a
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> To: Alice &lt;sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">alice at open-ims.test</A>&gt;;tag=d9c23c71c24e8715e1adda344c861367-f625
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> From: Alice &lt;sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">alice at open-ims.test</A>&gt;;tag=483546008
</I>&gt;<i>
</I>&gt;<i> Server: Sip EXpress router (0.10.99-dev53-tm_fixes (i386/linux))
</I>&gt;<i>
</I>&gt;<i> Content-Length: 0
</I>&gt;<i>
</I>&gt;<i> Warning: 392 192.168.9.106:5060 &quot;Noisy feedback tells:   pid=6456
</I>&gt;<i> req_src_ip= 192.168.9.103 req_src_port=2289 in_uri=sip:open-ims.test:5060;transport=udp
</I>&gt;<i> out_uri=sip: open-ims.test:5060;transport=udp via_cnt==1&quot;
</I>&gt;<i>
</I>
And after a short while, when I have not done anything (not that I know of)
this Error is shown in the logging:


&gt;<i> ERROR org.apache.catalina.core.ContainerBase.[null].[192.168.9.101].[/hss.web.console].[jsp]-
</I>&gt;<i> invoke - Servlet.service () for servlet jsp threw exception
</I>&gt;<i> org.apache.jasper.JasperException : Unable to compile class for JSP
</I>&gt;<i>
</I>&gt;<i> An error occurred at line: 43 in the jsp file: /pages/info/commands.jsp
</I>&gt;<i> Generated servlet error:
</I>&gt;<i> de.fhg.fokus.hss.main.HssServer.STARTUP cannot be resolved
</I>&gt;<i>  at org.apache.jasper.compiler.DefaultErrorHandler.javacError (
</I>&gt;<i> DefaultErrorHandler.java:84)
</I>&gt;<i>  at org.apache.jasper.compiler.ErrorDispatcher.javacError(
</I>&gt;<i> ErrorDispatcher.java:328)
</I>&gt;<i>  at org.apache.jasper.compiler.JDTCompiler.generateClass(JDTCompiler.java
</I>&gt;<i> :397)
</I>&gt;<i>  at org.apache.jasper.compiler.Compiler.compile (Compiler.java:288)
</I>&gt;<i>  at org.apache.jasper.compiler.Compiler.compile(Compiler.java:267)
</I>&gt;<i>  at org.apache.jasper.compiler.Compiler.compile(Compiler.java:255)
</I>&gt;<i>  at org.apache.jasper.JspCompilationContext.compile(
</I>&gt;<i> JspCompilationContext.java :556)
</I>&gt;<i>  at org.apache.jasper.servlet.JspServletWrapper.service(
</I>&gt;<i> JspServletWrapper.java:293)
</I>&gt;<i>  at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java
</I>&gt;<i> :291)
</I>&gt;<i>  at org.apache.jasper.servlet.JspServlet.service (JspServlet.java:241)
</I>&gt;<i>  at javax.servlet.http.HttpServlet.service(HttpServlet.java:802)
</I>&gt;<i>  at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(
</I>&gt;<i> ApplicationFilterChain.java:252)
</I>&gt;<i>  at org.apache.catalina.core.ApplicationFilterChain.doFilter (
</I>&gt;<i> ApplicationFilterChain.java:173)
</I>&gt;<i>  at org.apache.catalina.core.StandardWrapperValve.invoke(
</I>&gt;<i> StandardWrapperValve.java:213)
</I>&gt;<i>  at org.apache.catalina.core.StandardContextValve.invoke(
</I>&gt;<i> StandardContextValve.java:178)
</I>&gt;<i>  at org.apache.catalina.authenticator.AuthenticatorBase.invoke(
</I>&gt;<i> AuthenticatorBase.java:407)
</I>&gt;<i>  at org.apache.catalina.core.StandardHostValve.invoke(
</I>&gt;<i> StandardHostValve.java:126)
</I>&gt;<i>  at org.apache.catalina.valves.ErrorReportValve.invoke (
</I>&gt;<i> ErrorReportValve.java:105)
</I>&gt;<i>  at org.apache.catalina.core.StandardEngineValve.invoke(
</I>&gt;<i> StandardEngineValve.java:107)
</I>&gt;<i>  at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java
</I>&gt;<i> :148)
</I>&gt;<i>  at org.apache.coyote.http11.Http11Processor.process (Http11Processor.java
</I>&gt;<i> :856)
</I>&gt;<i>  at
</I>&gt;<i> org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.processConnection
</I>&gt;<i> (Http11Protocol.java:744)
</I>&gt;<i>  at org.apache.tomcat.util.net.PoolTcpEndpoint.processSocket(
</I>&gt;<i> PoolTcpEndpoint.java :527)
</I>&gt;<i>  at org.apache.tomcat.util.net.LeaderFollowerWorkerThread.runIt(
</I>&gt;<i> LeaderFollowerWorkerThread.java:80)
</I>&gt;<i>  at org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(
</I>&gt;<i> ThreadPool.java:684)
</I>&gt;<i>  at java.lang.Thread.run (Thread.java:619)
</I>&gt;<i>
</I>If anyone can help me I would be very happy!

Another question is if it is possible to use a SIP client or if it is
necessary to use an IMS client? (I tried to get utc IMS client going but it
never worked)

Tanks a lot
Veronica
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="https://lists.berlios.de/pipermail/openimscore-users/attachments/20071023/b32042c2/attachment.html">https://lists.berlios.de/pipermail/openimscore-users/attachments/20071023/b32042c2/attachment.html</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002807.html">[OpenIMSCore-Users] [OpenIMSCore-CSCF] Avp problems
</A></li>
	<LI>Next message: <A HREF="002811.html">[OpenIMSCore-Users] Problems when registering
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2803">[ date ]</a>
              <a href="thread.html#2803">[ thread ]</a>
              <a href="subject.html#2803">[ subject ]</a>
              <a href="author.html#2803">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/openimscore-users">More information about the OpenIMSCore-Users
mailing list</a><br>
</body></html>
