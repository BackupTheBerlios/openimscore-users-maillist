<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [OpenIMSCore-Users] TEL URI
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/openimscore-users/2007-October/index.html" >
   <LINK REL="made" HREF="mailto:openimscore-users%40lists.berlios.de?Subject=Re%3A%20%5BOpenIMSCore-Users%5D%20TEL%20URI&In-Reply-To=%3Cb33002040710110437k6b5e15ces3e22b298cae568c3%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002736.html">
   <LINK REL="Next"  HREF="002740.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[OpenIMSCore-Users] TEL URI</H1>
    <B>JF</B> 
    <A HREF="mailto:openimscore-users%40lists.berlios.de?Subject=Re%3A%20%5BOpenIMSCore-Users%5D%20TEL%20URI&In-Reply-To=%3Cb33002040710110437k6b5e15ces3e22b298cae568c3%40mail.gmail.com%3E"
       TITLE="[OpenIMSCore-Users] TEL URI">jfkavaka at gmail.com
       </A><BR>
    <I>Thu Oct 11 13:37:05 CEST 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="002736.html">[OpenIMSCore-Users] TEL URI
</A></li>
        <LI>Next message: <A HREF="002740.html">[OpenIMSCore-Users] TEL URI
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2737">[ date ]</a>
              <a href="thread.html#2737">[ thread ]</a>
              <a href="subject.html#2737">[ subject ]</a>
              <a href="author.html#2737">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Guhan P,

I wasn't able to track the problem along with the capture, because of
the debug level on the logs you sent. Could you send a more verbose
version (debug=9)?

I have used TEL URIs successfully for some time, and the loose route
fix didn't cause problems, so we need to find the root cause.

Also, which revision are you using?

Thanks,
JF

On 10/11/07, JF &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">jfkavaka at gmail.com</A>&gt; wrote:
&gt;<i> It came from here:
</I>&gt;<i> <A HREF="http://lists.berlios.de/pipermail/openimscore-cscf/2007-June/001235.html">http://lists.berlios.de/pipermail/openimscore-cscf/2007-June/001235.html</A>
</I>&gt;<i>
</I>&gt;<i> IIRC, this fix was related to the case when an AS starts a session
</I>&gt;<i> with a pre-loaded TEL URI. I guess now it won't work anymore.
</I>&gt;<i>
</I>&gt;<i> There was a loong discussion on this in serusers mailing list, that
</I>&gt;<i> came down to nothing:
</I>&gt;<i> <A HREF="http://lists.iptel.org/pipermail/serusers/2007-June/033459.html">http://lists.iptel.org/pipermail/serusers/2007-June/033459.html</A>
</I>&gt;<i>
</I>&gt;<i> I'll have a look at your traces and try to see if there is an
</I>&gt;<i> alternative fix that fits both purposes...
</I>&gt;<i>
</I>&gt;<i> JF
</I>&gt;<i>
</I>&gt;<i> On 10/11/07, Dragos Vingarzan &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">Dragos.Vingarzan at fokus.fraunhofer.de</A>&gt; wrote:
</I>&gt;<i> &gt; Yes, you are right... we have a bug when the Req-URI is a TEL uri...
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; I checked the iptel.org SER CVS and it seems that their version was
</I>&gt;<i> &gt; without this. I have committed this, so please retry and tell me if the
</I>&gt;<i> &gt; problem persists...
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; I still have to check where this code came from...
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; -Dragos
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Guhan P wrote:
</I>&gt;<i> &gt; &gt; Hi Dragos,
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; Please find the attached zip file which contains Pcscf,Scscf log files
</I>&gt;<i> &gt; &gt; along with network capture.
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; Regards,
</I>&gt;<i> &gt; &gt; Guhan
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; ----- Original Message ----- From: &quot;Guhan P&quot; &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">guhan.p at globaledgesoft.com</A>&gt;
</I>&gt;<i> &gt; &gt; To: &quot;Dragos Vingarzan&quot; &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">Dragos.Vingarzan at fokus.fraunhofer.de</A>&gt;
</I>&gt;<i> &gt; &gt; Cc: &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">openimscore-users at lists.berlios.de</A>&gt;
</I>&gt;<i> &gt; &gt; Sent: Tuesday, October 09, 2007 6:33 PM
</I>&gt;<i> &gt; &gt; Subject: Re: [OpenIMSCore-Users] TEL URI
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt;&gt; Hi Dragos,
</I>&gt;<i> &gt; &gt;&gt;
</I>&gt;<i> &gt; &gt;&gt; Please find the attached capture.
</I>&gt;<i> &gt; &gt;&gt;
</I>&gt;<i> &gt; &gt;&gt; Capture contains following messages.
</I>&gt;<i> &gt; &gt;&gt; 1. Registration from bob.tel:+1-234-567-890 got implicitly registered.
</I>&gt;<i> &gt; &gt;&gt; 2. Registration from alice.
</I>&gt;<i> &gt; &gt;&gt; 3. Made a call from sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">alice at open-ims.test</A> to tel:+1-234-567-890
</I>&gt;<i> &gt; &gt;&gt;    Got 478 and 500 response.
</I>&gt;<i> &gt; &gt;&gt; 4. Made a call from sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">alice at open-ims.test</A> to
</I>&gt;<i> &gt; &gt;&gt; &lt;sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">+1-234-567-890 at open-ims.test</A>;user=phone&gt;
</I>&gt;<i> &gt; &gt;&gt;    Got 404 response.
</I>&gt;<i> &gt; &gt;&gt;
</I>&gt;<i> &gt; &gt;&gt; Regards,
</I>&gt;<i> &gt; &gt;&gt; Guhan
</I>&gt;<i> &gt; &gt;&gt; ----- Original Message ----- From: &quot;Dragos Vingarzan&quot;
</I>&gt;<i> &gt; &gt;&gt; &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">Dragos.Vingarzan at fokus.fraunhofer.de</A>&gt;
</I>&gt;<i> &gt; &gt;&gt; To: &quot;Guhan P&quot; &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">guhan.p at globaledgesoft.com</A>&gt;
</I>&gt;<i> &gt; &gt;&gt; Cc: &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">openimscore-users at lists.berlios.de</A>&gt;
</I>&gt;<i> &gt; &gt;&gt; Sent: Tuesday, October 09, 2007 4:41 PM
</I>&gt;<i> &gt; &gt;&gt; Subject: Re: [OpenIMSCore-Users] TEL URI
</I>&gt;<i> &gt; &gt;&gt;
</I>&gt;<i> &gt; &gt;&gt;
</I>&gt;<i> &gt; &gt;&gt;&gt; Could you please capture and send a network trace? It seems that the
</I>&gt;<i> &gt; &gt;&gt;&gt; wrong message got to the P-CSCF. The Request-URI should be an IP
</I>&gt;<i> &gt; &gt;&gt;&gt; address, but it is not.
</I>&gt;<i> &gt; &gt;&gt;&gt;
</I>&gt;<i> &gt; &gt;&gt;&gt; -Dragos
</I>&gt;<i> &gt; &gt;&gt;&gt;
</I>&gt;<i> &gt; &gt;&gt;&gt; Guhan P wrote:
</I>&gt;<i> &gt; &gt;&gt;&gt;&gt; Hi All,
</I>&gt;<i> &gt; &gt;&gt;&gt;&gt;
</I>&gt;<i> &gt; &gt;&gt;&gt;&gt; I am implementing TEL URI support.
</I>&gt;<i> &gt; &gt;&gt;&gt;&gt; I created the public uri *&quot;tel:+1-234-567-890&quot; * and mapped to private
</I>&gt;<i> &gt; &gt;&gt;&gt;&gt; uri <A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">bob at open-ims.test</A> &lt;mailto:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">bob at open-ims.test</A>&gt; in OpenIMS Server.
</I>&gt;<i> &gt; &gt;&gt;&gt;&gt; Tel Uri ie.*&quot;tel:+1-234-567-890&quot;* got registered implicitly when I
</I>&gt;<i> &gt; &gt;&gt;&gt;&gt; registered for *sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">bob at open-ims.test</A>*.
</I>&gt;<i> &gt; &gt;&gt;&gt;&gt;
</I>&gt;<i> &gt; &gt;&gt;&gt;&gt; When I made a call from *sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">alice at open-ims.test</A>* to
</I>&gt;<i> &gt; &gt;&gt;&gt;&gt; *tel:+1-234-567-789,* I got *478* &quot;Unresolvable destination&quot; and *500*
</I>&gt;<i> &gt; &gt;&gt;&gt;&gt; &quot;Error forwarding originating initial request&quot; responses from PCSCF.
</I>&gt;<i> &gt; &gt;&gt;&gt;&gt;
</I>&gt;<i> &gt; &gt;&gt;&gt;&gt; Invite Message
</I>&gt;<i> &gt; &gt;&gt;&gt;&gt; -----------------------------------------------------------------------------
</I>&gt;<i> &gt; &gt;&gt;&gt;&gt;
</I>&gt;<i> &gt; &gt;&gt;&gt;&gt; INVITE *tel:+1-234-568-890* SIP/2.0
</I>&gt;<i> &gt; &gt;&gt;&gt;&gt; From: &lt;sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">alice at open-ims.test</A>&gt;tag:1234
</I>&gt;<i> &gt; &gt;&gt;&gt;&gt; To: *&lt;tel:+1-234-567-890&gt;*
</I>&gt;<i> &gt; &gt;&gt;&gt;&gt; Route: &lt;sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">orig at scscf.open-ims.test</A>:6060;lr&gt;
</I>&gt;<i> &gt; &gt;&gt;&gt;&gt; Contact: &lt;sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">alice at 172.16.7.208</A>:5060&gt;
</I>&gt;<i> &gt; &gt;&gt;&gt;&gt; .........
</I>&gt;<i> &gt; &gt;&gt;&gt;&gt; ----------------------------------------------------------------------------
</I>&gt;<i> &gt; &gt;&gt;&gt;&gt;
</I>&gt;<i> &gt; &gt;&gt;&gt;&gt;
</I>&gt;<i> &gt; &gt;&gt;&gt;&gt; I found the following printfs in PCSCF.
</I>&gt;<i> &gt; &gt;&gt;&gt;&gt; ---------------------------------------------------------------------------------------
</I>&gt;<i> &gt; &gt;&gt;&gt;&gt;
</I>&gt;<i> &gt; &gt;&gt;&gt;&gt; P-CSCF:cscf_get_originating_contact: *1://172.16.7.208:5060*
</I>&gt;<i> &gt; &gt;&gt;&gt;&gt; P-CSCF:cscf_get_terminating_contact: *0//:0*
</I>&gt;<i> &gt; &gt;&gt;&gt;&gt; **
</I>&gt;<i> &gt; &gt;&gt;&gt;&gt; ERROR: sip_hostport2su: could not resolve hostname: &quot;&quot;
</I>&gt;<i> &gt; &gt;&gt;&gt;&gt; ERROR: uri2dst: failed to resolve &quot;&quot;
</I>&gt;<i> &gt; &gt;&gt;&gt;&gt; ERROR: t_forward_nonack:failure to add branches
</I>&gt;<i> &gt; &gt;&gt;&gt;&gt; ---------------------------------------------------------------------------------------
</I>&gt;<i> &gt; &gt;&gt;&gt;&gt;
</I>&gt;<i> &gt; &gt;&gt;&gt;&gt;
</I>&gt;<i> &gt; &gt;&gt;&gt;&gt; Please help me to solve this issue?
</I>&gt;<i> &gt; &gt;&gt;&gt;&gt;
</I>&gt;<i> &gt; &gt;&gt;&gt;&gt; Regards,
</I>&gt;<i> &gt; &gt;&gt;&gt;&gt; Guhan
</I>&gt;<i> &gt; &gt;&gt;&gt;&gt;
</I>&gt;<i> &gt; &gt;&gt;&gt;&gt;
</I>&gt;<i> &gt; &gt;&gt;&gt;&gt; ------------------------------------------------------------------------
</I>&gt;<i> &gt; &gt;&gt;&gt;&gt;
</I>&gt;<i> &gt; &gt;&gt;&gt;&gt;
</I>&gt;<i> &gt; &gt;&gt;&gt;&gt; This e-mail contains PRIVILEGED AND CONFIDENTIAL INFORMATION intended
</I>&gt;<i> &gt; &gt;&gt;&gt;&gt; solely for the use of the addressee(s). If you are not the intended
</I>&gt;<i> &gt; &gt;&gt;&gt;&gt; recipient, please notify the sender by e-mail and delete the original
</I>&gt;<i> &gt; &gt;&gt;&gt;&gt; message.Global Edge Software Ltd has taken every reasonable
</I>&gt;<i> &gt; &gt;&gt;&gt;&gt; precaution to
</I>&gt;<i> &gt; &gt;&gt;&gt;&gt; minimize this risk, but is not liable for any damage you may
</I>&gt;<i> &gt; &gt;&gt;&gt;&gt; sustain as a
</I>&gt;<i> &gt; &gt;&gt;&gt;&gt; result of any virus in this e-mail. You should carry out your own
</I>&gt;<i> &gt; &gt;&gt;&gt;&gt; virus
</I>&gt;<i> &gt; &gt;&gt;&gt;&gt; checks before opening the e-mail or attachment. Global Edge
</I>&gt;<i> &gt; &gt;&gt;&gt;&gt; Software Ltd
</I>&gt;<i> &gt; &gt;&gt;&gt;&gt; reserves the right to monitor and review the content of all
</I>&gt;<i> &gt; &gt;&gt;&gt;&gt; messages sent
</I>&gt;<i> &gt; &gt;&gt;&gt;&gt; to or from this e-mail address
</I>&gt;<i> &gt; &gt;&gt;&gt;&gt;
</I>&gt;<i> &gt; &gt;&gt;&gt;&gt; ------------------------------------------------------------------------
</I>&gt;<i> &gt; &gt;&gt;&gt;&gt;
</I>&gt;<i> &gt; &gt;&gt;&gt;&gt;
</I>&gt;<i> &gt; &gt;&gt;&gt;&gt; _______________________________________________
</I>&gt;<i> &gt; &gt;&gt;&gt;&gt; OpenIMSCore-Users mailing list
</I>&gt;<i> &gt; &gt;&gt;&gt;&gt; <A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">OpenIMSCore-Users at lists.berlios.de</A>
</I>&gt;<i> &gt; &gt;&gt;&gt;&gt; <A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">https://lists.berlios.de/mailman/listinfo/openimscore-users</A>
</I>&gt;<i> &gt; &gt;&gt;&gt;&gt;
</I>&gt;<i> &gt; &gt;&gt;&gt;
</I>&gt;<i> &gt; &gt;&gt;&gt;
</I>&gt;<i> &gt; &gt;&gt;&gt; --
</I>&gt;<i> &gt; &gt;&gt;&gt; -----------------------------------------
</I>&gt;<i> &gt; &gt;&gt;&gt; Dipl. Eng. Dragos Vingarzan
</I>&gt;<i> &gt; &gt;&gt;&gt; Fraunhofer FOKUS/NGNI
</I>&gt;<i> &gt; &gt;&gt;&gt; Kaiserin-Augusta-Allee 31
</I>&gt;<i> &gt; &gt;&gt;&gt; 10589 Berlin,Germany
</I>&gt;<i> &gt; &gt;&gt;&gt; Phone +49 (0)30 - 3463 - 7385
</I>&gt;<i> &gt; &gt;&gt;&gt; Mobile +49 (0)163 - 159 - 5221
</I>&gt;<i> &gt; &gt;&gt;&gt; Web www.fokus.fraunhofer.de www.openimscore.org
</I>&gt;<i> &gt; &gt;&gt;&gt; We could change the world if God would give us the source code...
</I>&gt;<i> &gt; &gt;&gt;&gt; -----------------------------------------------------------------
</I>&gt;<i> &gt; &gt;&gt;&gt;
</I>&gt;<i> &gt; &gt;&gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; --
</I>&gt;<i> &gt; -----------------------------------------
</I>&gt;<i> &gt; Dipl. Eng. Dragos Vingarzan
</I>&gt;<i> &gt; Fraunhofer FOKUS/NGNI
</I>&gt;<i> &gt; Kaiserin-Augusta-Allee 31
</I>&gt;<i> &gt; 10589 Berlin,Germany
</I>&gt;<i> &gt; Phone +49 (0)30 - 3463 - 7385
</I>&gt;<i> &gt; Mobile +49 (0)163 - 159 - 5221
</I>&gt;<i> &gt; Web www.fokus.fraunhofer.de www.openimscore.org
</I>&gt;<i> &gt; We could change the world if God would give us the source code...
</I>&gt;<i> &gt; -----------------------------------------------------------------
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; _______________________________________________
</I>&gt;<i> &gt; OpenIMSCore-Users mailing list
</I>&gt;<i> &gt; <A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">OpenIMSCore-Users at lists.berlios.de</A>
</I>&gt;<i> &gt; <A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">https://lists.berlios.de/mailman/listinfo/openimscore-users</A>
</I>&gt;<i> &gt;
</I>&gt;<i>
</I>
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002736.html">[OpenIMSCore-Users] TEL URI
</A></li>
	<LI>Next message: <A HREF="002740.html">[OpenIMSCore-Users] TEL URI
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2737">[ date ]</a>
              <a href="thread.html#2737">[ thread ]</a>
              <a href="subject.html#2737">[ subject ]</a>
              <a href="author.html#2737">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/openimscore-users">More information about the OpenIMSCore-Users
mailing list</a><br>
</body></html>
