<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [OpenIMSCore-Users] Terminating Pcscf is not adding itself to record route
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/openimscore-users/2007-October/index.html" >
   <LINK REL="made" HREF="mailto:openimscore-users%40lists.berlios.de?Subject=Re%3A%20%5BOpenIMSCore-Users%5D%20Terminating%20Pcscf%20is%20not%20adding%20itself%20to%0A%20record%20route&In-Reply-To=%3C47176A22.3060307%40tid.es%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002769.html">
   <LINK REL="Next"  HREF="002756.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[OpenIMSCore-Users] Terminating Pcscf is not adding itself to record route</H1>
    <B>Nacho Conde</B> 
    <A HREF="mailto:openimscore-users%40lists.berlios.de?Subject=Re%3A%20%5BOpenIMSCore-Users%5D%20Terminating%20Pcscf%20is%20not%20adding%20itself%20to%0A%20record%20route&In-Reply-To=%3C47176A22.3060307%40tid.es%3E"
       TITLE="[OpenIMSCore-Users] Terminating Pcscf is not adding itself to record route">ics266 at tid.es
       </A><BR>
    <I>Thu Oct 18 16:13:54 CEST 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="002769.html">[OpenIMSCore-Users] Terminating Pcscf is not adding itself to record route
</A></li>
        <LI>Next message: <A HREF="002756.html">[OpenIMSCore-Users] Application server
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2770">[ date ]</a>
              <a href="thread.html#2770">[ thread ]</a>
              <a href="subject.html#2770">[ subject ]</a>
              <a href="author.html#2770">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>    Sorry, here is the attachment.

Nacho Conde escribi&#243;:
&gt;<i> Hello Dragos,
</I>&gt;<i>  
</I>&gt;<i>     We are using SBC because we have to interconnect different 
</I>&gt;<i> networks and  use different clients (Mobile Phone, PC client....).
</I>&gt;<i>     We are sure it&#180;s the same bug that you were talking about ; As 
</I>&gt;<i> long as we are using a SBC then the ip and port of the caller and 
</I>&gt;<i> callee, are always the same.
</I>&gt;<i>      The de-register hasn&#180;t any issues.
</I>&gt;<i>     The revision of the pcscf  is 428 2007-07-31, we send you the 
</I>&gt;<i> pcscf.cfg and logs
</I>&gt;<i>
</I>&gt;<i>     We hope this might shed some light on the scenario.
</I>&gt;<i>    
</I>&gt;<i>     Thanks in advance
</I>&gt;<i>
</I>&gt;<i>     David &amp; Nacho
</I>&gt;<i>    
</I>&gt;<i>
</I>&gt;<i> Dragos Vingarzan escribi&#243;:
</I>&gt;&gt;<i> Hello Nacho,
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Could you also capture and send the P-CSCF log? Is this the last
</I>&gt;&gt;<i> revision of the OpenIMSCore and the configuration is the same as in the
</I>&gt;&gt;<i> last revision? If not, please send your pcscf.cfg.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I suspect that this is the same bug as:
</I>&gt;&gt;<i> <A HREF="http://www.openimscore.org/node/65">http://www.openimscore.org/node/65</A> . This is not considered critical as
</I>&gt;&gt;<i> you usually don't call yourself...
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Also, I strongly discourage you to use any type of proxy between the UE
</I>&gt;&gt;<i> and the P-CSCF. I think that the processing on the terminating P-CSCF
</I>&gt;&gt;<i> gets into route[Term_Standalone] instead of route[Term_Initial] because
</I>&gt;&gt;<i> the dialog is wrongfully identified - the immediate cause is that the
</I>&gt;&gt;<i> SBC or whatever box is there between OpenIC and the P-CSCF has the same
</I>&gt;&gt;<i> IP:port for all users... Also, you probably have issues after you
</I>&gt;&gt;<i> de-register one user probably as the others will get 403 after that, am
</I>&gt;&gt;<i> I right?
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> -Dragos
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Nacho Conde wrote:
</I>&gt;&gt;<i>   
</I>&gt;&gt;&gt;<i> Hi,
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> About the previous message (see below), we have the same problem and
</I>&gt;&gt;&gt;<i> scenario. The Pcscf terminating is not adding itself to record route.
</I>&gt;&gt;&gt;<i> We have a snoop capture where you can see terminating pcscf&#180;s record
</I>&gt;&gt;&gt;<i> route is not added. Can you help us?
</I>&gt;&gt;&gt;<i> Feel free to request further information.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Thanks a lot,
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Nacho &amp; David
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> ---------------------------------------------------------------------------------------------
</I>&gt;&gt;&gt;<i> *raman gupta* ramandumcs at gmail.com
</I>&gt;&gt;&gt;<i> &lt;mailto:openimscore-users%40lists.berlios.de?Subject=%5BOpenIMSCore-Users%5D%20Terminating%20Pcscf%20is%20not%20adding%20itself%20to%0A%09record%20route&amp;In-Reply-To=&gt;
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> /Mon May 28 14:06:20 CEST 2007/
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>    * Previous message: [OpenIMSCore-Users] NAT problems - RTP Proxy
</I>&gt;&gt;&gt;<i>      issue &lt;003335.html&gt;
</I>&gt;&gt;&gt;<i>    * Next message: [OpenIMSCore-Users] Terminating Pcscf is not adding
</I>&gt;&gt;&gt;<i>      itself to record route &lt;003351.html&gt;
</I>&gt;&gt;&gt;<i>    * *Messages sorted by:* [ date ] &lt;date.html#3337&gt; [ thread ]
</I>&gt;&gt;&gt;<i>      &lt;thread.html#3337&gt; [ subject ] &lt;subject.html#3337&gt; [ author ]
</I>&gt;&gt;&gt;<i>      &lt;author.html#3337&gt;
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> ------------------------------------------------------------------------
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Hi
</I>&gt;&gt;&gt;<i> we are trying to establish a call between two IP soft phones over IMS
</I>&gt;&gt;&gt;<i> network. Both softphones are hidden behind NAT and then SBC. i.e we
</I>&gt;&gt;&gt;<i> have the
</I>&gt;&gt;&gt;<i> following setup
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> IP Phone --&gt; NAT --&gt;SBC --&gt;IMS Core
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> SBC uses single IP and port for both IP Phones sitting behind NAT. 
</I>&gt;&gt;&gt;<i> Problem
</I>&gt;&gt;&gt;<i> is that P-cscf is not adding itself  in record route on terminating
</I>&gt;&gt;&gt;<i> side in
</I>&gt;&gt;&gt;<i> initial INVITE request. Since both phones are running on same domain so
</I>&gt;&gt;&gt;<i> single instance of P,I, and S are running and acting as originating as
</I>&gt;&gt;&gt;<i> well
</I>&gt;&gt;&gt;<i> as terminating cscf.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> P-cscf is being able to add itself as originating P but not as a
</I>&gt;&gt;&gt;<i> teminating P in record route of initial invite message (S is working fine
</I>&gt;&gt;&gt;<i> and is adding itself as both originating and terminating S.) Due to which
</I>&gt;&gt;&gt;<i> Signalling messages are not following their proper path. And for ACK
</I>&gt;&gt;&gt;<i> P-cscf
</I>&gt;&gt;&gt;<i> gives the error: Messages not following Dialogue Route.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Thanks
</I>&gt;&gt;&gt;<i> Raman Gupta
</I>&gt;&gt;&gt;<i> ------------------------------------------------------------------------
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> _______________________________________________
</I>&gt;&gt;&gt;<i> OpenIMSCore-Users mailing list
</I>&gt;&gt;&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">OpenIMSCore-Users at lists.berlios.de</A>
</I>&gt;&gt;&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">https://lists.berlios.de/mailman/listinfo/openimscore-users</A>
</I>&gt;&gt;&gt;<i>   
</I>&gt;&gt;&gt;<i>     
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>   
</I>&gt;<i>
</I>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="https://lists.berlios.de/pipermail/openimscore-users/attachments/20071018/87eed48c/attachment.html">https://lists.berlios.de/pipermail/openimscore-users/attachments/20071018/87eed48c/attachment.html</A>&gt;
-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: pcscf.cfg
URL: &lt;<A HREF="https://lists.berlios.de/pipermail/openimscore-users/attachments/20071018/87eed48c/attachment.ksh">https://lists.berlios.de/pipermail/openimscore-users/attachments/20071018/87eed48c/attachment.ksh</A>&gt;
-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: PCSCF-logs.txt
URL: &lt;<A HREF="https://lists.berlios.de/pipermail/openimscore-users/attachments/20071018/87eed48c/attachment.txt">https://lists.berlios.de/pipermail/openimscore-users/attachments/20071018/87eed48c/attachment.txt</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002769.html">[OpenIMSCore-Users] Terminating Pcscf is not adding itself to record route
</A></li>
	<LI>Next message: <A HREF="002756.html">[OpenIMSCore-Users] Application server
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2770">[ date ]</a>
              <a href="thread.html#2770">[ thread ]</a>
              <a href="subject.html#2770">[ subject ]</a>
              <a href="author.html#2770">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/openimscore-users">More information about the OpenIMSCore-Users
mailing list</a><br>
</body></html>
