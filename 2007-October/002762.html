<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [OpenIMSCore-Users] ipsec security association problem
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/openimscore-users/2007-October/index.html" >
   <LINK REL="made" HREF="mailto:openimscore-users%40lists.berlios.de?Subject=Re%3A%20%5BOpenIMSCore-Users%5D%20ipsec%20security%20association%20problem&In-Reply-To=%3Cdf9c67450710171634m354f4883xd79eaa8e04fc9b72%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002761.html">
   <LINK REL="Next"  HREF="002768.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[OpenIMSCore-Users] ipsec security association problem</H1>
    <B>Soshant Bali</B> 
    <A HREF="mailto:openimscore-users%40lists.berlios.de?Subject=Re%3A%20%5BOpenIMSCore-Users%5D%20ipsec%20security%20association%20problem&In-Reply-To=%3Cdf9c67450710171634m354f4883xd79eaa8e04fc9b72%40mail.gmail.com%3E"
       TITLE="[OpenIMSCore-Users] ipsec security association problem">soshant.bali at gmail.com
       </A><BR>
    <I>Thu Oct 18 01:34:39 CEST 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="002761.html">[OpenIMSCore-Users] PacketCable support - Bug in	modules/scscf/registration.c
</A></li>
        <LI>Next message: <A HREF="002768.html">[OpenIMSCore-Users] ipsec security association problem
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2762">[ date ]</a>
              <a href="thread.html#2762">[ thread ]</a>
              <a href="subject.html#2762">[ subject ]</a>
              <a href="author.html#2762">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>We are trying to register a UE with OpenIMS using IPSec/AKA. On receiving
the 401 challenge from pcscf, the UE sends second Register to pcscf that is
encrypted using ipsec. This register is decrypted fine by the pcscf. However
the pcscf does not encrypt the 200ok it sends back to the UE. The 200 ok is
sent in plain text to the UE. We checked and found out that the pcscf does
not create a security association in the direction from pcscf to the UE. It
only creates security association in the direction from the UE to the pcscf.
The attached trace, trace1.pcap shows this.

We changed the contact field in the first register to match the contact
field in the second register and in this case the security associations are
created fine in both directions. This is shown in trace2.pcap that is
attached.

Is this expected behavior? What is the reasoning for making the pcscf match
the contact field of the two register messages before deciding whether or
not to create a security association in the reverse direction?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="https://lists.berlios.de/pipermail/openimscore-users/attachments/20071017/214c62c2/attachment.html">https://lists.berlios.de/pipermail/openimscore-users/attachments/20071017/214c62c2/attachment.html</A>&gt;
-------------- next part --------------
A non-text attachment was scrubbed...
Name: trace1.pcap
Type: application/octet-stream
Size: 14487 bytes
Desc: not available
URL: &lt;<A HREF="https://lists.berlios.de/pipermail/openimscore-users/attachments/20071017/214c62c2/attachment.obj">https://lists.berlios.de/pipermail/openimscore-users/attachments/20071017/214c62c2/attachment.obj</A>&gt;
-------------- next part --------------
A non-text attachment was scrubbed...
Name: trace2.pcap
Type: application/octet-stream
Size: 10676 bytes
Desc: not available
URL: &lt;<A HREF="https://lists.berlios.de/pipermail/openimscore-users/attachments/20071017/214c62c2/attachment-0001.obj">https://lists.berlios.de/pipermail/openimscore-users/attachments/20071017/214c62c2/attachment-0001.obj</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002761.html">[OpenIMSCore-Users] PacketCable support - Bug in	modules/scscf/registration.c
</A></li>
	<LI>Next message: <A HREF="002768.html">[OpenIMSCore-Users] ipsec security association problem
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2762">[ date ]</a>
              <a href="thread.html#2762">[ thread ]</a>
              <a href="subject.html#2762">[ subject ]</a>
              <a href="author.html#2762">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/openimscore-users">More information about the OpenIMSCore-Users
mailing list</a><br>
</body></html>
