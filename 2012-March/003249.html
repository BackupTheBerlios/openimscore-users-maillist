<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> No subject
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/openimscore-users/2012-March/index.html" >
   <LINK REL="made" HREF="mailto:openimscore-users%40lists.berlios.de?Subject=Re%3A%20No%20subject&In-Reply-To=%3Cmailman.33.1331735699.7444.openimscore-users%40lists.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003172.html">
   <LINK REL="Next"  HREF="003256.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>No subject</H1>
    <B></B> 
    <A HREF="mailto:openimscore-users%40lists.berlios.de?Subject=Re%3A%20No%20subject&In-Reply-To=%3Cmailman.33.1331735699.7444.openimscore-users%40lists.berlios.de%3E"
       TITLE="No subject">
       </A><BR>
    <I>Wed Mar 14 15:33:54 CET 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="003172.html">No subject
</A></li>
        <LI>Next message: <A HREF="003256.html">No subject
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3249">[ date ]</a>
              <a href="thread.html#3249">[ thread ]</a>
              <a href="subject.html#3249">[ subject ]</a>
              <a href="author.html#3249">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>any idea? pl have a look to the log.


3(14030) DBG:P-CSCF:P_security_401: Security-Client header found :
&lt;ipsec-3gpp;alg=3Dhmac-md5-96;prot=3Desp;mod=3Dtrans;spi-c=3D2345;spi-s=3D9=
870;port-c=3D6001;port-s=3D6000&gt;.
3(14030) parse_headers: flags=3Dffffffffffffffff
3(14030) DBG:P-CSCF:save_contact_security: &lt;sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">bob at 10.21.21.149</A>
:<i>6070;transport=3Dudp&gt;
</I>3(14030) DBG:P-CSCF:save_contact_security: 1 10.21.21.149 : 6070
3(14030) DBG:P-CSCF:save_contact_security: CK:
&lt;43e0597777e294752d6283443c704e40&gt;
3(14030) DBG:P-CSCF:save_contact_security: IK:
&lt;8bc5d0f2366cf8625a1a7dd67acdeb74&gt;
3(14030) DBG:P-CSCF:save_contact_security: Enc Algorithm: &lt;&gt;
3(14030) DBG:P-CSCF:save_contact_security: Int Algorithm: &lt;hmac-md5-96&gt;
3(14030) DBG:P-CSCF:save_contact_security: SPI-C: 2345
3(14030) DBG:P-CSCF:save_contact_security: SPI-S: 9870
3(14030) DBG:P-CSCF:save_contact_security: Port-C: 6001
3(14030) DBG:P-CSCF:save_contact_security: Port-S: 6000
3(14030) INF:P-CSCF:execute_cmd:
[/opt/OpenIMSCore/ser_ims/modules/pcscf/ipsec_P_Inc_Req.sh 10.21.21.149 600=
1
10.21.21.147 4064 5001 null 0x43e0597777e294752d6283443c704e40 hmac-md5
0x8bc5d0f2366cf8625a1a7dd67acdeb74]
3(14030) DEBUG: t_check: msg id=3D1 global id=3D1 T start=3D0xb61999a8
3(14030) DEBUG: t_check: T already found!
3(14030) DEBUG:t_check_status: checked status is &lt;401&gt;
*3(14030) ERR:P-CSCF:P_security_relay: we cannot find the contact or its
IPSec/TLS SAs for &lt;1://10.21.21.149:6070&gt;.
*3(14030) -&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; T_code=3D0, new_code=3D401
3(14030) DEBUG: t_check: msg id=3D0 global id=3D0 T start=3D0xb61999a8
3(14030) DEBUG: t_check: T already found!
3(14030) DEBUG:t_check_status: checked status is &lt;401&gt;
3(14030) DBG:free_faked_req: removing hdr-&gt;parsed 7
3(14030) DEBUG: relay_reply: branch=3D0, save=3D0, relay=3D0
3(14030)  old size: 1043, new size: 1013
3(14030) build_res_from_sip_res: copied size: orig:1041, new: 1011, rest: 2
msg=3D


BR,
Sabyasachi

On 1/25/08, Klemens Schragel &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">klemens.schragel at gmx.at</A>&gt; wrote:
&gt;<i> &gt; Hello,
</I>&gt;<i>
</I>&gt;<i> Hi,
</I>&gt;<i>
</I>&gt;<i> &gt; I want to do a Register over IPSec but pcscf gives one error like below=
</I>.
&gt;<i> &gt; ERR:P-CSCF:P_security_relay: we cannot find the contact or its
</I>&gt;<i> &gt; IPSec/TLS SAs for &lt;1://10.21.21.149:6070&gt;.
</I>&gt;<i>
</I>&gt;<i> I'm not sure if the ERROR message is really a problem.. I think it's more
</I>an information from P-CSCF that there hasn't been yet a SA established for
this connection..
&gt;<i>
</I>&gt;<i> more interesting is this, here handles the response...
</I>&gt;<i>
</I>&gt;<i>  1(8012) build_res_from_sip_res: copied size: orig:1040, new: 1010, rest:
</I>2 msg=3D
&gt;<i>  SIP/2.0 401 Unauthorized - Challenging the UE
</I>&gt;<i>  Via: SIP/2.0/UDP 10.21.21.149:6070;rport=3D6070;branch=3Dz9hG4bK12010964=
</I>38817
&gt;<i>  From: &quot;bob&quot; &lt;sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">bob at open-ims2.test</A>&gt;;tag=3D1201096438817
</I>&gt;<i>  To: &quot;bob&quot; &lt;sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">bob at open-ims2.test</A>
</I>&gt;<i>;tag=3Dba3c9c9c2e1d2842aad0ac49411acef0-c046
</I>&gt;<i>  Call-ID: <A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">1201096438511 at 10.21.21.149</A>
</I>&gt;<i>  CSeq: 1 REGISTER
</I>&gt;<i>  Path: &lt;sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">term at pcscf.open-ims2.test</A>:4060;lr&gt;
</I>&gt;<i>  Service-Route: &lt;sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">orig at scscf.open-ims2.test</A>:6060;lr&gt;
</I>&gt;<i>  Allow: INVITE, ACK, CANCEL, OPTIONS, BYE, REFER, SUBSCRIBE, NOTIFY,
</I>MESSAGE, INFO
&gt;<i>  Server: Sip EXpress router (2.1.0-dev1 OpenIMSCore (i386/linux))
</I>&gt;<i>  Content-Length: 0
</I>&gt;<i>  Warning: 392 10.21.21.147:6060 &quot;Noisy feedback tells:  pid=3D6992
</I>req_src_ip=3D10.21.21.147 req_src_port=3D5060 in_uri=3Dsip:scscf.open-ims2.=
test:6060
out_uri=3Dsip:scscf.open-ims2.test:6060 via_cnt=3D=3D3&quot;
&gt;<i>  WWW-Authenticate: Digest realm=3D&quot;open-ims2.test&quot;,
</I>nonce=3D&quot;HmlHeaUo1mGzqMxSPx05UoQsop/54wAARBZrISwY0eM=3D&quot;, algorithm=3DAKAv1=
-MD5
&gt;<i>  Security-Server: ipsec-3gpp; ealg=3Dnull; alg=3Dhmac-md5-96; spi-c=3D500=
</I>0;
spi-s=3D5001; port-c=3D4063; port-s=3D4064; q=3D0.1
&gt;<i>
</I>&gt;<i> so far so good... the trace reveals that this is sent to UE. as far as I
</I>remember the P-CSCF shoudl now start the shell-scripts creating the IPSec
SAs, but the next logging just shows:
&gt;<i>
</I>&gt;<i>  1(8012) WARNING:vqm_resize: resize(0) called
</I>&gt;<i>  1(8012) qm_malloc(0xb5faf000, 1012) called from mem/shm_mem.c:
</I>_shm_resize(106)
&gt;<i>  1(8012) qm_malloc(0xb5faf000, 1012) returns address 0xb619b61c frag.
</I>0xb619b604 (size=3D1012) on 1 -th hit
&gt;<i>  1(8012) DEBUG: reply relayed. buf=3D0x8187584: SIP/2.0 401 Una...,
</I>shmem=3D0xb619b61c: SIP/2.0 4 totag_retr=3D0
&gt;<i>  1(8012) qm_free(0x812d580, 0x8187584), called from t_reply.c:
</I>relay_reply(1420)
&gt;<i>  1(8012) qm_free: freeing frag. 0x818756c alloc'ed from msg_translator.c:
</I>build_res_buf_from_sip_res(1684)
&gt;<i>  1(8012) DEBUG: cleanup_uac_timers: RETR/FR timers reset
</I>&gt;<i>  1(8012) DEBUG:destroy_avp_list: destroying list (nil)
</I>&gt;<i>  1(8012) DEBUG:destroy_avp_list: destroying list (nil)
</I>&gt;<i>  1(8012) DEBUG:destroy_avp_list: destroying list (nil)
</I>&gt;<i>  1(8012) DEBUG:destroy_avp_list: destroying list (nil)
</I>&gt;<i>  1(8012) DEBUG:destroy_avp_list: destroying list (nil)
</I>&gt;<i>  1(8012) DEBUG:destroy_avp_list: destroying list (nil)
</I>&gt;<i>
</I>&gt;<i> what happens after these strange (at least I don't know them)
</I>'destroy_avp_list' messages?
&gt;<i>
</I>&gt;<i> btw: your setkey output isn't complete...
</I>&gt;<i> you have build the SA for a request from UE =3D&gt; P-CSCF... for this
</I>transaction you need at least an additional SA decoding the response, i.e.
from P-CSCF =3D&gt; UE...
&gt;<i>
</I>&gt;<i> br, Klemens
</I>&gt;<i>
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Here is my testbed:::
</I>&gt;<i> &gt; I am using Xpresent stack for IPSec at client ip 10.21.21.149
</I>&gt;<i> &gt; Open IMS in ip 10.21.21.147
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; While sending the first REGISTER it is okay but while sending the
</I>&gt;<i> &gt; encrypted REG over IPSec (esp) it does not handled by Open IMS. The
</I>&gt;<i> &gt; 2nd REG does not reach at pcscf.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Sending the ethereal trace for both client and server, output of
</I>&gt;<i> &gt; setkey, pcscf logs and pcscf.cfg for your reference.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Pl have a look and let me know if i did something wrong.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Also pl let me know how to handle logging info for servers like
</I>&gt;<i> &gt; p/s/icscf. Like suppose i want to dump the logs only for DEBUG and ERR
</I>&gt;<i> &gt; what should be the log level in cfg files.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Regards,
</I>&gt;<i> &gt; Sabyasachi
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; On 1/24/08, Klemens Schragel &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">klemens.schragel at gmx.at</A>&gt; wrote:
</I>&gt;<i> &gt; &gt; Hi,
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; try
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; setkey -c &lt;&lt; EOF
</I>&gt;<i> &gt; &gt; spdadd 192.168.0.7/32[5060] 192.168.0.5/32[5060] tcp -P out ipsec
</I>&gt;<i> &gt; esp/transport//unique:1 ;
</I>&gt;<i> &gt; &gt; EOF
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; then setkey -DP should response:
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; 192.168.0.7[5060] 192.168.0.5[5060] tcp
</I>&gt;<i> &gt; &gt;        out prio def ipsec
</I>&gt;<i> &gt; &gt;        esp/transport//unique:1
</I>&gt;<i> &gt; &gt;        created: Jan 24 06:43:35 2008  lastused:
</I>&gt;<i> &gt; &gt;        lifetime: 0(s) validtime: 0(s)
</I>&gt;<i> &gt; &gt;        spid=3D1 seq=3D0 pid=3D2041
</I>&gt;<i> &gt; &gt;        refcnt=3D1
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; br, Klemens
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; -----Original Message-----
</I>&gt;<i> &gt; &gt; From: Sabyasachi Samal [mailto:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">sabyasachisamal at gmail.com</A>]
</I>&gt;<i> &gt; &gt; Sent: Mittwoch, 23. J=E4nner 2008 16:51
</I>&gt;<i> &gt; &gt; To: Klemens Schragel
</I>&gt;<i> &gt; &gt; Subject: Re: How to test IPSec in Open IMS
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; Hey,
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; I have already tried setkey -DP command but it is showing No SPD
</I>&gt;<i> &gt; entries.
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; Can you pl give one sample command to add one entry and how to dump
</I>&gt;<i> &gt; that.
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; I think there is some problem in the installation.
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; after installing the ipsec-tools in my /etc there is no ipsec.conf an=
</I>d
&gt;<i> &gt; &gt; /etc/init.d there is no ipsec to start.
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; BR,
</I>&gt;<i> &gt; &gt; Sabyasachi
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; On 1/23/08, Klemens Schragel &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">klemens.schragel at gmx.at</A>&gt; wrote:
</I>&gt;<i> &gt; &gt; &gt; Yes, actually this command should show the DB entries...
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; Although I don't understand why you start setkey with a end of file
</I>&gt;<i> &gt; &gt; entry...
</I>&gt;<i> &gt; &gt; [Hide Quoted Text]
</I>&gt;<i> &gt; &gt; &gt; I think you'll need the EOF also after adding spddump...
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; But also for the dump you can start directly from the command line
</I>&gt;<i> &gt; with
</I>&gt;<i> &gt; &gt; &gt; setkey -DP
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; br
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; -----Original Message-----
</I>&gt;<i> &gt; &gt; &gt; &gt; From: Sabyasachi Samal [mailto:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">sabyasachisamal at gmail.com</A>]
</I>&gt;<i> &gt; &gt; &gt; &gt; Sent: Mittwoch, 23. J=E4nner 2008 16:27
</I>&gt;<i> &gt; &gt; &gt; &gt; To: Klemens Schragel
</I>&gt;<i> &gt; &gt; &gt; &gt; Subject: Re: How to test IPSec in Open IMS
</I>&gt;<i> &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; Thanks, Now it is not showing any error. but while adding a spd
</I>&gt;<i> &gt; using
</I>&gt;<i> &gt; &gt; &gt; &gt; below commad, i think it is not storing the data.
</I>&gt;<i> &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; # setkey -c &lt;&lt; EOF
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; spdadd 10.21.21.147 10.21.21.149 any -P out ipsec
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt;EOF
</I>&gt;<i> &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; then i am using setkey -c &lt;&lt; spddump to show those value. It is
</I>not
&gt;<i> &gt; &gt; &gt; &gt; showing anything.
</I>&gt;<i> &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; Is there any database ipsec stores the data?
</I>&gt;<i> &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; Regards,
</I>&gt;<i> &gt; &gt; &gt; &gt; Sabyasachi
</I>&gt;<i> &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; On 1/23/08, Klemens Schragel &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">klemens.schragel at gmx.at</A>&gt; wrote:
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; Hi Sabyasachi,
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; Try it with &quot;setkey -c &lt;&lt; spdflush&quot;
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; And you can have the same effect by just entering setkey -FP
</I>(see
&gt;<i> &gt; also
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; man-pages of setkey)
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; br
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; -----Original Message-----
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; From: Sabyasachi Samal [mailto:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">sabyasachisamal at gmail.com</A>]
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; Sent: Mittwoch, 23. J=E4nner 2008 15:54
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; To: Klemens Schragel
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; Subject: Re: How to test IPSec in Open IMS
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; Hello Klemens,
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; I am using # setkey -c spdflush the output is setkey:
</I>spdflush:
&gt;<i> &gt; no
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; such file or directory.
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; Pl let me know how to overcome this.
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; Regards,
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; Sabyasachi
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; On 1/23/08, Klemens Schragel &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">klemens.schragel at gmx.at</A>&gt; wrote:
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; Hi Sabyasachi,
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; Could you send me the whole command you entered with output=
</I>?
&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; First: as far as I know its spdadd =3D&gt; security policy
</I>database
&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; Second: the way you describe it sounds like you entered the
</I>&gt;<i> &gt; &gt; command
</I>&gt;<i> &gt; &gt; [Hide Quoted Text]
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; direct
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; in your shell.. but sdpadd is a command of setkey so you
</I>fist
&gt;<i> &gt; have
</I>&gt;<i> &gt; &gt; &gt; &gt; to
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; start
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; setkey...
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; br, Klemens
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; -----Original Message-----
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; From: Sabyasachi Samal [mailto:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">sabyasachisamal at gmail.com</A>]
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; Sent: Mittwoch, 23. J=E4nner 2008 13:53
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; To: Dragos Vingarzan
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; Cc: Klemens Schragel; <A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">openimscore-users at lists.berlios.de</A>
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; Subject: How to test IPSec in Open IMS
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; Hello Guys,
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; I am having problem while testing the stuffs using IPSec.
</I>I
&gt;<i> &gt; am
</I>&gt;<i> &gt; &gt; &gt; &gt; using
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; 2.6.9-22.ELsmp kernel and install ipsec-tools 0.6.7. But
</I>&gt;<i> &gt; while i
</I>&gt;<i> &gt; &gt; &gt; &gt; am
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; using &quot;sdpadd&quot; it is showing command not found.
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; So can you pl help me how to over come this issue. For
</I>this
&gt;<i> &gt; the
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; scripts related to ipsec inside /ser_ims/modules/pcscf di=
</I>d
&gt;<i> &gt; not
</I>&gt;<i> &gt; &gt; &gt; &gt; work.
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; whether i need some extra module for the same, pl advise
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; Regards,
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; Sabyasachi
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; --
</I>&gt;<i> &gt; &gt; GMX FreeMail: 1 GB Postfach, 5 E-Mail-Adressen, 10 Free SMS.
</I>&gt;<i> &gt; &gt; Alle Infos und kostenlose Anmeldung: <A HREF="http://www.gmx.net/de/go/freemai=">http://www.gmx.net/de/go/freemai=</A>
</I>l
&gt;<i> &gt; &gt;
</I>&gt;<i>
</I>&gt;<i> --
</I>&gt;<i> Ist Ihr Browser Vista-kompatibel? Jetzt die neuesten
</I>&gt;<i> Browser-Versionen downloaden: <A HREF="http://www.gmx.net/de/go/browser">http://www.gmx.net/de/go/browser</A>
</I>&gt;<i>
</I>
------=_Part_131_3248084.1201260838904
Content-Type: text/html; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Hello,&lt;br&gt;&lt;br&gt;I am confused about the sh files meant for IPSec. There are 1=
0 sh files in the /modules/pcscf folder. 5 for E and 5 for P. But in pcscf.=
cfg only 5 for P is used. When the sh files for E are used?&lt;br&gt;&lt;br&gt;From the=
 pcscf logs it seems every thing is okay but why SA is not created? any ide=
a? pl have a look to the log.&lt;br&gt;
&lt;br&gt;&lt;br&gt;3(14030) DBG:P-CSCF:P_security_401: Security-Client header found : =
&lt;ipsec-3gpp;alg=3Dhmac-md5-96;prot=3Desp;mod=3Dtrans;spi-c=3D2345;spi-s=
=3D9870;port-c=3D6001;port-s=3D6000&gt;.&lt;br&gt;3(14030) parse_headers: flags=
=3Dffffffffffffffff&lt;br&gt;
3(14030) DBG:P-CSCF:save_contact_security: &lt;sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">bob at 10.21.21.149</A>:6070;tr=
ansport=3Dudp&gt;&lt;br&gt;3(14030) DBG:P-CSCF:save_contact_security: 1 &lt;a href=
=3D&quot;<A HREF="http://10.21.21.149">http://10.21.21.149</A>&quot;&gt;10.21.21.149&lt;/a&gt; : 6070&lt;br&gt;3(14030) DBG:P-CSCF:sav=
e_contact_security: CK: &lt;43e0597777e294752d6283443c704e40&gt;&lt;br&gt;
3(14030) DBG:P-CSCF:save_contact_security: IK: &lt;8bc5d0f2366cf8625a1a7dd6=
7acdeb74&gt;&lt;br&gt;3(14030) DBG:P-CSCF:save_contact_security: Enc Algorithm: &amp;=
lt;&gt;&lt;br&gt;3(14030) DBG:P-CSCF:save_contact_security: Int Algorithm: &lt;hm=
ac-md5-96&gt;&lt;br&gt;
3(14030) DBG:P-CSCF:save_contact_security: SPI-C: 2345&lt;br&gt;3(14030) DBG:P-CS=
CF:save_contact_security: SPI-S: 9870&lt;br&gt;3(14030) DBG:P-CSCF:save_contact_s=
ecurity: Port-C: 6001&lt;br&gt;3(14030) DBG:P-CSCF:save_contact_security: Port-S:=
 6000&lt;br&gt;
3(14030) INF:P-CSCF:execute_cmd: [/opt/OpenIMSCore/ser_ims/modules/pcscf/ip=
sec_P_Inc_Req.sh &lt;a href=3D&quot;<A HREF="http://10.21.21.149">http://10.21.21.149</A>&quot;&gt;10.21.21.149&lt;/a&gt; 6001 &lt;a h=
ref=3D&quot;<A HREF="http://10.21.21.147">http://10.21.21.147</A>&quot;&gt;10.21.21.147&lt;/a&gt; 4064 5001 null 0x43e0597777e29=
4752d6283443c704e40 hmac-md5 0x8bc5d0f2366cf8625a1a7dd67acdeb74]&lt;br&gt;
3(14030) DEBUG: t_check: msg id=3D1 global id=3D1 T start=3D0xb61999a8&lt;br&gt;3=
(14030) DEBUG: t_check: T already found!&lt;br&gt;3(14030) DEBUG:t_check_status: =
checked status is &lt;401&gt;&lt;br&gt;&lt;strong&gt;&lt;font color=3D&quot;#ff0000&quot;&gt;3(14030) E=
RR:P-CSCF:P_security_relay: we cannot find the contact or its IPSec/TLS SAs=
 for &lt;1://10.21.21.149:6070&gt;.&lt;br&gt;
&lt;/font&gt;&lt;/strong&gt;3(14030) -&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; T_code=3D0, =
new_code=3D401&lt;br&gt;3(14030) DEBUG: t_check: msg id=3D0 global id=3D0 T start=
=3D0xb61999a8&lt;br&gt;3(14030) DEBUG: t_check: T already found!&lt;br&gt;3(14030) DEBU=
G:t_check_status: checked status is &lt;401&gt;&lt;br&gt;
3(14030) DBG:free_faked_req: removing hdr-&gt;parsed 7&lt;br&gt;3(14030) DEBUG: r=
elay_reply: branch=3D0, save=3D0, relay=3D0&lt;br&gt;3(14030)&nbsp;&nbsp;old size=
:<i> 1043, new size: 1013&lt;br&gt;3(14030) build_res_from_sip_res: copied size: ori=
</I>g:1041, new: 1011, rest: 2 msg=3D&lt;br&gt;
&lt;br&gt;&lt;br&gt;BR,&lt;br&gt;Sabyasachi&lt;br&gt;&lt;br&gt;On 1/25/08, Klemens Schragel &lt;&lt;a href=
=3D&quot;mailto:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">klemens.schragel at gmx.at</A>&quot;&gt;<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">klemens.schragel at gmx.at</A>&lt;/a&gt;&gt; wrote:&lt;=
br&gt;&gt; &gt; Hello,&lt;br&gt;&gt; &lt;br&gt;&gt; Hi,&lt;br&gt;&gt; &lt;br&gt;&gt; &gt; I want to do=
 a Register over IPSec but pcscf gives one error like below.&lt;br&gt;
&gt;<i> &gt; ERR:P-CSCF:P_security_relay: we cannot find the contact or its&lt;br=
</I>&gt;&gt;<i> &gt; IPSec/TLS SAs for &lt;1://10.21.21.149:6070&gt;.&lt;br&gt;&gt; &lt;br&gt;&amp;gt=
</I>; I&#39;m not sure if the ERROR message is really a problem.. I think it&amp;#3=
9;s more an information from P-CSCF that there hasn&#39;t been yet a SA est=
ablished for this connection..&lt;br&gt;
&gt;<i> &lt;br&gt;&gt; more interesting is this, here handles the response...&lt;br&gt;&amp;gt=
</I>; &lt;br&gt;&gt;&nbsp;&nbsp;1(8012) build_res_from_sip_res: copied size: orig:104=
0, new: 1010, rest: 2 msg=3D&lt;br&gt;&gt;&nbsp;&nbsp;SIP/2.0 401 Unauthorized - =
Challenging the UE&lt;br&gt;
&gt;<i>&nbsp;&nbsp;Via: SIP/2.0/UDP &lt;a href=3D&quot;<A HREF="http://10.21.21.149:6070">http://10.21.21.149:6070</A>&quot;&gt;10.21=
</I>.21.149:6070&lt;/a&gt;;rport=3D6070;branch=3Dz9hG4bK1201096438817&lt;br&gt;&gt;&nbsp;&amp;n=
bsp;From: &quot;bob&quot; &lt;&lt;a href=3D&quot;mailto:sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">bob at open-ims2.test</A>&quot;&gt;sip=
:<i><A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">bob at open-ims2.test</A>&lt;/a&gt;&gt;;tag=3D1201096438817&lt;br&gt;
</I>&gt;<i>&nbsp;&nbsp;To: &quot;bob&quot; &lt;&lt;a href=3D&quot;mailto:sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">bob at open-ims2</A>=
</I>.test&quot;&gt;sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">bob at open-ims2.test</A>&lt;/a&gt;&gt;;tag=3Dba3c9c9c2e1d2842aad0ac49411acef=
0-c046&lt;br&gt;&gt;&nbsp;&nbsp;Call-ID: &lt;a href=3D&quot;mailto:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">1201096438511 at 10.21.21</A>=
.149&quot;&gt;<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">1201096438511 at 10.21.21.149</A>&lt;/a&gt;&lt;br&gt;
&gt;<i>&nbsp;&nbsp;CSeq: 1 REGISTER&lt;br&gt;&gt;&nbsp;&nbsp;Path: &lt;sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">term at pcsc</A>=
</I>f.open-ims2.test:4060;lr&gt;&lt;br&gt;&gt;&nbsp;&nbsp;Service-Route: &lt;sip:orig=
@scscf.open-ims2.test:6060;lr&gt;&lt;br&gt;&gt;&nbsp;&nbsp;Allow: INVITE, ACK, CA=
NCEL, OPTIONS, BYE, REFER, SUBSCRIBE, NOTIFY, MESSAGE, INFO&lt;br&gt;
&gt;<i>&nbsp;&nbsp;Server: Sip EXpress router (2.1.0-dev1 OpenIMSCore (i386/li=
</I>nux))&lt;br&gt;&gt;&nbsp;&nbsp;Content-Length: 0&lt;br&gt;&gt;&nbsp;&nbsp;Warning: 392 =
&lt;a href=3D&quot;<A HREF="http://10.21.21.147:6060">http://10.21.21.147:6060</A>&quot;&gt;10.21.21.147:6060&lt;/a&gt; &quot;Noisy feed=
back tells:&nbsp;&nbsp;pid=3D6992 req_src_ip=3D&lt;a href=3D&quot;<A HREF="http://10.21.21.1=">http://10.21.21.1=</A>
47&quot;&gt;10.21.21.147&lt;/a&gt; req_src_port=3D5060 in_uri=3Dsip:scscf.open-ims2.test:=
6060 out_uri=3Dsip:scscf.open-ims2.test:6060 via_cnt=3D=3D3&quot;&lt;br&gt;
&gt;<i>&nbsp;&nbsp;WWW-Authenticate: Digest realm=3D&quot;open-ims2.test&quot;=
</I>, nonce=3D&quot;HmlHeaUo1mGzqMxSPx05UoQsop/54wAARBZrISwY0eM=3D&quot;, algor=
ithm=3DAKAv1-MD5&lt;br&gt;&gt;&nbsp;&nbsp;Security-Server: ipsec-3gpp; ealg=3Dnul=
l; alg=3Dhmac-md5-96; spi-c=3D5000; spi-s=3D5001; port-c=3D4063; port-s=3D4=
064; q=3D0.1&lt;br&gt;
&gt;<i> &lt;br&gt;&gt; so far so good... the trace reveals that this is sent to UE. =
</I>as far as I remember the P-CSCF shoudl now start the shell-scripts creating=
 the IPSec SAs, but the next logging just shows:&lt;br&gt;&gt; &lt;br&gt;&gt;&nbsp;&amp;nbs=
p;1(8012) WARNING:vqm_resize: resize(0) called&lt;br&gt;
&gt;<i>&nbsp;&nbsp;1(8012) qm_malloc(0xb5faf000, 1012) called from mem/shm_mem=
</I>.c: _shm_resize(106)&lt;br&gt;&gt;&nbsp;&nbsp;1(8012) qm_malloc(0xb5faf000, 1012)=
 returns address 0xb619b61c frag. 0xb619b604 (size=3D1012) on 1 -th hit&lt;br&gt;=
&gt;<i>&nbsp;&nbsp;1(8012) DEBUG: reply relayed. buf=3D0x8187584: SIP/2.0 401 =
</I>Una..., shmem=3D0xb619b61c: SIP/2.0 4 totag_retr=3D0&lt;br&gt;
&gt;<i>&nbsp;&nbsp;1(8012) qm_free(0x812d580, 0x8187584), called from t_reply.=
</I>c: relay_reply(1420)&lt;br&gt;&gt;&nbsp;&nbsp;1(8012) qm_free: freeing frag. 0x81=
8756c alloc&#39;ed from msg_translator.c: build_res_buf_from_sip_res(1684)&lt;=
br&gt;&gt;&nbsp;&nbsp;1(8012) DEBUG: cleanup_uac_timers: RETR/FR timers reset&lt;=
br&gt;
&gt;<i>&nbsp;&nbsp;1(8012) DEBUG:destroy_avp_list: destroying list (nil)&lt;br&gt;&amp;g=
</I>t;&nbsp;&nbsp;1(8012) DEBUG:destroy_avp_list: destroying list (nil)&lt;br&gt;&gt;=
&nbsp;&nbsp;1(8012) DEBUG:destroy_avp_list: destroying list (nil)&lt;br&gt;&gt;&amp;n=
bsp;&nbsp;1(8012) DEBUG:destroy_avp_list: destroying list (nil)&lt;br&gt;
&gt;<i>&nbsp;&nbsp;1(8012) DEBUG:destroy_avp_list: destroying list (nil)&lt;br&gt;&amp;g=
</I>t;&nbsp;&nbsp;1(8012) DEBUG:destroy_avp_list: destroying list (nil)&lt;br&gt;&gt;=
 &lt;br&gt;&gt; what happens after these strange (at least I don&#39;t know them)=
 &#39;destroy_avp_list&#39; messages?&lt;br&gt;
&gt;<i> &lt;br&gt;&gt; btw: your setkey output isn&#39;t complete...&lt;br&gt;&gt; you hav=
</I>e build the SA for a request from UE =3D&gt; P-CSCF... for this transaction=
 you need at least an additional SA decoding the response, i.e. from P-CSCF=
 =3D&gt; UE...&lt;br&gt;
&gt;<i> &lt;br&gt;&gt; br, Klemens&lt;br&gt;&gt; &lt;br&gt;&gt; &gt;&lt;br&gt;&gt; &gt; Here is my tes=
</I>tbed:::&lt;br&gt;&gt; &gt; I am using Xpresent stack for IPSec at client ip &lt;a hr=
ef=3D&quot;<A HREF="http://10.21.21.149">http://10.21.21.149</A>&quot;&gt;10.21.21.149&lt;/a&gt;&lt;br&gt;&gt; &gt; Open IMS in ip &lt;a =
href=3D&quot;<A HREF="http://10.21.21.147">http://10.21.21.147</A>&quot;&gt;10.21.21.147&lt;/a&gt;&lt;br&gt;
&gt;<i> &gt;&lt;br&gt;&gt; &gt; While sending the first REGISTER it is okay but whil=
</I>e sending the&lt;br&gt;&gt; &gt; encrypted REG over IPSec (esp) it does not handl=
ed by Open IMS. The&lt;br&gt;&gt; &gt; 2nd REG does not reach at pcscf.&lt;br&gt;&gt; &amp;=
gt;&lt;br&gt;
&gt;<i> &gt; Sending the ethereal trace for both client and server, output of&lt;=
</I>br&gt;&gt; &gt; setkey, pcscf logs and pcscf.cfg for your reference.&lt;br&gt;&gt; &amp;=
gt;&lt;br&gt;&gt; &gt; Pl have a look and let me know if i did something wrong.&lt;b=
r&gt;
&gt;<i> &gt;&lt;br&gt;&gt; &gt; Also pl let me know how to handle logging info for s=
</I>ervers like&lt;br&gt;&gt; &gt; p/s/icscf. Like suppose i want to dump the logs on=
ly for DEBUG and ERR&lt;br&gt;&gt; &gt; what should be the log level in cfg files=
.&lt;br&gt;
&gt;<i> &gt;&lt;br&gt;&gt; &gt; Regards,&lt;br&gt;&gt; &gt; Sabyasachi&lt;br&gt;&gt; &gt;&lt;br&gt;&amp;gt=
</I>; &gt;&lt;br&gt;&gt; &gt;&lt;br&gt;&gt; &gt; On 1/24/08, Klemens Schragel &lt;&lt;a href=
=3D&quot;mailto:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">klemens.schragel at gmx.at</A>&quot;&gt;<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">klemens.schragel at gmx.at</A>&lt;/a&gt;&gt; wrote:&lt;=
br&gt;
&gt;<i> &gt; &gt; Hi,&lt;br&gt;&gt; &gt; &gt;&lt;br&gt;&gt; &gt; &gt; try&lt;br&gt;&gt; &gt; &amp;gt=
</I>;&lt;br&gt;&gt; &gt; &gt; setkey -c &lt;&lt; EOF&lt;br&gt;&gt; &gt; &gt; spdadd &lt;a href=
=3D&quot;<A HREF="http://192.168.0.7/32[5060">http://192.168.0.7/32[5060</A>]&quot;&gt;192.168.0.7/32[5060]&lt;/a&gt; &lt;a href=3D&quot;http:/=
/192.168.0.5/32[5060]&quot;&gt;192.168.0.5/32[5060]&lt;/a&gt; tcp -P out ipsec&lt;br&gt;
&gt;<i> &gt; esp/transport//unique:1 ;&lt;br&gt;&gt; &gt; &gt; EOF&lt;br&gt;&gt; &gt; &gt;=
</I>&lt;br&gt;&gt; &gt; &gt; then setkey -DP should response:&lt;br&gt;&gt; &gt; &gt;&lt;br&gt;&amp;g=
t; &gt; &gt; 192.168.0.7[5060] 192.168.0.5[5060] tcp&lt;br&gt;&gt; &gt; &gt;&amp;nbsp=
;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;out prio def ipsec&lt;br&gt;
&gt;<i> &gt; &gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;esp/transport=
</I>//unique:1&lt;br&gt;&gt; &gt; &gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;nbsp=
;created: Jan 24 06:43:35 2008&nbsp;&nbsp;lastused:&lt;br&gt;&gt; &gt; &gt;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;lifetime: 0(s) validtime: 0(s)&lt;br=
&gt;&gt;<i> &gt; &gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;spid=3D1 seq=
</I>=3D0 pid=3D2041&lt;br&gt;&gt; &gt; &gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;refcnt=3D1&lt;br&gt;
&gt;<i> &gt; &gt;&lt;br&gt;&gt; &gt; &gt; br, Klemens&lt;br&gt;&gt; &gt; &gt;&lt;br&gt;&gt; &gt;=
</I> &gt; -----Original Message-----&lt;br&gt;&gt; &gt; &gt; From: Sabyasachi Samal [=
mailto:&lt;a href=3D&quot;mailto:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">sabyasachisamal at gmail.com</A>&quot;&gt;<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">sabyasachisamal at gmail.c</A>=
om&lt;/a&gt;]&lt;br&gt;
&gt;<i> &gt; &gt; Sent: Mittwoch, 23. J=E4nner 2008 16:51&lt;br&gt;&gt; &gt; &gt; To=
</I>:<i> Klemens Schragel&lt;br&gt;&gt; &gt; &gt; Subject: Re: How to test IPSec in Open=
</I> IMS&lt;br&gt;&gt; &gt; &gt;&lt;br&gt;&gt; &gt; &gt; Hey,&lt;br&gt;&gt; &gt; &gt;&lt;br&gt;&gt; &amp;gt=
; &gt; I have already tried setkey -DP command but it is showing No SPD&lt;br&gt;
&gt;<i> &gt; entries.&lt;br&gt;&gt; &gt; &gt;&lt;br&gt;&gt; &gt; &gt; Can you pl give one =
</I>sample command to add one entry and how to dump&lt;br&gt;&gt; &gt; that.&lt;br&gt;&gt; =
&gt;<i> &gt;&lt;br&gt;&gt; &gt; &gt; I think there is some problem in the installati=
</I>on.&lt;br&gt;
&gt;<i> &gt; &gt;&lt;br&gt;&gt; &gt; &gt; after installing the ipsec-tools in my /et=
</I>c there is no ipsec.conf and&lt;br&gt;&gt; &gt; &gt; /etc/init.d there is no ipse=
c to start.&lt;br&gt;&gt; &gt; &gt;&lt;br&gt;&gt; &gt; &gt; BR,&lt;br&gt;&gt; &gt; &gt; Sabya=
sachi&lt;br&gt;
&gt;<i> &gt; &gt;&lt;br&gt;&gt; &gt; &gt; On 1/23/08, Klemens Schragel &lt;&lt;a href=
</I>=3D&quot;mailto:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">klemens.schragel at gmx.at</A>&quot;&gt;<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">klemens.schragel at gmx.at</A>&lt;/a&gt;&gt; wrote:&lt;=
br&gt;&gt; &gt; &gt; &gt; Yes, actually this command should show the DB entrie=
s...&lt;br&gt;
&gt;<i> &gt; &gt; &gt;&lt;br&gt;&gt; &gt; &gt; &gt; Although I don&#39;t understand =
</I>why you start setkey with a end of file&lt;br&gt;&gt; &gt; &gt; entry...&lt;br&gt;&gt; =
&gt;<i> &gt; [Hide Quoted Text]&lt;br&gt;&gt; &gt; &gt; &gt; I think you&#39;ll need=
</I> the EOF also after adding spddump...&lt;br&gt;
&gt;<i> &gt; &gt; &gt;&lt;br&gt;&gt; &gt; &gt; &gt; But also for the dump you can st=
</I>art directly from the command line&lt;br&gt;&gt; &gt; with&lt;br&gt;&gt; &gt; &gt; &gt;=
 setkey -DP&lt;br&gt;&gt; &gt; &gt; &gt;&lt;br&gt;&gt; &gt; &gt; &gt; br&lt;br&gt;&gt; &gt; &amp;=
gt; &gt;&lt;br&gt;
&gt;<i> &gt; &gt; &gt; &gt; -----Original Message-----&lt;br&gt;&gt; &gt; &gt; &gt; =
</I>&gt;<i> From: Sabyasachi Samal [mailto:&lt;a href=3D&quot;mailto:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">sabyasachisamal at gmail</A>=
</I>.com&quot;&gt;<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">sabyasachisamal at gmail.com</A>&lt;/a&gt;]&lt;br&gt;&gt; &gt; &gt; &gt; &gt; Sent: Mitt=
woch, 23. J=E4nner 2008 16:27&lt;br&gt;
&gt;<i> &gt; &gt; &gt; &gt; To: Klemens Schragel&lt;br&gt;&gt; &gt; &gt; &gt; &gt; S=
</I>ubject: Re: How to test IPSec in Open IMS&lt;br&gt;&gt; &gt; &gt; &gt; &gt;&lt;br&gt;&amp;g=
t; &gt; &gt; &gt; &gt; Thanks, Now it is not showing any error. but while a=
dding a spd&lt;br&gt;
&gt;<i> &gt; using&lt;br&gt;&gt; &gt; &gt; &gt; &gt; below commad, i think it is not=
</I> storing the data.&lt;br&gt;&gt; &gt; &gt; &gt; &gt;&lt;br&gt;&gt; &gt; &gt; &gt; &gt; =
# setkey -c &lt;&lt; EOF&lt;br&gt;&gt; &gt; &gt; &gt; &gt; &gt; spdadd &lt;a href=3D=
&quot;<A HREF="http://10.21.21.147">http://10.21.21.147</A>&quot;&gt;10.21.21.147&lt;/a&gt; &lt;a href=3D&quot;<A HREF="http://10.21.21.149">http://10.21.21.149</A>&quot;&gt;10.2=
1.21.149&lt;/a&gt; any -P out ipsec&lt;br&gt;
&gt;<i> &gt; &gt; &gt; &gt; &gt;EOF&lt;br&gt;&gt; &gt; &gt; &gt; &gt;&lt;br&gt;&gt; &gt; &amp;=
</I>gt; &gt; &gt; then i am using setkey -c &lt;&lt; spddump to show those valu=
e. It is not&lt;br&gt;&gt; &gt; &gt; &gt; &gt; showing anything.&lt;br&gt;&gt; &gt; &amp;gt=
; &gt; &gt;&lt;br&gt;
&gt;<i> &gt; &gt; &gt; &gt; Is there any database ipsec stores the data?&lt;br&gt;&amp;g=
</I>t; &gt; &gt; &gt; &gt;&lt;br&gt;&gt; &gt; &gt; &gt; &gt; Regards,&lt;br&gt;&gt; &gt; &amp;g=
t; &gt; &gt; Sabyasachi&lt;br&gt;&gt; &gt; &gt; &gt; &gt;&lt;br&gt;&gt; &gt; &gt; &gt; =
&gt;<i> On 1/23/08, Klemens Schragel &lt;&lt;a href=3D&quot;mailto:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">klemens.schragel at gm</A>=
</I>x.at&quot;&gt;<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">klemens.schragel at gmx.at</A>&lt;/a&gt;&gt; wrote:&lt;br&gt;
&gt;<i> &gt; &gt; &gt; &gt; &gt; Hi Sabyasachi,&lt;br&gt;&gt; &gt; &gt; &gt; &gt; &amp;g=
</I>t;&lt;br&gt;&gt; &gt; &gt; &gt; &gt; &gt; Try it with &quot;setkey -c &lt;&lt; sp=
dflush&quot;&lt;br&gt;&gt; &gt; &gt; &gt; &gt; &gt; And you can have the same eff=
ect by just entering setkey -FP (see&lt;br&gt;
&gt;<i> &gt; also&lt;br&gt;&gt; &gt; &gt; &gt; &gt; &gt; man-pages of setkey)&lt;br&gt;&amp;gt=
</I>; &gt; &gt; &gt; &gt; &gt;&lt;br&gt;&gt; &gt; &gt; &gt; &gt; &gt; br&lt;br&gt;&gt; &gt;=
 &gt; &gt; &gt; &gt;&lt;br&gt;&gt; &gt; &gt; &gt; &gt; &gt; &gt; -----Original Me=
ssage-----&lt;br&gt;
&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; From: Sabyasachi Samal [mailto:&lt;a href=
</I>=3D&quot;mailto:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">sabyasachisamal at gmail.com</A>&quot;&gt;<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">sabyasachisamal at gmail.com</A>&lt;/a&gt;]&lt;br&gt;&amp;gt=
; &gt; &gt; &gt; &gt; &gt; &gt; Sent: Mittwoch, 23. J=E4nner 2008 15:54&lt;br&gt;=
&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; To: Klemens Schragel&lt;br&gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; Subject: Re: How to test IPSec in Open I=
</I>MS&lt;br&gt;&gt; &gt; &gt; &gt; &gt; &gt; &gt;&lt;br&gt;&gt; &gt; &gt; &gt; &gt; &gt; &amp;=
gt; Hello Klemens,&lt;br&gt;&gt; &gt; &gt; &gt; &gt; &gt; &gt;&lt;br&gt;&gt; &gt; &gt; =
&gt;<i> &gt; &gt; &gt; I am using # setkey -c spdflush the output is setkey: s=
</I>pdflush:&lt;br&gt;
&gt;<i> &gt; no&lt;br&gt;&gt; &gt; &gt; &gt; &gt; &gt; &gt; such file or directory.&lt;=
</I>br&gt;&gt; &gt; &gt; &gt; &gt; &gt; &gt;&lt;br&gt;&gt; &gt; &gt; &gt; &gt; &gt; &gt;=
 Pl let me know how to overcome this.&lt;br&gt;&gt; &gt; &gt; &gt; &gt; &gt; &gt;=
&lt;br&gt;
&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; Regards,&lt;br&gt;&gt; &gt; &gt; &gt; &gt; &amp;gt=
</I>; &gt; Sabyasachi&lt;br&gt;&gt; &gt; &gt; &gt; &gt; &gt; &gt;&lt;br&gt;&gt; &gt; &gt; &amp;=
gt; &gt; &gt; &gt; On 1/23/08, Klemens Schragel &lt;&lt;a href=3D&quot;mailto:kleme=
<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">ns.schragel at gmx.at</A>&quot;&gt;<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">klemens.schragel at gmx.at</A>&lt;/a&gt;&gt; wrote:&lt;br&gt;
&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; Hi Sabyasachi,&lt;br&gt;&gt; &gt; &gt; &amp;g=
</I>t; &gt; &gt; &gt; &gt;&lt;br&gt;&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; Could you=
 send me the whole command you entered with output?&lt;br&gt;&gt; &gt; &gt; &gt; =
&gt;<i> &gt; &gt; &gt;&lt;br&gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; First: as far as I know its spdadd =
</I>=3D&gt; security policy database&lt;br&gt;&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt;=
 Second: the way you describe it sounds like you entered the&lt;br&gt;&gt; &gt; &amp;=
gt; command&lt;br&gt;
&gt;<i> &gt; &gt; [Hide Quoted Text]&lt;br&gt;&gt; &gt; &gt; &gt; &gt; &gt; &gt; dir=
</I>ect&lt;br&gt;&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; in your shell.. but sdpadd i=
s a command of setkey so you fist&lt;br&gt;&gt; &gt; have&lt;br&gt;&gt; &gt; &gt; &gt; =
&gt;<i> to&lt;br&gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; start&lt;br&gt;&gt; &gt; &gt; &gt; &gt; &gt; &amp;=
</I>gt; &gt; setkey...&lt;br&gt;&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt;&lt;br&gt;&gt; &gt; =
&gt;<i> &gt; &gt; &gt; &gt; &gt; br, Klemens&lt;br&gt;&gt; &gt; &gt; &gt; &gt; &gt; =
</I>&gt;<i> &gt;&lt;br&gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; -----Original Message-----&lt;br&gt;=
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; From: Sabyasachi Samal [mailto=
</I>:<i>&lt;a href=3D&quot;mailto:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">sabyasachisamal at gmail.com</A>&quot;&gt;<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">sabyasachisamal at gmail.com</A>&lt;/a&gt;=
</I>]&lt;br&gt;
&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; Sent: Mittwoch, 23. J=E4nner 2=
</I>008 13:53&lt;br&gt;&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; To: Dragos Vingar=
zan&lt;br&gt;&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; Cc: Klemens Schragel; &lt;=
a href=3D&quot;mailto:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">openimscore-users at lists.berlios.de</A>&quot;&gt;<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">openimscore-users at list</A>=
s.berlios.de&lt;/a&gt;&lt;br&gt;
&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; Subject: How to test IPSec in =
</I>Open IMS&lt;br&gt;&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt;&lt;br&gt;&gt; &gt; &gt; =
&gt;<i> &gt; &gt; &gt; &gt; &gt; Hello Guys,&lt;br&gt;&gt; &gt; &gt; &gt; &gt; &gt; =
</I>&gt;<i> &gt; &gt;&lt;br&gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; I am having problem while test=
</I>ing the stuffs using IPSec. I&lt;br&gt;&gt; &gt; am&lt;br&gt;&gt; &gt; &gt; &gt; &gt; u=
sing&lt;br&gt;&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; 2.6.9-22.ELsmp kernel =
and install ipsec-tools 0.6.7. But&lt;br&gt;
&gt;<i> &gt; while i&lt;br&gt;&gt; &gt; &gt; &gt; &gt; am&lt;br&gt;&gt; &gt; &gt; &gt; &amp;gt=
</I>; &gt; &gt; &gt; &gt; using &quot;sdpadd&quot; it is showing command not fo=
und.&lt;br&gt;&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt;&lt;br&gt;&gt; &gt; &gt; &gt;=
 &gt; &gt; &gt; &gt; &gt; So can you pl help me how to over come this issue=
. For this&lt;br&gt;
&gt;<i> &gt; the&lt;br&gt;&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; scripts relat=
</I>ed to ipsec inside /ser_ims/modules/pcscf did&lt;br&gt;&gt; &gt; not&lt;br&gt;&gt; &gt;=
 &gt; &gt; &gt; work.&lt;br&gt;&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt;&lt;br&gt;
&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; whether i need some extra modu=
</I>le for the same, pl advise&lt;br&gt;&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt;&lt;=
br&gt;&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; Regards,&lt;br&gt;&gt; &gt; &gt; =
&gt;<i> &gt; &gt; &gt; &gt; &gt; Sabyasachi&lt;br&gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt;&lt;br&gt;&gt; &gt; &gt; &gt; &gt; &gt; &amp;g=
</I>t; &gt;&lt;br&gt;&gt; &gt; &gt; &gt; &gt; &gt;&lt;br&gt;&gt; &gt; &gt; &gt; &gt; &gt;&lt;b=
r&gt;&gt; &gt; &gt; &gt;&lt;br&gt;&gt; &gt; &gt; &gt;&lt;br&gt;&gt; &gt; &gt;&lt;br&gt;&gt; &gt;=
 &gt; --&lt;br&gt;
&gt;<i> &gt; &gt; GMX FreeMail: 1 GB Postfach, 5 E-Mail-Adressen, 10 Free SMS.=
</I>&lt;br&gt;&gt; &gt; &gt; Alle Infos und kostenlose Anmeldung: &lt;a href=3D&quot;<A HREF="http://w=">http://w=</A>
ww.gmx.net/de/go/freemail&quot;&gt;<A HREF="http://www.gmx.net/de/go/freemail&lt;/a">http://www.gmx.net/de/go/freemail&lt;/a</A>&gt;&lt;br&gt;&gt; &amp;g=
t; &gt;&lt;br&gt;
&gt;<i> &lt;br&gt;&gt; --&lt;br&gt;&gt; Ist Ihr Browser Vista-kompatibel? Jetzt die neuest=
</I>en&lt;br&gt;&gt; Browser-Versionen downloaden: &lt;a href=3D&quot;<A HREF="http://www.gmx.net/de/g=">http://www.gmx.net/de/g=</A>
o/browser&quot;&gt;<A HREF="http://www.gmx.net/de/go/browser&lt;/a">http://www.gmx.net/de/go/browser&lt;/a</A>&gt;&lt;br&gt;&gt; &lt;br&gt;

------=_Part_131_3248084.1201260838904--

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003172.html">No subject
</A></li>
	<LI>Next message: <A HREF="003256.html">No subject
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3249">[ date ]</a>
              <a href="thread.html#3249">[ thread ]</a>
              <a href="subject.html#3249">[ subject ]</a>
              <a href="author.html#3249">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/openimscore-users">More information about the OpenIMSCore-Users
mailing list</a><br>
</body></html>
