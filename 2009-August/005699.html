<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [OpenIMSCore-Users] Basic outgoing call issue when test client	isbehind NAT
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/openimscore-users/2009-August/index.html" >
   <LINK REL="made" HREF="mailto:openimscore-users%40lists.berlios.de?Subject=Re%3A%20%5BOpenIMSCore-Users%5D%20Basic%20outgoing%20call%20issue%20when%20test%20client%0A%09isbehind%20NAT&In-Reply-To=%3CB7803DC652E2F9458758AEBB6A5FD60F0608788E%40ZMY16EXM67.ds.mot.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="005697.html">
   <LINK REL="Next"  HREF="005673.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[OpenIMSCore-Users] Basic outgoing call issue when test client	isbehind NAT</H1>
    <B>Venkatesh Arun-A21466</B> 
    <A HREF="mailto:openimscore-users%40lists.berlios.de?Subject=Re%3A%20%5BOpenIMSCore-Users%5D%20Basic%20outgoing%20call%20issue%20when%20test%20client%0A%09isbehind%20NAT&In-Reply-To=%3CB7803DC652E2F9458758AEBB6A5FD60F0608788E%40ZMY16EXM67.ds.mot.com%3E"
       TITLE="[OpenIMSCore-Users] Basic outgoing call issue when test client	isbehind NAT">arunm at motorola.com
       </A><BR>
    <I>Thu Aug 13 20:48:48 CEST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="005697.html">[OpenIMSCore-Users] Basic outgoing call issue when test client isbehind NAT
</A></li>
        <LI>Next message: <A HREF="005673.html">[OpenIMSCore-Users] Connection with mobicents presence server
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5699">[ date ]</a>
              <a href="thread.html#5699">[ thread ]</a>
              <a href="subject.html#5699">[ subject ]</a>
              <a href="author.html#5699">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
Thanks that helps..


So Open IMS core works even for the media ports (or ports conveyed in
SDP message) when behind NAT..Is that correct?? I assume there is no
need to do NAT traversal procedures  for media ports as well..rith??

I see some configuation in pcscf.cfg as follows...but I have an
difficulty in understanding the same for the case of media nat
traversal.

modparam(&quot;pcscf&quot;,&quot;NAT_enable&quot;,1) &lt;---???
modparam(&quot;pcscf&quot;,&quot;ping&quot;,1)
modparam(&quot;pcscf&quot;,&quot;ping_all&quot;,0)
modparam(&quot;pcscf&quot;,&quot;nat_detection_type&quot;, 0x17) &lt;---??
modparam(&quot;pcscf&quot;,&quot;rtpproxy_socket&quot;, &quot;udp:10.232.15.41:34999&quot;) &lt;---??
modparam(&quot;pcscf&quot;,&quot;rtpproxy_enable&quot;, 1) &lt;---??
modparam(&quot;pcscf&quot;,&quot;rtpproxy_disable_tout&quot;, 60) &lt;---??
modparam(&quot;pcscf&quot;,&quot;rtpproxy_retr&quot;, 5) &lt;----???
modparam(&quot;pcscf&quot;,&quot;rtpproxy_tout&quot;, 1) &lt;---??

Can u pls let me understand wat each setting means and how it can be
used? I couldn't able to find much info on this over net..it would be
helpful if anyone give some overview on the same and how it can be used
to let the call complete 


Regards
arun









&gt;<i> -----Original Message-----
</I>&gt;<i> From: Dragos Vingarzan [mailto:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">Dragos.Vingarzan at fokus.fraunhofer.de</A>] 
</I>&gt;<i> Sent: Thursday, August 13, 2009 9:14 PM
</I>&gt;<i> To: Venkatesh Arun-A21466
</I>&gt;<i> Cc: Franz Edler; <A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">openimscore-users at lists.berlios.de</A>; T 
</I>&gt;<i> Satyanarayana-A12694
</I>&gt;<i> Subject: Re: [OpenIMSCore-Users] Basic outgoing call issue 
</I>&gt;<i> when test client isbehind NAT
</I>&gt;<i> 
</I>&gt;<i> I meant exactly that.
</I>&gt;<i> 
</I>&gt;<i> And... if you have a NAT and it works with just the Open IMS 
</I>&gt;<i> Core, what problem are you trying to solve with STUN then? ;o)
</I>&gt;<i> 
</I>&gt;<i> Anyway, in IMS, all your inbound calls have to go through 
</I>&gt;<i> your client's P-CSCF, so having a public IP on the client 
</I>&gt;<i> does not actually matter, as an IMS client should only accept 
</I>&gt;<i> signaling from the P-CSCF.
</I>&gt;<i> 
</I>&gt;<i> Cheers,
</I>&gt;<i> -Dragos
</I>&gt;<i> 
</I>&gt;<i> Venkatesh Arun-A21466 wrote:
</I>&gt;<i> &gt; Dragos,
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; With NAT solution provided with P-CSCF (STUN server not 
</I>&gt;<i> used, so only 
</I>&gt;<i> &gt; local addresses placed in Contact), things work.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; When I use STUN server (and hence place public addresses in 
</I>&gt;<i> Contact) 
</I>&gt;<i> &gt; things don't work.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Are you saying that P-CSCF (with NAT solution) and STUN 
</I>&gt;<i> server combo 
</I>&gt;<i> &gt; doesn't work? If yes, is it because P-CSCF tries to match address in
</I>&gt;<i> &gt; Via: (of INVITE) with address in Contact (of INVITE).
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Regards
</I>&gt;<i> &gt; Arun
</I>&gt;<i> &gt;  
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;   
</I>&gt;<i> &gt;&gt; -----Original Message-----
</I>&gt;<i> &gt;&gt; From: Dragos Vingarzan 
</I>&gt;<i> [mailto:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">Dragos.Vingarzan at fokus.fraunhofer.de</A>]
</I>&gt;<i> &gt;&gt; Sent: Thursday, August 13, 2009 1:32 PM
</I>&gt;<i> &gt;&gt; To: Venkatesh Arun-A21466
</I>&gt;<i> &gt;&gt; Cc: Franz Edler; <A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">openimscore-users at lists.berlios.de</A>
</I>&gt;<i> &gt;&gt; Subject: Re: [OpenIMSCore-Users] Basic outgoing call issue 
</I>&gt;<i> when test 
</I>&gt;<i> &gt;&gt; client isbehind NAT
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; Indeed. The P-CSCF implements the NAT mechanisms also to avoid 
</I>&gt;<i> &gt;&gt; situations like this. You are registering the 10.x.x.x contact and 
</I>&gt;<i> &gt;&gt; then try to send an INVITE from 192.168.x.x. The P-CSCF 
</I>&gt;<i> rejects the 
</I>&gt;<i> &gt;&gt; call because only the registered contact for that identity 
</I>&gt;<i> is allowed 
</I>&gt;<i> &gt;&gt; to originate signaling with that originating identity.
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; Cheers,
</I>&gt;<i> &gt;&gt; -Dragos
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; Franz Edler wrote:
</I>&gt;<i> &gt;&gt;     
</I>&gt;<i> &gt;&gt;&gt; Hi Arun,
</I>&gt;<i> &gt;&gt;&gt;  
</I>&gt;<i> &gt;&gt;&gt;   
</I>&gt;<i> &gt;&gt;&gt;       
</I>&gt;<i> &gt;&gt;&gt;&gt; Setup 1 (NAT setup):
</I>&gt;<i> &gt;&gt;&gt;&gt; 		  	   |
</I>&gt;<i> &gt;&gt;&gt;&gt; |
</I>&gt;<i> &gt;&gt;&gt;&gt; SIP ClientA &lt;-------&gt;|&lt;----------- 
</I>&gt;<i> OpenImsCore-----------&gt;|&lt;-----&gt; 
</I>&gt;<i> &gt;&gt;&gt;&gt; SIP ClientB
</I>&gt;<i> &gt;&gt;&gt;&gt; 			   |&lt;----------- STUN Server-----------&gt;|
</I>&gt;<i> &gt;&gt;&gt;&gt;                     NAT                                  NAT
</I>&gt;<i> &gt;&gt;&gt;&gt;     
</I>&gt;<i> &gt;&gt;&gt;&gt;         
</I>&gt;<i> &gt;&gt;&gt; Why do you not use the NAT solution provided with P-CSCF?
</I>&gt;<i> &gt;&gt;&gt; You just have to add rtpproxy and enable NAT handling in 
</I>&gt;<i> pcscf.cfg.
</I>&gt;<i> &gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt; Best regards
</I>&gt;<i> &gt;&gt;&gt; Franz
</I>&gt;<i> &gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt; _______________________________________________
</I>&gt;<i> &gt;&gt;&gt; OpenIMSCore-Users mailing list
</I>&gt;<i> &gt;&gt;&gt; <A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">OpenIMSCore-Users at lists.berlios.de</A>
</I>&gt;<i> &gt;&gt;&gt; <A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">https://lists.berlios.de/mailman/listinfo/openimscore-users</A>
</I>&gt;<i> &gt;&gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;   
</I>&gt;<i> &gt;&gt;&gt;       
</I>&gt;<i> &gt;&gt; --
</I>&gt;<i> &gt;&gt; -----------------------------------------
</I>&gt;<i> &gt;&gt; Dipl. Eng. Dragos Vingarzan
</I>&gt;<i> &gt;&gt; Fraunhofer FOKUS/NGNI
</I>&gt;<i> &gt;&gt; Kaiserin-Augusta-Allee 31
</I>&gt;<i> &gt;&gt; 10589 Berlin,Germany
</I>&gt;<i> &gt;&gt; Phone +49 (0)30 - 3463 - 7385
</I>&gt;<i> &gt;&gt; Mobile +49 (0)176 - 48 32 16 00
</I>&gt;<i> &gt;&gt; Web www.fokus.fraunhofer.de www.openimscore.org We could 
</I>&gt;<i> change the 
</I>&gt;<i> &gt;&gt; world if God would give us the source code...
</I>&gt;<i> &gt;&gt; -----------------------------------------------------------------
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;     
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;   
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> --
</I>&gt;<i> -----------------------------------------
</I>&gt;<i> Dipl. Eng. Dragos Vingarzan
</I>&gt;<i> Fraunhofer FOKUS/NGNI
</I>&gt;<i> Kaiserin-Augusta-Allee 31
</I>&gt;<i> 10589 Berlin,Germany
</I>&gt;<i> Phone +49 (0)30 - 3463 - 7385
</I>&gt;<i> Mobile +49 (0)176 - 48 32 16 00
</I>&gt;<i> Web www.fokus.fraunhofer.de www.openimscore.org We could 
</I>&gt;<i> change the world if God would give us the source code...
</I>&gt;<i> -----------------------------------------------------------------
</I>&gt;<i> 
</I>&gt;<i> 
</I>
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="005697.html">[OpenIMSCore-Users] Basic outgoing call issue when test client isbehind NAT
</A></li>
	<LI>Next message: <A HREF="005673.html">[OpenIMSCore-Users] Connection with mobicents presence server
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5699">[ date ]</a>
              <a href="thread.html#5699">[ thread ]</a>
              <a href="subject.html#5699">[ subject ]</a>
              <a href="author.html#5699">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/openimscore-users">More information about the OpenIMSCore-Users
mailing list</a><br>
</body></html>
