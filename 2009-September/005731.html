<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [OpenIMSCore-Users] Transport Param &amp; Secured Port in P-CSCF's	Record-Route
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/openimscore-users/2009-September/index.html" >
   <LINK REL="made" HREF="mailto:openimscore-users%40lists.berlios.de?Subject=Re%3A%20%5BOpenIMSCore-Users%5D%20Transport%20Param%20%26%20Secured%20Port%20in%20P-CSCF%27s%0A%09Record-Route&In-Reply-To=%3C116501ca2e2b%249d2c2d70%24ca0710ac%40globaledgesoft.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="005730.html">
   <LINK REL="Next"  HREF="005732.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[OpenIMSCore-Users] Transport Param &amp; Secured Port in P-CSCF's	Record-Route</H1>
    <B>Guhan P</B> 
    <A HREF="mailto:openimscore-users%40lists.berlios.de?Subject=Re%3A%20%5BOpenIMSCore-Users%5D%20Transport%20Param%20%26%20Secured%20Port%20in%20P-CSCF%27s%0A%09Record-Route&In-Reply-To=%3C116501ca2e2b%249d2c2d70%24ca0710ac%40globaledgesoft.com%3E"
       TITLE="[OpenIMSCore-Users] Transport Param &amp; Secured Port in P-CSCF's	Record-Route">guhan.p at globaledgesoft.com
       </A><BR>
    <I>Sat Sep  5 15:20:18 CEST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="005730.html">[OpenIMSCore-Users] error when running sipP
</A></li>
        <LI>Next message: <A HREF="005732.html">[OpenIMSCore-Users] Transport Param &amp; Secured Port in P-CSCF's	Record-Route
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5731">[ date ]</a>
              <a href="thread.html#5731">[ thread ]</a>
              <a href="subject.html#5731">[ subject ]</a>
              <a href="author.html#5731">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi All,

We observe that P-CSCF does not add Transport Param(UDP / TCP/ TLS) and secured port(incase of TLS) in its Record-Route while sending 183 or 2XX (for INVITE) response.By default it is UDP.
Please help us to solve below mentioned issues.

Scenario 1 : TLS
Objective: Registration and corresponding Call &amp; Subscription should happen only in TLS mode.

i. Users 'Alice' registers with OpenIMSCore in TLS mode. 'Bob' registers with OpenIMSCore server in UDP.
ii. Alice Invites 'Bob'.
'INVITE'  is sent with Route Header built using &quot;Service-Route:&quot; Header of 200 OK response received for REGISTER
and Entry of Outbound proxy with transport URI Parameter as &quot;TLS&quot;.
    i.e  Route: &lt;sip:pcscf.open-ims.test:4061;lr;transport=TLS&gt;,&lt;sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">orig at scscf.open-ims.test</A>:6060;lr&gt;
iii. Bob accepted the call.
iv. P-CSCF did not add secured port(4061) and transport type(TLS) in Record-Route(200 OK).

Record-Route: &lt;sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">mt at pcscf.open-ims.test</A>:4060;lr&gt;,&lt;sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">mt at scscf.open-ims.test</A>:6060;lr&gt;,&lt;sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">mo at scscf.open-ims.test</A>:6060;lr&gt;,&lt;sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">mo at pcscf.open-ims.test</A>:4060;lr&gt;

Is it the expected behavior from P-CSCF? 
Should ACK &amp; inside dialog requests follow Record Route(received in 200 OK) even though INVITE was secured(TLS)?

Scenario 2 : TCP
Objective: Registration and corresponding Call &amp; Subscription should happen only in TCP mode.

i. Users 'Alice' and 'Bob' registered with OpenIMSCore server in TCP.
ii. Alice Invites 'Bob'.
'INVITE'  is sent with Route Header built using &quot;Service-Route:&quot; Header of 200 OK response received for REGISTER
and Entry of Outbound proxy with transport URI Parameter as &quot;TCP&quot;.
iii. Bob accepted the call.
But P-CSCF did not mention the transport type 'TCP' in Record-Route (URI parameter) of  200 OK response for INVITE,
iv.ACK is sent in UDP, since it uses the first entry of 'Record-Route' present in 200 OK response for INVITE

Please find the attached message flow document(RecordRoute_MessageFlow.txt) for your reference.

Is there any configuration, so that P-CSCF adds its Record-Route Header with Transport parameter in URI.

Regards,
Guhan
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="https://lists.berlios.de/pipermail/openimscore-users/attachments/20090905/f6af43c5/attachment.html">https://lists.berlios.de/pipermail/openimscore-users/attachments/20090905/f6af43c5/attachment.html</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="005730.html">[OpenIMSCore-Users] error when running sipP
</A></li>
	<LI>Next message: <A HREF="005732.html">[OpenIMSCore-Users] Transport Param &amp; Secured Port in P-CSCF's	Record-Route
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5731">[ date ]</a>
              <a href="thread.html#5731">[ thread ]</a>
              <a href="subject.html#5731">[ subject ]</a>
              <a href="author.html#5731">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/openimscore-users">More information about the OpenIMSCore-Users
mailing list</a><br>
</body></html>
