<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [OpenIMSCore-Users]  error when running sipP
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/openimscore-users/2009-September/index.html" >
   <LINK REL="made" HREF="mailto:openimscore-users%40lists.berlios.de?Subject=Re%3A%20%5BOpenIMSCore-Users%5D%20%20error%20when%20running%20sipP&In-Reply-To=%3Cc4be5e9e0909020328x46f76d65mf3632c669f392c79%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="005723.html">
   <LINK REL="Next"  HREF="005725.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[OpenIMSCore-Users]  error when running sipP</H1>
    <B>Alejandro Araujo Rajzner</B> 
    <A HREF="mailto:openimscore-users%40lists.berlios.de?Subject=Re%3A%20%5BOpenIMSCore-Users%5D%20%20error%20when%20running%20sipP&In-Reply-To=%3Cc4be5e9e0909020328x46f76d65mf3632c669f392c79%40mail.gmail.com%3E"
       TITLE="[OpenIMSCore-Users]  error when running sipP">aalejandroaraujo at gmail.com
       </A><BR>
    <I>Wed Sep  2 12:28:41 CEST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="005723.html">[OpenIMSCore-Users] error when running sipP
</A></li>
        <LI>Next message: <A HREF="005725.html">[OpenIMSCore-Users] Secure SIP support in OpenIMS
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5724">[ date ]</a>
              <a href="thread.html#5724">[ thread ]</a>
              <a href="subject.html#5724">[ subject ]</a>
              <a href="author.html#5724">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello agung nugroho,
Have you checked sipp doc before starting your tests?

Try with <A HREF="http://sipp.sourceforge.net/doc/reference.html#SIP+authentication">http://sipp.sourceforge.net/doc/reference.html#SIP+authentication</A>

There you can see an example of SIP authentication using SIPp.

&lt;<A HREF="http://sipp.sourceforge.net/doc/reference.html#SIP+authentication">http://sipp.sourceforge.net/doc/reference.html#SIP+authentication</A>&gt;Regs.

Alejandro.

2009/9/2 &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">openimscore-users-request at lists.berlios.de</A>&gt;

&gt;<i> Send OpenIMSCore-Users mailing list submissions to
</I>&gt;<i>        <A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">openimscore-users at lists.berlios.de</A>
</I>&gt;<i>
</I>&gt;<i> To subscribe or unsubscribe via the World Wide Web, visit
</I>&gt;<i>        <A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">https://lists.berlios.de/mailman/listinfo/openimscore-users</A>
</I>&gt;<i> or, via email, send a message with subject or body 'help' to
</I>&gt;<i>        <A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">openimscore-users-request at lists.berlios.de</A>
</I>&gt;<i>
</I>&gt;<i> You can reach the person managing the list at
</I>&gt;<i>        <A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">openimscore-users-owner at lists.berlios.de</A>
</I>&gt;<i>
</I>&gt;<i> When replying, please edit your Subject line so it is more specific
</I>&gt;<i> than &quot;Re: Contents of OpenIMSCore-Users digest...&quot;
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Today's Topics:
</I>&gt;<i>
</I>&gt;<i>   1. Re: P-CSCF got segfault while Forwarding INVITE received in
</I>&gt;<i>      TLS. (prashanth.me)
</I>&gt;<i>   2. error when running sipP (agung nugroho)
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> ----------------------------------------------------------------------
</I>&gt;<i>
</I>&gt;<i> Message: 1
</I>&gt;<i> Date: Wed, 02 Sep 2009 10:53:21 +0530
</I>&gt;<i> From: &quot;prashanth.me&quot; &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">prashanth.me at globaledgesoft.com</A>&gt;
</I>&gt;<i> Subject: Re: [OpenIMSCore-Users] P-CSCF got segfault while Forwarding
</I>&gt;<i>        INVITE received in TLS.
</I>&gt;<i> To: Gemi Tsai ??? &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">gemi.tsai at gmail.com</A>&gt;
</I>&gt;<i> Cc: IMS &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">openimscore-users at lists.berlios.de</A>&gt;
</I>&gt;<i> Message-ID: &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">4A9E0149.2000604 at globaledgesoft.com</A>&gt;
</I>&gt;<i> Content-Type: text/plain; charset=&quot;utf-8&quot;
</I>&gt;<i>
</I>&gt;<i> Hi Gemi Tsai,
</I>&gt;<i>    Thanks for the patch.
</I>&gt;<i>
</I>&gt;<i>    Even after applying the patch, P-CSCF crashes in same  function
</I>&gt;<i> get_send_socket() of forward.c @ line 172
</I>&gt;<i>     if (msg-&gt;force_send_socket-&gt;socket==-1)    where
</I>&gt;<i> 'msg-&gt;force_send_socket'  will be NULL
</I>&gt;<i>    (code dump trace provided bellow for reference).
</I>&gt;<i>
</I>&gt;<i> This time we are trying to subscribe to the reg event, we received 200
</I>&gt;<i> OK for subscribe.
</I>&gt;<i> but before receiving NOTIFY message  P-CSCF crashes. I have attached the
</I>&gt;<i> loopback capture for reference.
</I>&gt;<i>
</I>&gt;<i> By analyzing loop back capture, It looks that when S-CSCF send the
</I>&gt;<i> NOTIFY to P-CSCF.
</I>&gt;<i> P-CSCF is unable to forward the Notify to registered user (Bob).
</I>&gt;<i> TLS session is closed by closing Underlying  TCP connection.
</I>&gt;<i>
</I>&gt;<i> When check is added before dereferencing NULL pointer
</I>&gt;<i> 'msg-&gt;force_send_socket' to avoid the crash,
</I>&gt;<i> NOTIFY was forwarded in UDP, to TLS session port which is used while
</I>&gt;<i> establishing TLS session.
</I>&gt;<i>
</I>&gt;<i> please help us to resolve this problem.
</I>&gt;<i>
</I>&gt;<i> Regards,
</I>&gt;<i> Prashanth M E
</I>&gt;<i>
</I>&gt;<i> /********************************* Core Dump
</I>&gt;<i> ************************************/
</I>&gt;<i> Core was generated by `/opt/OpenIMSCore/ser_ims/ser -f
</I>&gt;<i> /opt/OpenIMSCore/pcscf.cfg -D -D'.
</I>&gt;<i> Program terminated with signal 11, Segmentation fault.
</I>&gt;<i> #0  get_send_socket (msg=0x81b83c8, to=0xb61f4cf0, proto=1) at
</I>&gt;<i> forward.c:172
</I>&gt;<i> 172                             if (msg-&gt;force_send_socket-&gt;socket==-1)
</I>&gt;<i> (gdb) p msg-&gt;force_send_socket
</I>&gt;<i> $1 = (struct socket_info *) 0x0
</I>&gt;<i> (gdb) bt
</I>&gt;<i> #0  get_send_socket (msg=0x81b83c8, to=0xb61f4cf0, proto=1) at
</I>&gt;<i> forward.c:172
</I>&gt;<i> #1  0x00138c9c in add_uac (t=0xb61f4be8, request=0x81b83c8,
</I>&gt;<i> uri=0x81b83e4, next_hop=0x81b8518,
</I>&gt;<i>    proxy=0x0, proto=0) at ut.h:308
</I>&gt;<i> #2  0x0013ad2e in t_forward_nonack (t=0xb61f4be8, p_msg=0x81b83c8,
</I>&gt;<i> proxy=0x0, proto=0)
</I>&gt;<i>    at t_fwd.c:762
</I>&gt;<i> #3  0x001354c2 in t_relay_to (p_msg=0x81b83c8, proxy=0x0, proto=0,
</I>&gt;<i> replicate=0) at t_funcs.c:285
</I>&gt;<i> #4  0x00143f60 in w_t_relay (p_msg=0x81b83c8, _foo=0x0, _bar=0x0) at
</I>&gt;<i> tm.c:1118
</I>&gt;<i> #5  0x08051f93 in do_action (a=0x81b2ce4, msg=0x81b83c8) at action.c:681
</I>&gt;<i> #6  0x080549ab in run_actions (a=0x81b2ce4, msg=0x81b83c8) at action.c:920
</I>&gt;<i> #7  0x0809f4e6 in eval_expr (e=0x81b2d50, msg=0x81b83c8) at route.c:1050
</I>&gt;<i> #8  0x0809f2cf in eval_expr (e=0x81b2da0, msg=0x81b83c8) at route.c:1170
</I>&gt;<i> #9  0x08051d4f in do_action (a=0x81b30d8, msg=0x81b83c8) at action.c:652
</I>&gt;<i> #10 0x080549ab in run_actions (a=0x81b18c8, msg=0x81b83c8) at action.c:920
</I>&gt;<i> #11 0x08051c4a in do_action (a=0x8199210, msg=0x81b83c8) at action.c:439
</I>&gt;<i> #12 0x080549ab in run_actions (a=0x8199210, msg=0x81b83c8) at action.c:920
</I>&gt;<i> #13 0x08054370 in do_action (a=0x8199398, msg=0x81b83c8) at action.c:672
</I>&gt;<i> #14 0x080549ab in run_actions (a=0x8199398, msg=0x81b83c8) at action.c:920
</I>&gt;<i> #15 0x08054370 in do_action (a=0x8199470, msg=0x81b83c8) at action.c:672
</I>&gt;<i> #16 0x080549ab in run_actions (a=0x8198d90, msg=0x81b83c8) at action.c:920
</I>&gt;<i> #17 0x08054370 in do_action (a=0x819c368, msg=0x81b83c8) at action.c:672
</I>&gt;<i> #18 0x080549ab in run_actions (a=0x8197954, msg=0x81b83c8) at action.c:920
</I>&gt;<i> #19 0x08095832 in receive_msg (
</I>&gt;<i>    buf=0x814c7a0 &quot;NOTIFY sips:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">bob at 172.16.8.41</A>:2947 SIP/2.0\r\nVia:
</I>&gt;<i> SIP/2.0/UDP 172.16.8.90:6060;bran---Type &lt;return&gt; to continue, or q
</I>&gt;<i> &lt;return&gt; to quit---
</I>&gt;<i> ch=z9hG4bKcfa7.ec6c7716.0\r\nTo:
</I>&gt;<i> &lt;sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">bob at open-ims.test</A>&gt;;tag=11478\r\nFrom:
</I>&gt;<i> &lt;sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">bob at open-ims.test</A>&gt;;tag=f37804401fa7b6a3df3f&quot;..., len=1944,
</I>&gt;<i> rcv_info=0xbff36b38) at receive.c:171
</I>&gt;<i> #20 0x080d363d in udp_rcv_loop () at udp_server.c:496
</I>&gt;<i> #21 0x0807e311 in main_loop () at main.c:1025
</I>&gt;<i> #22 0x0807f7d1 in main (argc=Cannot access memory at address 0x1
</I>&gt;<i> ) at main.c:1614
</I>&gt;<i> (gdb)
</I>&gt;<i>
</I>&gt;<i> Gemi Tsai ??? wrote:
</I>&gt;<i> &gt; Hi Prashant,
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Please try the following patch:
</I>&gt;<i> &gt; I guess it is the TLS crash issue.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Regards,
</I>&gt;<i> &gt; Gemi
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Index: modules/tls/tls_select.c
</I>&gt;<i> &gt; ===================================================================
</I>&gt;<i> &gt; --- modules/tls/tls_select.c    (revision 711)
</I>&gt;<i> &gt; +++ modules/tls/tls_select.c    (working copy)
</I>&gt;<i> &gt; @@ -99,7 +99,9 @@
</I>&gt;<i> &gt;                 tcpconn_put(c);
</I>&gt;<i> &gt;                 return 0;
</I>&gt;<i> &gt;         }
</I>&gt;<i> &gt; -       ses_hash = SSL_SESSION_hash(ssl_ses);
</I>&gt;<i> &gt; +       //gemi: use the session pointer address replace session id
</I>&gt;<i> &gt; +       //ses_hash = SSL_SESSION_hash(ssl_ses);
</I>&gt;<i> &gt; +       ses_hash = (unsigned long) ssl_ses;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;         tcpconn_put(c);
</I>&gt;<i> &gt;         return ses_hash;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; 2009/8/3 Franz Edler &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">franz-edler at aon.at</A>&gt;:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;&gt; Hi Prashant,
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;&gt;  Please can any one knows what is the meaning of  Debug statements
</I>&gt;<i> &gt;&gt;&gt;  4(12942) get_send_socket: force_send_socket of different proto (1)!!
</I>&gt;<i> &gt;&gt;&gt;
</I>&gt;<i> &gt;&gt; I think that means that on transitioning the P-CSCF the transport
</I>&gt;<i> protocol
</I>&gt;<i> &gt;&gt; has to change from UDP to TCP/TLS.
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; FRanz
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt; _______________________________________________
</I>&gt;<i> &gt;&gt; OpenIMSCore-Users mailing list
</I>&gt;<i> &gt;&gt; <A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">OpenIMSCore-Users at lists.berlios.de</A>
</I>&gt;<i> &gt;&gt; <A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">https://lists.berlios.de/mailman/listinfo/openimscore-users</A>
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i>
</I>&gt;<i> -------------- next part --------------
</I>&gt;<i> An HTML attachment was scrubbed...
</I>&gt;<i> URL:
</I>&gt;<i> <A HREF="https://lists.berlios.de/pipermail/openimscore-users/attachments/20090902/d451e013/attachment-0001.html">https://lists.berlios.de/pipermail/openimscore-users/attachments/20090902/d451e013/attachment-0001.html</A>
</I>&gt;<i> -------------- next part --------------
</I>&gt;<i> A non-text attachment was scrubbed...
</I>&gt;<i> Name: tls_capture.zip
</I>&gt;<i> Type: application/zip
</I>&gt;<i> Size: 3048 bytes
</I>&gt;<i> Desc: not available
</I>&gt;<i> Url :
</I>&gt;<i> <A HREF="https://lists.berlios.de/pipermail/openimscore-users/attachments/20090902/d451e013/attachment-0001.zip">https://lists.berlios.de/pipermail/openimscore-users/attachments/20090902/d451e013/attachment-0001.zip</A>
</I>&gt;<i>
</I>&gt;<i> ------------------------------
</I>&gt;<i>
</I>&gt;<i> Message: 2
</I>&gt;<i> Date: Wed, 2 Sep 2009 14:53:12 +0700
</I>&gt;<i> From: agung nugroho &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">mytuxs at gmail.com</A>&gt;
</I>&gt;<i> Subject: [OpenIMSCore-Users] error when running sipP
</I>&gt;<i> To: <A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">openimscore-users at lists.berlios.de</A>
</I>&gt;<i> Message-ID:
</I>&gt;<i>        &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">156a84d90909020053m26d16259sdd77c1e808621eb8 at mail.gmail.com</A>&gt;
</I>&gt;<i> Content-Type: text/plain; charset=&quot;iso-8859-1&quot;
</I>&gt;<i>
</I>&gt;<i> I try your scenario but it still have a lot of error like : it can known
</I>&gt;<i> &quot;assign_user&quot;.
</I>&gt;<i>
</I>&gt;<i> so are you have another idea???
</I>&gt;<i> I still confude about your scenario,,and I know that my scenario is simple
</I>&gt;<i> but it has a trouble at authentication.
</I>&gt;<i> I am still confuse,,
</I>&gt;<i> -------------- next part --------------
</I>&gt;<i> An HTML attachment was scrubbed...
</I>&gt;<i> URL:
</I>&gt;<i> <A HREF="https://lists.berlios.de/pipermail/openimscore-users/attachments/20090902/46f54383/attachment-0001.html">https://lists.berlios.de/pipermail/openimscore-users/attachments/20090902/46f54383/attachment-0001.html</A>
</I>&gt;<i>
</I>&gt;<i> ------------------------------
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> OpenIMSCore-Users mailing list
</I>&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">OpenIMSCore-Users at lists.berlios.de</A>
</I>&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">https://lists.berlios.de/mailman/listinfo/openimscore-users</A>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> End of OpenIMSCore-Users Digest, Vol 35, Issue 2
</I>&gt;<i> ************************************************
</I>&gt;<i>
</I>


-- 
Alejandro Araujo Rajzner.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="https://lists.berlios.de/pipermail/openimscore-users/attachments/20090902/1db40755/attachment.html">https://lists.berlios.de/pipermail/openimscore-users/attachments/20090902/1db40755/attachment.html</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="005723.html">[OpenIMSCore-Users] error when running sipP
</A></li>
	<LI>Next message: <A HREF="005725.html">[OpenIMSCore-Users] Secure SIP support in OpenIMS
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5724">[ date ]</a>
              <a href="thread.html#5724">[ thread ]</a>
              <a href="subject.html#5724">[ subject ]</a>
              <a href="author.html#5724">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/openimscore-users">More information about the OpenIMSCore-Users
mailing list</a><br>
</body></html>
