<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [OpenIMSCore-Users] SUBSCRIBE Method Problems
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/openimscore-users/2010-August/index.html" >
   <LINK REL="made" HREF="mailto:openimscore-users%40lists.berlios.de?Subject=Re%3A%20%5BOpenIMSCore-Users%5D%20SUBSCRIBE%20Method%20Problems&In-Reply-To=%3C174A738093A14A3FA2B31878401B1F23%40FranzEdlerPC%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="006394.html">
   <LINK REL="Next"  HREF="006399.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[OpenIMSCore-Users] SUBSCRIBE Method Problems</H1>
    <B>Franz Edler</B> 
    <A HREF="mailto:openimscore-users%40lists.berlios.de?Subject=Re%3A%20%5BOpenIMSCore-Users%5D%20SUBSCRIBE%20Method%20Problems&In-Reply-To=%3C174A738093A14A3FA2B31878401B1F23%40FranzEdlerPC%3E"
       TITLE="[OpenIMSCore-Users] SUBSCRIBE Method Problems">franz.edler at technikum-wien.at
       </A><BR>
    <I>Thu Aug  5 07:18:03 CEST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="006394.html">[OpenIMSCore-Users] SUBSCRIBE Method Problems
</A></li>
        <LI>Next message: <A HREF="006399.html">[OpenIMSCore-Users] SUBSCRIBE Method Problems
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6395">[ date ]</a>
              <a href="thread.html#6395">[ thread ]</a>
              <a href="subject.html#6395">[ subject ]</a>
              <a href="author.html#6395">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Patricio,

I again spent some thoughts on your problem.

&gt;<i> ... I would need to strip user=phone on the openser script processing 
</I>
I think the most easy way to get around your problem is to use the textops
module inside of OpenIMSCore. You do not need an extra proxy for this. Just
look at this function

1.2.5.  subst_uri('/re/repl/flags')

   Runs the re substitution on the message uri (like subst but works only
   on the uri)

   Meaning of the parameters is as follows:
     * '/re/repl/flags' - sed like regular expression. flags can be a
       combination of i (case insensitive), g (global) or s (match
       newline don't treat it as end of line).

   Example 5. subst usage
...
# adds 3463 prefix to numeric uris, and save the original uri (\0 match)
# as a parameter: orig_uri (just an example)
if (subst_uri('/^sip:([0-9]+)@(.*)$/sip:3463\1@\2;orig_uri=\0/i')){$
...


I think this should fit.
Just check every R-URI on the beginning of the route block if &quot;, user=phone&quot;
is included and eliminate the string. 

BR
Franz


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="006394.html">[OpenIMSCore-Users] SUBSCRIBE Method Problems
</A></li>
	<LI>Next message: <A HREF="006399.html">[OpenIMSCore-Users] SUBSCRIBE Method Problems
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6395">[ date ]</a>
              <a href="thread.html#6395">[ thread ]</a>
              <a href="subject.html#6395">[ subject ]</a>
              <a href="author.html#6395">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/openimscore-users">More information about the OpenIMSCore-Users
mailing list</a><br>
</body></html>
