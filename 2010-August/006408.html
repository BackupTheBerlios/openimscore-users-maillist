<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [OpenIMSCore-Users] SUBSCRIBE Method Problems
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/openimscore-users/2010-August/index.html" >
   <LINK REL="made" HREF="mailto:openimscore-users%40lists.berlios.de?Subject=Re%3A%20%5BOpenIMSCore-Users%5D%20SUBSCRIBE%20Method%20Problems&In-Reply-To=%3CCOL117-DS24655074303367D5B92020F7910%40phx.gbl%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="006406.html">
   <LINK REL="Next"  HREF="006410.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[OpenIMSCore-Users] SUBSCRIBE Method Problems</H1>
    <B>Patricio Latini</B> 
    <A HREF="mailto:openimscore-users%40lists.berlios.de?Subject=Re%3A%20%5BOpenIMSCore-Users%5D%20SUBSCRIBE%20Method%20Problems&In-Reply-To=%3CCOL117-DS24655074303367D5B92020F7910%40phx.gbl%3E"
       TITLE="[OpenIMSCore-Users] SUBSCRIBE Method Problems">p_latini at hotmail.com
       </A><BR>
    <I>Fri Aug  6 19:51:45 CEST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="006406.html">[OpenIMSCore-Users] SUBSCRIBE Method Problems
</A></li>
        <LI>Next message: <A HREF="006410.html">[OpenIMSCore-Users] SUBSCRIBE Method Problems
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6408">[ date ]</a>
              <a href="thread.html#6408">[ thread ]</a>
              <a href="subject.html#6408">[ subject ]</a>
              <a href="author.html#6408">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Franz:

      I tried replace() even before subst() and didn't work either. I posted
the question with subst as given the posted logs, seemed that was
effectively walking though the header and trying replacing the fields.

 

Have you tested any of them in any environment?

 

Thanks

 

Patricio

 

4(11662) XLOG: xl_print_log: final buffer length 79

 4(11662) P-Preferred-Identity: TM602a

Line1&lt;sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">7701112222 at lab.com.ar</A>;user=phone&gt;

 4(11662) parse_headers: flags=ffffffffffffffff

 4(11662) subst_run: running. r=0

 4(11662) subst_run: matched (366, 11): [;user=phone]

 4(11662) subst_run: running. r=0

 4(11662) subst_run: matched (532, 11): [;user=phone]

 4(11662) subst_run: running. r=1

 4(11662)  textops: subst_f: replacing at offset 416 [;user=phone] with [ ]

 4(11662)  textops: subst_f: replacing at offset 582 [;user=phone] with [ ]

 4(11662) subst_f: lst was 0x81b17dc

 4(11662) parse_headers: flags=ffffffffffffffff

 4(11662) XLOG: xl_print_log: final buffer length 79

 4(11662) P-Preferred-Identity: TM602a

Line1&lt;sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">7701112222 at lab.com.ar</A>;user=phone&gt;

 

-----Original Message-----
From: Franz Edler [mailto:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">franz.edler at technikum-wien.at</A>] 
Sent: Friday, August 06, 2010 2:02 PM
To: 'Patricio Latini'; <A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">openimscore-users at lists.berlios.de</A>
Subject: RE: [OpenIMSCore-Users] SUBSCRIBE Method Problems

 

Patricio,

 

 

&gt;<i> Something strange is happening, I tried to do a subst and do not seems to
</I>
&gt;<i> be working. 
</I>
 

Thats clear.

There are different textops function available. I assume that the one

mentioned below is designed to change the Request-URI. If you want to modify

anoter part of the message you should use on of the following function:

 

1.2.3.  replace(re, txt)

 

   Replaces the first occurrence of re with txt.

 

   Meaning of the parameters is as follows:

     * re - Regular expression.

     * txt - String.

 

   Example 3. replace usage

...

replace(&quot;ser&quot;, &quot;Sip Express Router&quot;);

...

 

1.2.4.  subst('/re/repl/flags')

 

   Replaces re with repl (sed or perl like).

 

   Meaning of the parameters is as follows:

     * '/re/repl/flags' - sed like regular expression. flags can be a

       combination of i (case insensitive), g (global) or s (match

       newline don't treat it as end of line).

 

   Example 4. subst usage

...

# replace the uri in to: with the message uri (just an example)

if ( subst('/^To:(.*)sip:[^@]*@[a-zA-Z0-9.]+(.*)$/t:\1\u\2/ig') ) {};

...

 

 

BR

Franz

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="https://lists.berlios.de/pipermail/openimscore-users/attachments/20100806/901978d7/attachment.html">https://lists.berlios.de/pipermail/openimscore-users/attachments/20100806/901978d7/attachment.html</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="006406.html">[OpenIMSCore-Users] SUBSCRIBE Method Problems
</A></li>
	<LI>Next message: <A HREF="006410.html">[OpenIMSCore-Users] SUBSCRIBE Method Problems
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6408">[ date ]</a>
              <a href="thread.html#6408">[ thread ]</a>
              <a href="subject.html#6408">[ subject ]</a>
              <a href="author.html#6408">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/openimscore-users">More information about the OpenIMSCore-Users
mailing list</a><br>
</body></html>
