<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [OpenIMSCore-Users] Correct response headers for SIP AS?
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/openimscore-users/2012-September/index.html" >
   <LINK REL="made" HREF="mailto:openimscore-users%40lists.berlios.de?Subject=Re%3A%20%5BOpenIMSCore-Users%5D%20Correct%20response%20headers%20for%20SIP%20AS%3F&In-Reply-To=%3CCAGSsfo91_m8%2BqpsAF%3D7N1kea2BvqQU-TbLF7bi%2BhAVZVYr1NOw%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="007511.html">
   <LINK REL="Next"  HREF="007514.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[OpenIMSCore-Users] Correct response headers for SIP AS?</H1>
    <B>Richard Spiers</B> 
    <A HREF="mailto:openimscore-users%40lists.berlios.de?Subject=Re%3A%20%5BOpenIMSCore-Users%5D%20Correct%20response%20headers%20for%20SIP%20AS%3F&In-Reply-To=%3CCAGSsfo91_m8%2BqpsAF%3D7N1kea2BvqQU-TbLF7bi%2BhAVZVYr1NOw%40mail.gmail.com%3E"
       TITLE="[OpenIMSCore-Users] Correct response headers for SIP AS?">richard.spiers at gmail.com
       </A><BR>
    <I>Mon Sep 10 21:06:50 CEST 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="007511.html">[OpenIMSCore-Users] Reauthentication scenario in IMS
</A></li>
        <LI>Next message: <A HREF="007514.html">[OpenIMSCore-Users] Correct response headers for SIP AS?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7512">[ date ]</a>
              <a href="thread.html#7512">[ thread ]</a>
              <a href="subject.html#7512">[ subject ]</a>
              <a href="author.html#7512">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi All

I am currently experiencing a problem where the SCSCF does not
detect/accept the response generated by my AS.

The AS should act as a terminating user agent (voicemail server).

My client sends an INVITE request, which is forwarded to the AS according
to the Initial Filter Criteria.

My AS responses with a 200 OK which reaches the client. The client then
sends an ACK.

However, the SCSCF keeps sending the original INVITE to the AS (and my sip
stack lib keeps replying with a 100 trying).

I am including the original route header in my 200 OK response:

i.e. something like
&lt;sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">iscmark at scscf.open-ims.test</A>:6060;lr;s=2;h=1;d=0;a=7369703a616c696365406f70656e2d696d732e74657374&gt;
is included, which Is what I thought the SCSCF was looking for.

Everything was written from scratch so it is likely a problem in my SIP
implementation, but I have not identified the error yet...

I have attached a pcap of the relevant messages.

The SIP client and SIP AS are both running on 20.28, and the core is
running on 20.248.

Any suggestions ?

Thanks

Kind Regards
Richard Spiers

P.S. It looks like the ACK doesn't get through either, so will look at that
after solving the initial problem.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="https://lists.berlios.de/pipermail/openimscore-users/attachments/20120910/713c86cf/attachment-0001.html">https://lists.berlios.de/pipermail/openimscore-users/attachments/20120910/713c86cf/attachment-0001.html</A>&gt;
-------------- next part --------------
A non-text attachment was scrubbed...
Name: scscf_to_AS_problem.pcap
Type: application/octet-stream
Size: 33743 bytes
Desc: not available
URL: &lt;<A HREF="https://lists.berlios.de/pipermail/openimscore-users/attachments/20120910/713c86cf/attachment-0001.obj">https://lists.berlios.de/pipermail/openimscore-users/attachments/20120910/713c86cf/attachment-0001.obj</A>&gt;
</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="007511.html">[OpenIMSCore-Users] Reauthentication scenario in IMS
</A></li>
	<LI>Next message: <A HREF="007514.html">[OpenIMSCore-Users] Correct response headers for SIP AS?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7512">[ date ]</a>
              <a href="thread.html#7512">[ thread ]</a>
              <a href="subject.html#7512">[ subject ]</a>
              <a href="author.html#7512">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/openimscore-users">More information about the OpenIMSCore-Users
mailing list</a><br>
</body></html>
