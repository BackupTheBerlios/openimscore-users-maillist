<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [OpenIMSCore-Users] Issue about interworking between	Openimscore and MGW/MGCF
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/openimscore-users/2010-January/index.html" >
   <LINK REL="made" HREF="mailto:openimscore-users%40lists.berlios.de?Subject=Re%3A%20%5BOpenIMSCore-Users%5D%20Issue%20about%20interworking%20between%0A%09Openimscore%20and%20MGW/MGCF&In-Reply-To=%3CDFC8F19926DF417D8B5460281EB389B2%40FRANZNOTEBOOK%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="006008.html">
   <LINK REL="Next"  HREF="006013.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[OpenIMSCore-Users] Issue about interworking between	Openimscore and MGW/MGCF</H1>
    <B>Franz Edler</B> 
    <A HREF="mailto:openimscore-users%40lists.berlios.de?Subject=Re%3A%20%5BOpenIMSCore-Users%5D%20Issue%20about%20interworking%20between%0A%09Openimscore%20and%20MGW/MGCF&In-Reply-To=%3CDFC8F19926DF417D8B5460281EB389B2%40FRANZNOTEBOOK%3E"
       TITLE="[OpenIMSCore-Users] Issue about interworking between	Openimscore and MGW/MGCF">franz-edler at aon.at
       </A><BR>
    <I>Wed Jan 20 07:39:56 CET 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="006008.html">[OpenIMSCore-Users] Issue about interworking between Openimscore and MGW/MGCF
</A></li>
        <LI>Next message: <A HREF="006013.html">[OpenIMSCore-Users] Issue about interworking between Openimscore and MGW/MGCF
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6010">[ date ]</a>
              <a href="thread.html#6010">[ thread ]</a>
              <a href="subject.html#6010">[ subject ]</a>
              <a href="author.html#6010">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello Zhang,

 

the log-file is weird. I cannot explain what happens.

Referring to scscf.cfg code I can see in the log that the BYE-request is processed at scscf.cfg:line 155 (function &#8222;S_mobile_originating()&#8220;) as expected but then the trace is lost.

No call of the functions

- S_orig_not_registered()  or

- S_is_in_dialog(&#8230;)

 

I absolutely cannot explain that. Maybe you should repeat the test.

 

Regards

Franz

 

 

  _____  

From: Zhang Wen Hua [mailto:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">zhang.wenhua at gmail.com</A>] 
Sent: Monday, January 18, 2010 6:48 AM
To: Zhang Wen Hua; Franz Edler
Cc: 'openimscore-users'; '&#30003;&#38081;'
Subject: RE: Issue about interworking between Openimscore and MGW/MGCF

 

Franz,

 

Thanks for your prompt support.  

 

I attach the S-CSCF log and IMS Coretrace as attachment. 

 

Phone number is 13800138000, and PC Client user is sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">20000 at open-ims.test</A>&#65292; call direct is 13800138000 to 2000

 

IMS Core: 192.168.15.185

MGW/ MGCF: 192.168.15.18

 

You can see the last BYE from MGCF to IMS Core is as below, 403 is gotten.

 

BYE sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">20000 at 192.168.15.114</A>:2386 SIP/2.0

Via: SIP/2.0/UDP 192.168.15.18:5060;rport;branch=z9hG4bK-676a-1263791352-971-413

Route: &lt;sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">mt at 192.168.15.185</A>:6060;lr&gt;

Route: &lt;sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">mt at pcscf.open-ims.test</A>:4060;lr&gt;

Call-ID: 5476-9c-0182010593-MtIMG1-0-192.168.15.18

CSeq: 2 BYE

Max-Forwards: 70

To: &lt;sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">20000 at open-ims.test</A>:6060;user=phone&gt;;tag=17035

From: &lt;sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">13800138000 at 192.168.15.18</A>;user=phone&gt;;tag=95ffcd055e0f78f7d5d397020e89288dc44026e1

User-Agent: Dialogic-SIP/10.5.2.173 MtIMG1 0

Reason: Q.850 ;cause=16 ;text=&quot;Normal call clearing&quot;

Content-Length: 0

 

SIP/2.0 403 Forbidden - Dialog not found on S-CSCF or Terminating user not suitable for unregistered services

Via: SIP/2.0/UDP 192.168.15.18:5060;rport=5060;branch=z9hG4bK-676a-1263791352-971-413

Call-ID: 5476-9c-0182010593-MtIMG1-0-192.168.15.18

CSeq: 2 BYE

To: &lt;sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">20000 at open-ims.test</A>:6060;user=phone&gt;;tag=17035

From: &lt;sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">13800138000 at 192.168.15.18</A>;user=phone&gt;;tag=95ffcd055e0f78f7d5d397020e89288dc44026e1

Server: Sip EXpress router (2.1.0-dev1 OpenIMSCore (i386/linux))

Content-Length: 0

Warning: 392 192.168.15.185:6060 &quot;Noisy feedback tells:  pid=20150 req_src_ip=192.168.15.18 req_src_port=5060 in_uri=sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">20000 at 192.168.15.114</A>:2386 out_uri=sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">20000 at 192.168.15.114</A>:2386 via_cnt==1&quot;

 

 

Additionally, I also has a question about PCSCF, I found that the Max-Foward value is changed to 16 when going through PCSCF, is it configured in some file? or hard-code. 

I dont' find such configuration in PCSCF.cfg. 

 

2010-01-18 

  _____  

Zhang Wen Hua 

  _____  

&#21457;&#20214;&#20154;&#65306; Franz Edler 

&#21457;&#36865;&#26102;&#38388;&#65306; 2010-01-18  12:48:13 

&#25910;&#20214;&#20154;&#65306; 'Zhang Wen Hua' 

&#25220;&#36865;&#65306; 'openimscore-users'; '&#30003;&#38081;' 

&#20027;&#39064;&#65306; RE: RE: Issue about interworking between Openimscore and MGW/MGCF 

Hi Zhang,

&gt;<i> Thanks for your support. I attach the failure log for the case I mentioned
</I>
&gt;<i> and the Scscf.cfg which we used.
</I>
I need also a core tracefile to see all the messages passing the S-CSCF.

You can best create the tracefile with tcpdump like:

tcpdump -i any -s 3000 -w /var/tmp/tracefile.pcap 

And for the logfile increasing the debug-level to 4 would give more information.

regards

Franz

-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="https://lists.berlios.de/pipermail/openimscore-users/attachments/20100120/d40e04ef/attachment.html">https://lists.berlios.de/pipermail/openimscore-users/attachments/20100120/d40e04ef/attachment.html</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="006008.html">[OpenIMSCore-Users] Issue about interworking between Openimscore and MGW/MGCF
</A></li>
	<LI>Next message: <A HREF="006013.html">[OpenIMSCore-Users] Issue about interworking between Openimscore and MGW/MGCF
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6010">[ date ]</a>
              <a href="thread.html#6010">[ thread ]</a>
              <a href="subject.html#6010">[ subject ]</a>
              <a href="author.html#6010">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/openimscore-users">More information about the OpenIMSCore-Users
mailing list</a><br>
</body></html>
