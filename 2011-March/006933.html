<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [OpenIMSCore-Users] 401 unauthorized-challenging the UE doesn't contains CK and IK
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/openimscore-users/2011-March/index.html" >
   <LINK REL="made" HREF="mailto:openimscore-users%40lists.berlios.de?Subject=Re%3A%20%5BOpenIMSCore-Users%5D%20401%20unauthorized-challenging%20the%20UE%20doesn%27t%0A%20contains%20CK%20and%20IK&In-Reply-To=%3C4D92FA66.5030802%40fokus.fraunhofer.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="006932.html">
   <LINK REL="Next"  HREF="006934.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[OpenIMSCore-Users] 401 unauthorized-challenging the UE doesn't contains CK and IK</H1>
    <B>Dragos Vingarzan</B> 
    <A HREF="mailto:openimscore-users%40lists.berlios.de?Subject=Re%3A%20%5BOpenIMSCore-Users%5D%20401%20unauthorized-challenging%20the%20UE%20doesn%27t%0A%20contains%20CK%20and%20IK&In-Reply-To=%3C4D92FA66.5030802%40fokus.fraunhofer.de%3E"
       TITLE="[OpenIMSCore-Users] 401 unauthorized-challenging the UE doesn't contains CK and IK">Dragos.Vingarzan at fokus.fraunhofer.de
       </A><BR>
    <I>Wed Mar 30 11:39:50 CEST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="006932.html">[OpenIMSCore-Users] 401 unauthorized-challenging the UE doesn't	contains CK and IK
</A></li>
        <LI>Next message: <A HREF="006934.html">[OpenIMSCore-Users] retrieve information of terminal type and	multiple registration
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6933">[ date ]</a>
              <a href="thread.html#6933">[ thread ]</a>
              <a href="subject.html#6933">[ subject ]</a>
              <a href="author.html#6933">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello Mayur,

the CK/IK are not supposed to be transmitted over Gm to the client. What
is the point of then using them if they are intercepted as part of an
unencrypted response? So the P-CSCF saves and removes them.

The CK/IK are also generated in the UE by the ISIM, when you feed it the
AKA challenge from the 401.

Cheers,
-Dragos

On 03/30/2011 05:34 AM, Mayur Mehta wrote:
&gt;<i> This is what my client is sending
</I>&gt;<i>
</I>&gt;<i> REGISTER sip:t-mobile.com &lt;<A HREF="http://t-mobile.com">http://t-mobile.com</A>&gt; SIP/2.0
</I>&gt;<i> Via: SIP/2.0/UDP 10.0.3.91:55895;rport;branch=z9hG4bK1262679716835
</I>&gt;<i> From: &lt;sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">alice at t-mobile.com</A> &lt;mailto:sip%<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">3Aalice at t-mobile.com</A>&gt;&gt;;tag=4041
</I>&gt;<i> To: &lt;sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">alice at t-mobile.com</A> &lt;mailto:sip%<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">3Aalice at t-mobile.com</A>&gt;&gt;
</I>&gt;<i> Call-ID: M-75524cdd227d2ddedab92df78e3c9b65
</I>&gt;<i> CSeq: 401 REGISTER
</I>&gt;<i> Max-Forwards: 70
</I>&gt;<i> Allow: INVITE, ACK, CANCEL, BYE, MESSAGE, OPTIONS, NOTIFY, PRACK,
</I>&gt;<i> UPDATE, REFER
</I>&gt;<i> Contact:
</I>&gt;<i> &lt;sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">alice at 10.0.3.91</A>:55895;transport=udp&gt;;expires=600000;+deviceID=&quot;3ca50bcb-7a67-44f1-afd0-994a55f930f4&quot;;mobility=&quot;fixed&quot;;+g.3gpp.app%5fref=&quot;urn%3Aurnxxx%3A3gpp-application.ims.iari.gsmais&quot;;+g.oma.sip-im.large-message;+g.oma.sip-im
</I>&gt;<i> User-Agent: IM-client/OMA1.0 Mercuro-Gold/v4.0.1460.0
</I>&gt;<i> Authorization: Digest username=&quot;<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">alice at t-mobile.com</A>
</I>&gt;<i> &lt;mailto:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">alice at t-mobile.com</A>&gt;&quot;,realm=&quot;t-mobile.com
</I>&gt;<i> &lt;<A HREF="http://t-mobile.com">http://t-mobile.com</A>&gt;&quot;,nonce=&quot;&quot;,response=&quot;&quot;,uri=&quot;sip:t-mobile.com
</I>&gt;<i> &lt;<A HREF="http://t-mobile.com">http://t-mobile.com</A>&gt;&quot;
</I>&gt;<i> Supported: path
</I>&gt;<i> P-Access-Network-Info: ADSL;utran-cell-id-3gpp=00000000
</I>&gt;<i> Privacy: none
</I>&gt;<i> Security-Client:
</I>&gt;<i> ipsec-3gpp;alg=hmac-sha-1-96;ealg=null;prot=esp;mod=trans;port-c=51499;port-s=55897;spi-c=693696126;spi-s=1519069614
</I>&gt;<i> Require: sec-agree
</I>&gt;<i> Proxy-Require: sec-agree
</I>&gt;<i> Supported: timer
</I>&gt;<i> Content-Length: 0
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> you can see here it is sending Authorization header as well.
</I>&gt;<i>
</I>&gt;<i> Regards,
</I>&gt;<i> Mayur
</I>&gt;<i>
</I>&gt;<i> On Wed, Mar 30, 2011 at 8:48 AM, Franz Edler
</I>&gt;<i> &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">franz.edler at technikum-wien.at</A> &lt;mailto:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">franz.edler at technikum-wien.at</A>&gt;&gt;
</I>&gt;<i> wrote:
</I>&gt;<i>
</I>&gt;<i>     Mayur,
</I>&gt;<i>
</I>&gt;<i>     &gt; I am trying to register UE using IPsec, but i am not getting
</I>&gt;<i>     CK(ciphering
</I>&gt;<i>     key)
</I>&gt;<i>     &gt; and IK in 401 unauhtorized message from CSCF the WWW-Authenticate
</I>&gt;<i>     &gt; doesn't have those information, Can someone let me know how can
</I>&gt;<i>     i make
</I>&gt;<i>     &gt; openIMScore to send these information in the 401 message?
</I>&gt;<i>
</I>&gt;<i>     I guess your client does not send a correct REGISTER request with an
</I>&gt;<i>     Authorization header field.
</I>&gt;<i>
</I>&gt;<i>     -franz
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> OpenIMSCore-Users mailing list
</I>&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">OpenIMSCore-Users at lists.berlios.de</A>
</I>&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">https://lists.berlios.de/mailman/listinfo/openimscore-users</A>
</I>

-- 
-----------------------------------------
Dipl. Eng. Dragos Vingarzan
Fraunhofer FOKUS/NGNI
Kaiserin-Augusta-Allee 31
10589 Berlin,Germany
Phone +49 (0)30 - 3463 - 7385
Mobile +49 (0)176 - 48 32 16 00
Web www.fokus.fraunhofer.de www.openimscore.org
We could change the world if God would give us the source code...
-----------------------------------------------------------------

-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="https://lists.berlios.de/pipermail/openimscore-users/attachments/20110330/6f14d0a8/attachment.html">https://lists.berlios.de/pipermail/openimscore-users/attachments/20110330/6f14d0a8/attachment.html</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="006932.html">[OpenIMSCore-Users] 401 unauthorized-challenging the UE doesn't	contains CK and IK
</A></li>
	<LI>Next message: <A HREF="006934.html">[OpenIMSCore-Users] retrieve information of terminal type and	multiple registration
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6933">[ date ]</a>
              <a href="thread.html#6933">[ thread ]</a>
              <a href="subject.html#6933">[ subject ]</a>
              <a href="author.html#6933">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/openimscore-users">More information about the OpenIMSCore-Users
mailing list</a><br>
</body></html>
