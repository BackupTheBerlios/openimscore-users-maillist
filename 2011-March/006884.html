<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [OpenIMSCore-Users] RV: Getting 400 Bad Request - Not following	indicated Service-Routes in a call try between two sip clients
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/openimscore-users/2011-March/index.html" >
   <LINK REL="made" HREF="mailto:openimscore-users%40lists.berlios.de?Subject=Re%3A%20%5BOpenIMSCore-Users%5D%20RV%3A%20Getting%20400%20Bad%20Request%20-%20Not%20following%0A%09indicated%20Service-Routes%20in%20a%20call%20try%20between%20two%20sip%20clients&In-Reply-To=%3C001701cbd7e5%246b4863e0%2441d92ba0%24%40gbt.tfo.upm.es%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   
   <LINK REL="Next"  HREF="006885.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[OpenIMSCore-Users] RV: Getting 400 Bad Request - Not following	indicated Service-Routes in a call try between two sip clients</H1>
    <B>Pedro Moreno</B> 
    <A HREF="mailto:openimscore-users%40lists.berlios.de?Subject=Re%3A%20%5BOpenIMSCore-Users%5D%20RV%3A%20Getting%20400%20Bad%20Request%20-%20Not%20following%0A%09indicated%20Service-Routes%20in%20a%20call%20try%20between%20two%20sip%20clients&In-Reply-To=%3C001701cbd7e5%246b4863e0%2441d92ba0%24%40gbt.tfo.upm.es%3E"
       TITLE="[OpenIMSCore-Users] RV: Getting 400 Bad Request - Not following	indicated Service-Routes in a call try between two sip clients">pmoreno at gbt.tfo.upm.es
       </A><BR>
    <I>Tue Mar  1 08:51:00 CET 2011</I>
    <P><UL>
        
        <LI>Next message: <A HREF="006885.html">[OpenIMSCore-Users] scscf load balancing
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6884">[ date ]</a>
              <a href="thread.html#6884">[ thread ]</a>
              <a href="subject.html#6884">[ subject ]</a>
              <a href="author.html#6884">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi

 

My name is Pedro Moreno, I&#146;m working at the university doing some research
about IMS. Recently, I&#146;ve been using the OpenIMS to emulate a IMS Core in
order to make a testbed for my SipClients which use IMS components in some
features.

The issue I would to mention with this mail is the following: I&#146;ve been able
to register two sip clients (sip communicator) using the OpenIMS. The
problem appears when I try to establish a call between them, I get the
following response to my invite: Getting 400 Bad Request - Not following
indicated Service-Routes.

 

The trace I capture with wireshark is: 

 

INVITE sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">bob at open-ims.test</A> SIP/2.0

Call-ID: <A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">c081a91edd45d9afefc7c8a0be114380 at 0</A>:0:0:0:0:0:0:0

CSeq: 1 INVITE

From: &lt;sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">alice at open-ims.test</A>&gt;;tag=657a574e

To: &lt;sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">bob at open-ims.test</A>&gt;

Via: SIP/2.0/UDP
[fe80:0:0:0:80a7:9fc:9733:d99a]:5060;branch=z9hG4bK42c3932fb8d2c69f5b37c79d2
ad7682d

Max-Forwards: 70

Contact: &quot;alice&quot;
&lt;sip:alice@[fe80:0:0:0:80a7:9fc:9733:d99a]:5060;transport=udp;registering_ac
c=open-ims_test&gt;,&quot;alice&quot;
&lt;sip:alice@[fe80:0:0:0:80a7:9fc:9733:d99a]:5060;transport=udp;registering_ac
c=open-ims_test&gt;

User-Agent: SIP Communicator1.0-alpha3-0.build.by.SVNWindows 7

Content-Type: application/sdp

Content-Length: 340

 

v=0

o=alice 0 0 IN IP6 2002:8a04:a55:0:0:0:8a04:a55

s=-

c=IN IP6 2002:8a04:a55:0:0:0:8a04:a55

t=0 0

m=audio 5000 RTP/AVP 0 3 5 4

a=rtpmap:4 G723/8000

a=fmtp:4 annexa=no;bitrate=6.3

m=video 5002 RTP/AVP 34

a=rtpmap:34 H263/90000

a=fmtp:34 QCIF=1;CIF=1 

a=alt:1 1 : Fe3MhW6r klHmb8cw 2002:8a04:a55:0:0:0:8a04:a55 5002

a=sendrecv

SIP/2.0 400 Bad Request - Not following indicated Service-Routes

Call-ID: <A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">c081a91edd45d9afefc7c8a0be114380 at 0</A>:0:0:0:0:0:0:0

CSeq: 1 INVITE

From: &lt;sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">alice at open-ims.test</A>&gt;;tag=657a574e

To: &lt;sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">bob at open-ims.test</A>&gt;;tag=d7bdd685570b14cebd946bb59cd6e6b0.b909

Via: SIP/2.0/UDP
[fe80:0:0:0:80a7:9fc:9733:d99a]:5060;branch=z9hG4bK42c3932fb8d2c69f5b37c79d2
ad7682d;rport=5060;received=138.4.10.85

Server: Sip EXpress router (2.1.0-dev1 OpenIMSCore (i386/linux))

Content-Length: 0

Warning: 392 138.4.10.70:4060 &quot;Noisy feedback tells:  pid=2511
req_src_ip=138.4.10.85 req_src_port=5060 in_uri=sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">bob at open-ims.test</A>
out_uri=sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">bob at open-ims.test</A> via_cnt==1&quot;

 

ACK sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">bob at open-ims.test</A> SIP/2.0

Call-ID: <A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">c081a91edd45d9afefc7c8a0be114380 at 0</A>:0:0:0:0:0:0:0

Max-Forwards: 70

From: &lt;sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">alice at open-ims.test</A>&gt;;tag=657a574e

To: &lt;sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">bob at open-ims.test</A>&gt;;tag=d7bdd685570b14cebd946bb59cd6e6b0.b909

Via: SIP/2.0/UDP
[fe80:0:0:0:80a7:9fc:9733:d99a]:5060;branch=z9hG4bK42c3932fb8d2c69f5b37c79d2
ad7682d

CSeq: 1 ACK

Content-Length: 0

 

I&#146;ve tried to establish a call between two IMS Client (IMS-Communicator) and
I get a success even with video and audio.

 

Does anyone know what happened to the sip client? Or what should the sip
client include in the invite message?

 

Thanks in advance

 

Pedro Antonio Moreno S&#225;nchez
Telecommunication Engineer &amp; Researcher
Bioengineering and Telemedicine Group
ETSI Telecomunicaci&#243;n - UPM B.303.
Ciudad Universitaria s/n
28040 MADRID - SPAIN

Tel. +34 91 549 57 00 ext. 3407
Fax + 34 91 336 68 28
e-mail: <A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">pmoreno at gbt.tfo.upm.es</A>

P   Antes de imprimir este e-mail piense bien si es necesario hacerlo

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="https://lists.berlios.de/pipermail/openimscore-users/attachments/20110301/511ca061/attachment.html">https://lists.berlios.de/pipermail/openimscore-users/attachments/20110301/511ca061/attachment.html</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	
	<LI>Next message: <A HREF="006885.html">[OpenIMSCore-Users] scscf load balancing
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6884">[ date ]</a>
              <a href="thread.html#6884">[ thread ]</a>
              <a href="subject.html#6884">[ subject ]</a>
              <a href="author.html#6884">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/openimscore-users">More information about the OpenIMSCore-Users
mailing list</a><br>
</body></html>
