<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [OpenIMSCore-Users] RV: Getting 400 Bad Request - Not	following indicated Service-Routes in a call try between two	sip clients
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/openimscore-users/2011-March/index.html" >
   <LINK REL="made" HREF="mailto:openimscore-users%40lists.berlios.de?Subject=Re%3A%20%5BOpenIMSCore-Users%5D%20RV%3A%20Getting%20400%20Bad%20Request%20-%20Not%09following%0A%20indicated%20Service-Routes%20in%20a%20call%20try%20between%20two%09sip%20clients&In-Reply-To=%3C4D778FF9.5090201%40acision.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="006913.html">
   <LINK REL="Next"  HREF="006917.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[OpenIMSCore-Users] RV: Getting 400 Bad Request - Not	following indicated Service-Routes in a call try between two	sip clients</H1>
    <B>Daniel Ciprus</B> 
    <A HREF="mailto:openimscore-users%40lists.berlios.de?Subject=Re%3A%20%5BOpenIMSCore-Users%5D%20RV%3A%20Getting%20400%20Bad%20Request%20-%20Not%09following%0A%20indicated%20Service-Routes%20in%20a%20call%20try%20between%20two%09sip%20clients&In-Reply-To=%3C4D778FF9.5090201%40acision.com%3E"
       TITLE="[OpenIMSCore-Users] RV: Getting 400 Bad Request - Not	following indicated Service-Routes in a call try between two	sip clients">daniel.ciprus at acision.com
       </A><BR>
    <I>Wed Mar  9 15:34:33 CET 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="006913.html">[OpenIMSCore-Users] RV: Getting 400 Bad Request - Not	following	indicated Service-Routes in a call try between two	sip clients
</A></li>
        <LI>Next message: <A HREF="006917.html">[OpenIMSCore-Users] RV: Getting 400 Bad Request - Not following indicated Service-Routes in a call try between two sip clients
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6916">[ date ]</a>
              <a href="thread.html#6916">[ thread ]</a>
              <a href="subject.html#6916">[ subject ]</a>
              <a href="author.html#6916">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I can open the trace but (likely I'm loosing the chain) I don't see any 
400 Bad request in that trace.

On 03/09/2011 06:02 AM, Pedro Moreno wrote:
&gt;<i>
</I>&gt;<i> Hi
</I>&gt;<i>
</I>&gt;<i> I&#8217;ve captured the trace again in order to create a new trace file. I 
</I>&gt;<i> hope you could open the file (I&#8217;ve been able in wireshark 1.4.3 in 
</I>&gt;<i> windows and 1.2.2 in wireshark)
</I>&gt;<i>
</I>&gt;<i> Do you see any special thing?
</I>&gt;<i>
</I>&gt;<i> Thanks in advance
</I>&gt;<i>
</I>&gt;<i> Pedro
</I>&gt;<i>
</I>&gt;<i> *De:*Vladimir Broz [mailto:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">vladiksip at centrum.cz</A>]
</I>&gt;<i> *Enviado el:* martes, 08 de marzo de 2011 14:17
</I>&gt;<i> *Para:* Pedro Moreno
</I>&gt;<i> *Asunto:* Re: [OpenIMSCore-Users] RV: Getting 400 Bad Request - Not 
</I>&gt;<i> following indicated Service-Routes in a call try between two sip clients
</I>&gt;<i>
</I>&gt;<i> no - still getting error - either using Linux version Wireshark 1.3.5
</I>&gt;<i> or Windows version Wireshark 1.4.4 ... sorry
</I>&gt;<i>
</I>&gt;<i> On 03/08/2011 02:02 PM, Pedro Moreno wrote:
</I>&gt;<i> &gt; Hi
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; I don&#8217;t know why you get an error opening the trace.pcap file because I
</I>&gt;<i> &gt; can open it without any problem.  Try with this file, is the file open
</I>&gt;<i> &gt; resaved with another name.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Give a try and tell me
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Thanks
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Pedro
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; *De:*Vladimir Broz [mailto:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">vladiksip at centrum.cz</A>]
</I>&gt;<i> &gt; *Enviado el:* martes, 08 de marzo de 2011 13:49
</I>&gt;<i> &gt; *Para:* Pedro Moreno
</I>&gt;<i> &gt; *CC:* <A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">openimscore-users at lists.berlios.de</A> 
</I>&gt;<i> &lt;mailto:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">openimscore-users at lists.berlios.de</A>&gt;; 
</I>&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">franz.edler at technikum-wien.at</A> &lt;mailto:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">franz.edler at technikum-wien.at</A>&gt;
</I>&gt;<i> &gt; *Asunto:* Re: [OpenIMSCore-Users] RV: Getting 400 Bad Request - Not
</I>&gt;<i> &gt; following indicated Service-Routes in a call try between two sip clients
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; again error, but this time I can see at least packet #16 - REGISTER, the
</I>&gt;<i> &gt; #17 is malformed packet and nothing more...
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; The capture file appears to be damaged or corrupt.
</I>&gt;<i> &gt; (pcap: File has 1074397440-byte packet, bigger than maximum of 65535)
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; On 03/08/2011 01:21 PM, Pedro Moreno wrote:
</I>&gt;<i> &gt;&gt;  Hi again
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;  Before I&#8217;ve forgot including some diameter ports. I&#8217;ve attached the new
</I>&gt;<i> &gt;&gt;  trace file originated with the instruction: sudo tcpdump -s0 -v -i any
</I>&gt;<i> &gt;&gt;  port 3868 or 3869 or 3870 or 4060 or 5060 or 6060 or 8060 or 8080 &#8211;w
</I>&gt;<i> &gt;&gt;  trace.pcap
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;  Please refuse the previous file
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;  Thanks
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;  Pedro
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;  *De:*<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">openimscore-users-bounces at lists.berlios.de</A>
</I>&gt;<i> &gt;&gt;  [mailto:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">openimscore-users-bounces at lists.berlios.de</A>] *En nombre de 
</I>&gt;<i> *Pedro
</I>&gt;<i> &gt;&gt;  Moreno
</I>&gt;<i> &gt;&gt;  *Enviado el:* martes, 08 de marzo de 2011 12:48
</I>&gt;<i> &gt;&gt;  *Para:* 'Vladimir Broz'
</I>&gt;<i> &gt;&gt;  *CC:* <A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">openimscore-users at lists.berlios.de</A> 
</I>&gt;<i> &lt;mailto:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">openimscore-users at lists.berlios.de</A>&gt;
</I>&gt;<i> &gt; &lt;mailto:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">openimscore-users at lists.berlios.de</A>&gt;
</I>&gt;<i> &gt;&gt;  *Asunto:* Re: [OpenIMSCore-Users] RV: Getting 400 Bad Request - Not
</I>&gt;<i> &gt;&gt;  following indicated Service-Routes in a call try between two sip 
</I>&gt;<i> clients
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;  Hi
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;  I&#8217;ve attached the trace file originated with the instruction: sudo
</I>&gt;<i> &gt;&gt;  tcpdump -s0 -v -i any port 3868 or 4060 or 5060 or 6060 or 8060 or 8080
</I>&gt;<i> &gt;&gt;  &#8211;w trace.pcap
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;  Do you see any suspicious?
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;  Thanks in advance
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;  Pedro
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;  *De:*Vladimir Broz [mailto:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">vladiksip at centrum.cz</A>]
</I>&gt;<i> &gt;&gt;  *Enviado el:* martes, 08 de marzo de 2011 9:55
</I>&gt;<i> &gt;&gt;  *Para:* Pedro Moreno
</I>&gt;<i> &gt;&gt;  *CC:* <A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">franz.edler at technikum-wien.at</A> 
</I>&gt;<i> &lt;mailto:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">franz.edler at technikum-wien.at</A>&gt;
</I>&gt;<i> &gt; &lt;mailto:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">franz.edler at technikum-wien.at</A>&gt;;
</I>&gt;<i> &gt; <A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">openimscore-users at lists.berlios.de</A> 
</I>&gt;<i> &lt;mailto:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">openimscore-users at lists.berlios.de</A>&gt;
</I>&gt;<i> &gt; &lt;mailto:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">openimscore-users at lists.berlios.de</A>&gt;
</I>&gt;<i> &gt;&gt;  *Asunto:* Re: [OpenIMSCore-Users] RV: Getting 400 Bad Request - Not
</I>&gt;<i> &gt;&gt;  following indicated Service-Routes in a call try between two sip 
</I>&gt;<i> clients
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;  Hi,
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;  please, use:
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;  sudo tcpdump -s0 -v -i any port 3869 or 3870 or 4060 or 5060 or ... -w
</I>&gt;<i> &gt;&gt;  trace.pcap (replace ... with another ports OpenIMSCore is using -
</I>&gt;<i> &gt;&gt;  either for diameter or sip traffic)
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;  and send the trace.pcap file. It should contain only useful 
</I>&gt;<i> messages and
</I>&gt;<i> &gt;&gt;  be of reasonable size...
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;  Regards,
</I>&gt;<i> &gt;&gt;  -Vladimir B.
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;  On 03/08/2011 08:56 AM, Pedro Moreno wrote:
</I>&gt;<i> &gt;&gt; &gt; Hello
</I>&gt;<i> &gt;&gt; &gt;
</I>&gt;<i> &gt;&gt; &gt; I&#8217;ve attached a tracefile created with tcpdump on the machine where my
</I>&gt;<i> &gt;&gt; &gt; openIMS is installed. The file is the output directly got from the
</I>&gt;<i> &gt;&gt; &gt; console (name file: traceTcpdumpSIPClientsOpenIMS). If you need 
</I>&gt;<i> the file
</I>&gt;<i> &gt;&gt; &gt; to see deeper the trace, please tell me and I&#8217;ll send you the log file
</I>&gt;<i> &gt;&gt; &gt; capture with tcpdump (I don&#8217;t send it now because it is too big).
</I>&gt;<i> &gt;&gt; &gt;
</I>&gt;<i> &gt;&gt; &gt; Do you see anything wrong in this trace? Any help would be very 
</I>&gt;<i> grateful.
</I>&gt;<i> &gt;&gt; &gt;
</I>&gt;<i> &gt;&gt; &gt; Thanks in advance
</I>&gt;<i> &gt;&gt; &gt;
</I>&gt;<i> &gt;&gt; &gt; Pedro
</I>&gt;<i> &gt;&gt; &gt;
</I>&gt;<i> &gt;&gt; &gt; *De:*Franz Edler [mailto:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">franz.edler at technikum-wien.at</A>]
</I>&gt;<i> &gt;&gt; &gt; *Enviado el:* viernes, 04 de marzo de 2011 17:55
</I>&gt;<i> &gt;&gt; &gt; *Para:* 'Pedro Moreno'; <A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">openimscore-users at lists.berlios.de</A> 
</I>&gt;<i> &lt;mailto:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">openimscore-users at lists.berlios.de</A>&gt;
</I>&gt;<i> &gt; &lt;mailto:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">openimscore-users at lists.berlios.de</A>&gt;
</I>&gt;<i> &gt;&gt; &lt;mailto:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">openimscore-users at lists.berlios.de</A>&gt;
</I>&gt;<i> &gt;&gt; &gt; *Asunto:* RE: [OpenIMSCore-Users] RV: Getting 400 Bad Request - Not
</I>&gt;<i> &gt;&gt; &gt; following indicated Service-Routes in a call try between two sip 
</I>&gt;<i> clients
</I>&gt;<i> &gt;&gt; &gt;
</I>&gt;<i> &gt;&gt; &gt; &gt; I've made the change you proposed but I get no success. I have 
</I>&gt;<i> still no
</I>&gt;<i> &gt;&gt; &gt; &gt; answer to my INVITEs messages.
</I>&gt;<i> &gt;&gt; &gt;
</I>&gt;<i> &gt;&gt; &gt; Please add a tracefile (created with tcpdump on the Linux platform)
</I>&gt;<i> &gt;&gt; &gt; including registration and setup of the call.
</I>&gt;<i> &gt;&gt; &gt;
</I>&gt;<i> &gt;&gt; &gt; - franz
</I>&gt;<i> &gt;&gt; &gt;
</I>&gt;<i> &gt;&gt; &gt; 
</I>&gt;<i> ------------------------------------------------------------------------
</I>&gt;<i> &gt;&gt; &gt;
</I>&gt;<i> &gt;&gt; &gt; No se encontraron virus en este mensaje.
</I>&gt;<i> &gt;&gt; &gt; Comprobado por AVG - www.avg.com &lt;<A HREF="http://www.avg.com">http://www.avg.com</A>&gt; 
</I>&gt;<i> &lt;<A HREF="http://www.avg.com">http://www.avg.com</A>&gt;
</I>&gt;<i> &gt; &lt;<A HREF="http://www.avg.com">http://www.avg.com</A>&gt; &lt;<A HREF="http://www.avg.com">http://www.avg.com</A>&gt;
</I>&gt;<i> &gt;&gt; &gt; Versi&#243;n: 10.0.1204 / Base de datos de virus: 1435/3481 - Fecha de
</I>&gt;<i> &gt;&gt; &gt; publicaci&#243;n: 03/04/11
</I>&gt;<i> &gt;&gt; &gt;
</I>&gt;<i> &gt;&gt; &gt;
</I>&gt;<i> &gt;&gt; &gt;
</I>&gt;<i> &gt;&gt; &gt; _______________________________________________
</I>&gt;<i> &gt;&gt; &gt; OpenIMSCore-Users mailing list
</I>&gt;<i> &gt;&gt; &gt; <A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">OpenIMSCore-Users at lists.berlios.de</A> 
</I>&gt;<i> &lt;mailto:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">OpenIMSCore-Users at lists.berlios.de</A>&gt;
</I>&gt;<i> &gt; &lt;mailto:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">OpenIMSCore-Users at lists.berlios.de</A>&gt;
</I>&gt;<i> &gt;&gt; &lt;mailto:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">OpenIMSCore-Users at lists.berlios.de</A>&gt;
</I>&gt;<i> &gt;&gt; &gt; <A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">https://lists.berlios.de/mailman/listinfo/openimscore-users</A>
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;  
</I>&gt;<i> ------------------------------------------------------------------------
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;  No se encontraron virus en este mensaje.
</I>&gt;<i> &gt;&gt;  Comprobado por AVG - www.avg.com &lt;<A HREF="http://www.avg.com">http://www.avg.com</A>&gt; 
</I>&gt;<i> &lt;<A HREF="http://www.avg.com">http://www.avg.com</A>&gt; &lt;<A HREF="http://www.avg.com">http://www.avg.com</A>&gt;
</I>&gt;<i> &gt;&gt;  Versi&#243;n: 10.0.1204 / Base de datos de virus: 1497/3489 - Fecha de
</I>&gt;<i> &gt;&gt;  publicaci&#243;n: 03/07/11
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;  
</I>&gt;<i> ------------------------------------------------------------------------
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;&gt;  No se encontraron virus en este mensaje.
</I>&gt;<i> &gt;&gt;  Comprobado por AVG - www.avg.com &lt;<A HREF="http://www.avg.com">http://www.avg.com</A>&gt; 
</I>&gt;<i> &lt;<A HREF="http://www.avg.com">http://www.avg.com</A>&gt; &lt;<A HREF="http://www.avg.com">http://www.avg.com</A>&gt;
</I>&gt;<i> &gt;&gt;  Versi&#243;n: 10.0.1204 / Base de datos de virus: 1497/3489 - Fecha de
</I>&gt;<i> &gt;&gt;  publicaci&#243;n: 03/07/11
</I>&gt;<i> &gt;&gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; ------------------------------------------------------------------------
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; No se encontraron virus en este mensaje.
</I>&gt;<i> &gt; Comprobado por AVG - www.avg.com &lt;<A HREF="http://www.avg.com">http://www.avg.com</A>&gt; 
</I>&gt;<i> &lt;<A HREF="http://www.avg.com">http://www.avg.com</A>&gt;
</I>&gt;<i> &gt; Versi&#243;n: 10.0.1204 / Base de datos de virus: 1497/3489 - Fecha de
</I>&gt;<i> &gt; publicaci&#243;n: 03/07/11
</I>&gt;<i> &gt;
</I>&gt;<i>
</I>&gt;<i> ------------------------------------------------------------------------
</I>&gt;<i>
</I>&gt;<i> No se encontraron virus en este mensaje.
</I>&gt;<i> Comprobado por AVG - www.avg.com &lt;<A HREF="http://www.avg.com">http://www.avg.com</A>&gt;
</I>&gt;<i> Versi&#243;n: 10.0.1204 / Base de datos de virus: 1497/3489 - Fecha de 
</I>&gt;<i> publicaci&#243;n: 03/07/11
</I>&gt;<i>
</I>
-- 
*Daniel Ciprus*
Integration engineer
------------------------------------------------------
*<A HREF="http://www.acision.com*">http://www.acision.com*</A>
4870 Sadler Rd
Suite 200
Glen Allen, VA 23060
USA
T: +1 804 762 5601
E: <A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">daniel.ciprus at acision.com</A>


This e-mail and any attachment is for authorised use by the intended recipient(s) only. It may contain proprietary material, confidential information and/or be subject to legal privilege. It should not be copied, disclosed to, retained or used by, any other party. If you are not an intended recipient then please promptly delete this e-mail and any attachment and all copies and inform the sender. Thank you.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="https://lists.berlios.de/pipermail/openimscore-users/attachments/20110309/be33f5e3/attachment.html">https://lists.berlios.de/pipermail/openimscore-users/attachments/20110309/be33f5e3/attachment.html</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="006913.html">[OpenIMSCore-Users] RV: Getting 400 Bad Request - Not	following	indicated Service-Routes in a call try between two	sip clients
</A></li>
	<LI>Next message: <A HREF="006917.html">[OpenIMSCore-Users] RV: Getting 400 Bad Request - Not following indicated Service-Routes in a call try between two sip clients
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6916">[ date ]</a>
              <a href="thread.html#6916">[ thread ]</a>
              <a href="subject.html#6916">[ subject ]</a>
              <a href="author.html#6916">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/openimscore-users">More information about the OpenIMSCore-Users
mailing list</a><br>
</body></html>
