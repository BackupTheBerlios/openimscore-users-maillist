<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [OpenIMSCore-Users] AS sends only a 200Ok, but other messages are refused
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/openimscore-users/2008-March/index.html" >
   <LINK REL="made" HREF="mailto:openimscore-users%40lists.berlios.de?Subject=Re%3A%20%5BOpenIMSCore-Users%5D%20AS%20sends%20only%20a%20200Ok%2C%0A%20but%20other%20messages%20are%20refused&In-Reply-To=%3C47EC2E8A.6080504%40fokus.fraunhofer.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003678.html">
   <LINK REL="Next"  HREF="003679.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[OpenIMSCore-Users] AS sends only a 200Ok, but other messages are refused</H1>
    <B>Dragos Vingarzan</B> 
    <A HREF="mailto:openimscore-users%40lists.berlios.de?Subject=Re%3A%20%5BOpenIMSCore-Users%5D%20AS%20sends%20only%20a%20200Ok%2C%0A%20but%20other%20messages%20are%20refused&In-Reply-To=%3C47EC2E8A.6080504%40fokus.fraunhofer.de%3E"
       TITLE="[OpenIMSCore-Users] AS sends only a 200Ok, but other messages are refused">Dragos.Vingarzan at fokus.fraunhofer.de
       </A><BR>
    <I>Fri Mar 28 00:32:26 CET 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="003678.html">[OpenIMSCore-Users] AS sends only a 200Ok,	but other messages are refused
</A></li>
        <LI>Next message: <A HREF="003679.html">[OpenIMSCore-Users] password for logging into vmware-image
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3681">[ date ]</a>
              <a href="thread.html#3681">[ thread ]</a>
              <a href="subject.html#3681">[ subject ]</a>
              <a href="author.html#3681">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Laila,

That would be because you would have to follow certain rules when 
sending messages from the AS towards clients. The first thing is to 
figure out if you want to do origination or termination. Based on that 
you need to route the message to an I-CSCF that will find out what is 
the S-CSCF for the originating/terminating identity. Then the I-CSCF 
would route there.

- for origination - you need to have a Route: 
&lt;sip:domain.of.originating.user;orig;lr&gt;. Of course, proper 
P-Asserted-Identity and a proper PSI + service profile for the AS is 
required if you do origination with the AS identity
- for termination - no route header


The basic Open IMS Core setup with just one S-CSCF allows you to get 
away with bad routing in most situation, but I would say that you should 
not route initial requests from the AS directly to an S-CSCF unless you 
really know what you are doing, as you probably discovered somehow the 
right S-CSCF to send to.

Cheers,
-Dragos

laila aoufi wrote:
&gt;<i>
</I>&gt;<i>     Hi all!
</I>&gt;<i>      
</I>&gt;<i>     Please can someone help me?
</I>&gt;<i>      
</I>&gt;<i>     I have created an Application Server (AS) and attached it to the
</I>&gt;<i>     HSS using open-ims.The AS doesn't have to register to HSS. I have
</I>&gt;<i>     defined it following the instructions written in openimscore, and
</I>&gt;<i>     it seems that it's all ok.
</I>&gt;<i>      
</I>&gt;<i>     But the problem is that, when my client try to contact the AS
</I>&gt;<i>     sending a MESSAGE, the AS makes a 200 ok response and sends it
</I>&gt;<i>     (through the SCSCF), and the client receives it successfuly. But
</I>&gt;<i>     the AS has also to send another message for the service requested
</I>&gt;<i>     by client. In the captures, we see that the AS create this
</I>&gt;<i>     message, but when it sends it, it receives a
</I>&gt;<i>      
</I>&gt;<i>     SIP/2.0 403 Forbidden - Dialog not found on S-CSCF or Terminating
</I>&gt;<i>     user not suitable for unregistered services
</I>&gt;<i>      
</I>&gt;<i>     Someone has any idea about the possible problem?
</I>&gt;<i>      
</I>&gt;<i>     Thank you very much
</I>&gt;<i>      
</I>&gt;<i>     Laila
</I>&gt;<i>      
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> ------------------------------------------------------------------------
</I>&gt;<i> Sigue de cerca las &#250;ltimas tendencias y lo que m&#225;s rompe MSN V&#237;deo 
</I>&gt;<i> &lt;<A HREF="http://video.msn.com/video.aspx?mkt=es-es">http://video.msn.com/video.aspx?mkt=es-es</A>&gt;
</I>&gt;<i> ------------------------------------------------------------------------
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> OpenIMSCore-Users mailing list
</I>&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">OpenIMSCore-Users at lists.berlios.de</A>
</I>&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">https://lists.berlios.de/mailman/listinfo/openimscore-users</A>
</I>&gt;<i>   
</I>

-- 
-----------------------------------------
Dipl. Eng. Dragos Vingarzan
Fraunhofer FOKUS/NGNI
Kaiserin-Augusta-Allee 31
10589 Berlin,Germany
Phone +49 (0)30 - 3463 - 7385
Mobile +49 (0)176 - 48 32 16 00
Web www.fokus.fraunhofer.de www.openimscore.org
We could change the world if God would give us the source code...
-----------------------------------------------------------------



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003678.html">[OpenIMSCore-Users] AS sends only a 200Ok,	but other messages are refused
</A></li>
	<LI>Next message: <A HREF="003679.html">[OpenIMSCore-Users] password for logging into vmware-image
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3681">[ date ]</a>
              <a href="thread.html#3681">[ thread ]</a>
              <a href="subject.html#3681">[ subject ]</a>
              <a href="author.html#3681">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/openimscore-users">More information about the OpenIMSCore-Users
mailing list</a><br>
</body></html>
