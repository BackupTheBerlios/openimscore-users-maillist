<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [OpenIMSCore-Users] Route header is not properly framed
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/openimscore-users/2006-December/index.html" >
   <LINK REL="made" HREF="mailto:openimscore-users%40lists.berlios.de?Subject=Re%3A%20%5BOpenIMSCore-Users%5D%20Route%20header%20is%20not%20properly%20framed&In-Reply-To=%3CH000008e00075f1e.1166082236.dakghar.aylus.com%40MHS%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000265.html">
   <LINK REL="Next"  HREF="000294.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[OpenIMSCore-Users] Route header is not properly framed</H1>
    <B>Babu George</B> 
    <A HREF="mailto:openimscore-users%40lists.berlios.de?Subject=Re%3A%20%5BOpenIMSCore-Users%5D%20Route%20header%20is%20not%20properly%20framed&In-Reply-To=%3CH000008e00075f1e.1166082236.dakghar.aylus.com%40MHS%3E"
       TITLE="[OpenIMSCore-Users] Route header is not properly framed">bgeorge at aylus.com
       </A><BR>
    <I>Thu Dec 14 08:43:56 CET 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="000265.html">[OpenIMSCore-Users] Initiating 3rd party Registration
</A></li>
        <LI>Next message: <A HREF="000294.html">[OpenIMSCore-Users] Route header is not properly framed
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#292">[ date ]</a>
              <a href="thread.html#292">[ thread ]</a>
              <a href="subject.html#292">[ subject ]</a>
              <a href="author.html#292">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>All,

 Looks like when SCSCF is adding a route header, it is not adding the
control character ^M at the end.So SIP application server will be having
trouble in deciphering this message.Can someone help me in resolving
this?

INVITE sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">bob at open-ims.test</A>;APP=swis.aylus.com SIP/2.0^M

Record-Route: &lt;sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">mt at scscf.open-ims.test</A>:6060;lr&gt;^M

Route: &lt;sip:192.168.41.54:5060;lr&gt;,
&lt;sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">iscmark at scscf.open-ims.test</A>:6060;lr;s=1;h=0;d=1&gt;

Record-Route: &lt;sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">mo at scscf.open-ims.test</A>:6060;lr&gt;^M

Record-Route: &lt;sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">mo at scscf.open-ims.test</A>:6060;lr&gt;^M

Record-Route: &lt;sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">mo at pcscf.open-ims.test</A>:5060;lr&gt;^M

Via: SIP/2.0/UDP 192.168.20.13:6060;branch=z9hG4bKd87a.53ddaec1.0^M

Via: SIP/2.0/UDP 192.168.20.13:6060;branch=z9hG4bKd87a.43ddaec1.0^M

Via: SIP/2.0/UDP 192.168.20.13:6060;branch=z9hG4bKd87a.33ddaec1.1^M

Via: SIP/2.0/UDP 192.168.20.13;branch=z9hG4bKd87a.c93fceb3.0^M

Via: SIP/2.0/UDP
192.168.20.13:5054;rport=5054;branch=<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">z9hG4bK-1-01-9161 at 192.168.20.13</A>^M

From: alice &lt;sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">alice at open-ims.test</A>&gt;;tag=1^M

To: sut &lt;sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">bob at open-ims.test</A>&gt;^M

Call-ID: <A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">1-9161 at 192.168.20.13</A>^M

CSeq: 1 INVITE^M

Contact: sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">alice at open-ims.test</A>^M

P-Asserted-Identity: &lt;sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">alice at open-ims.test</A>&gt;^M

P-Access-Network-Info: 3GPP-UTRAN-FDD;
utran-cell-id-3gpp=234151D0FCE11^M

Max-Forwards: 13^M

Subject: Performance Test^M

Thanks

Babu

-----Original Message-----
From: <A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">weik at fokus.fraunhofer.de</A> [mailto:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">weik at fokus.fraunhofer.de</A>] 
Sent: Monday, December 11, 2006 11:09 PM
To: Babu George
Cc: vingarzan; openimscore-users
Subject: Re: [OpenIMSCore-Users] Initiating 3rd party Registration

 

Hi Babu,

 

it is supported. Please modify an iFC (as combination of Trigger Point

and Application Server to contact) in the HSS Web console to point to

the application server and then add this iFC to the user's service

profile (e.g. default_sp).

 

Regards,

 

Peter

 

On Mon, 2006-12-11 at 21:31 +0530, Babu George wrote:

&gt;<i> Dragos,
</I>
&gt;<i>   I would like to know whether routing an INVITE message towards an
</I>application server from SCSCF based on IFC is supported?

&gt;<i> Thanks
</I>
&gt;<i> Babu
</I>
&gt;<i> 
</I>
&gt;<i> -----Original Message-----
</I>
&gt;<i> From: Dragos Vingarzan [mailto:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">vingarzan at fokus.fraunhofer.de</A>] 
</I>
&gt;<i> Sent: Monday, December 11, 2006 2:55 PM
</I>
&gt;<i> To: Babu George
</I>
&gt;<i> Cc: franz.edler; openimscore-users
</I>
&gt;<i> Subject: Re: Initiating 3rd party Registration
</I>
&gt;<i> 
</I>
&gt;<i> Hi George,
</I>
&gt;<i> 
</I>
&gt;<i> 3rd party registration is not yet implemented. Please see this thread:
</I>

&gt;<i>
</I><A HREF="http://lists.berlios.de/pipermail/openimscore-users/2006-December/000183">http://lists.berlios.de/pipermail/openimscore-users/2006-December/000183</A>
.html

&gt;<i> 
</I>
&gt;<i> -Dragos
</I>
&gt;<i> 
</I>
&gt;<i> Babu George wrote:
</I>
&gt;<i> &gt; Dragos,
</I>
&gt;<i> &gt;  Can I know what I need to do for getting a third party registration
</I>done by scscf towards my application server.If I assign the IP Address
of my application server to 'defult_as'(through HSS Gui), would that
work?

&gt;<i> &gt; Thanks
</I>
&gt;<i> &gt; Babu
</I>
&gt;<i> &gt;
</I>
&gt;<i> &gt; -----Original Message-----
</I>
&gt;<i> &gt; From: Dragos Vingarzan [mailto:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">vingarzan at fokus.fraunhofer.de</A>] 
</I>
&gt;<i> &gt; Sent: Monday, December 11, 2006 5:12 AM
</I>
&gt;<i> &gt; To: Babu George
</I>
&gt;<i> &gt; Cc: franz.edler; openimscore-users
</I>
&gt;<i> &gt; Subject: Re: [OpenIMSCore-Users] Call not getting through
</I>
&gt;<i> &gt;
</I>
&gt;<i> &gt; Hi Babu,
</I>
&gt;<i> &gt;
</I>
&gt;<i> &gt; It seems that you have only partially changed the IP address. Please
</I>

&gt;<i> &gt; change ALL occurences in pcscf.cfg, icscf.cfg and scscf.cfg. There
</I>are 

&gt;<i> &gt; more than just the first listen lines. That is why the S-CSCF fails
</I>to 

&gt;<i> &gt; loop the message to itself - you moved it from 127.0.0.1, yet when 
</I>
&gt;<i> &gt; looping it is still sending there - this is configured somewhere at
</I>the 

&gt;<i> &gt; bottom of the routing script.
</I>
&gt;<i> &gt;
</I>
&gt;<i> &gt; Well... I suggest that you do a replace all. Don't forget to update
</I>the 

&gt;<i> &gt; open-ims.dnszone!
</I>
&gt;<i> &gt;
</I>
&gt;<i> &gt; If you have all 3 diameter peers on the same machine (I-CSCF, S-CSCF
</I>and 

&gt;<i> &gt; HSS) than you can leave the icscf.xml, scscf.xml and
</I>DiametePeerHSS.xml 

&gt;<i> &gt; with the 127.0.0.1. However, as the DNS names are the same, once you
</I>

&gt;<i> &gt; change the open-ims.dnszone, you will have to change this too, as
</I>Franz 

&gt;<i> &gt; replied, or the peers won't connect. I usually just drop the bind 
</I>
&gt;<i> &gt; parameter from the Acceptor tag - then it will listen on all
</I>available 

&gt;<i> &gt; interfaces (be aware then that other people can connect to your
</I>Diameter 

&gt;<i> &gt; Peers if you also have this parameter AcceptUnknownPeers=&quot;1&quot; and do
</I>bad 

&gt;<i> &gt; things).
</I>
&gt;<i> &gt;
</I>
&gt;<i> &gt;
</I>
&gt;<i> &gt; -Dragos
</I>
&gt;<i> &gt;
</I>
&gt;<i> &gt; Babu George wrote:
</I>
&gt;<i> &gt;   
</I>
&gt;<i> &gt;&gt; All,
</I>
&gt;<i> &gt;&gt;  I changed the IP Address of SCSCF from 127.0.0.1 to the machine IP
</I>192.168.20.13(Changed in scscf.cfg and
/etc/bind/open-ims.dnszone).Registartion is getting through with the
change, but not call.Looks like in the termination leg system uses the
loopback address(127.0.0.1) instead of the assigned IP
Address(192.68.20.13).

&gt;<i> &gt;&gt; Is there anything I am missing here?
</I>
&gt;<i> &gt;&gt; Thanks
</I>
&gt;<i> &gt;&gt; Babu
</I>
&gt;<i> &gt;&gt;  
</I>
&gt;<i> &gt;&gt;
</I>
&gt;<i> &gt;&gt; -----Original Message-----
</I>
&gt;<i> &gt;&gt; From: Dragos Vingarzan [mailto:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">vingarzan at fokus.fraunhofer.de</A>] 
</I>
&gt;<i> &gt;&gt; Sent: Saturday, December 09, 2006 4:33 PM
</I>
&gt;<i> &gt;&gt; To: <A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">franz.edler at inode.at</A>
</I>
&gt;<i> &gt;&gt; Cc: Babu George; 'openimscore-users'
</I>
&gt;<i> &gt;&gt; Subject: Re: [OpenIMSCore-Users] Call not getting through
</I>
&gt;<i> &gt;&gt;
</I>
&gt;<i> &gt;&gt; Yes, that is the cause. So please use the Contact in the 200 OK, 
</I>
&gt;<i> &gt;&gt; sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">bob at 192.168.20.13</A>:5055;transport=UDP as Request-URI for the
</I>ACK. 

&gt;<i> &gt;&gt; Then all will be fine.
</I>
&gt;<i> &gt;&gt;
</I>
&gt;<i> &gt;&gt; However, I see a bug there in the P-CSCF in packet 25 - the Route
</I>header 

&gt;<i> &gt;&gt; should've been removed... investigating.
</I>
&gt;<i> &gt;&gt;
</I>
&gt;<i> &gt;&gt; -Dragos
</I>
&gt;<i> &gt;&gt;
</I>
&gt;<i> &gt;&gt; Franz Edler wrote:
</I>
&gt;<i> &gt;&gt;   
</I>
&gt;<i> &gt;&gt;     
</I>
&gt;<i> &gt;&gt;&gt;&gt;   I corrected it. Now ACK takes the following path.
</I>
&gt;<i> &gt;&gt;&gt;&gt;   Alice--PCSCF-SCSCF-SCSCF-PCSCF-ICSCF-PCCSF and then getting
</I>looped.

&gt;<i> &gt;&gt;&gt;&gt;   Not sure why PCSCF is sending message to ICSCF instead of
</I>sending to bob

&gt;<i> &gt;&gt;&gt;&gt;     
</I>
&gt;<i> &gt;&gt;&gt;&gt;       
</I>
&gt;<i> &gt;&gt;&gt;&gt;         
</I>
&gt;<i> &gt;&gt;&gt; It is, because your ACK is addressed to BoB's AoR and not towards
</I>its

&gt;<i> &gt;&gt;&gt; Contact received in 200 OK.
</I>
&gt;<i> &gt;&gt;&gt;
</I>
&gt;<i> &gt;&gt;&gt; Cheers
</I>
&gt;<i> &gt;&gt;&gt; Franz
</I>
&gt;<i> &gt;&gt;&gt;
</I>
&gt;<i> &gt;&gt;&gt;
</I>
&gt;<i> &gt;&gt;&gt;   
</I>
&gt;<i> &gt;&gt;&gt;     
</I>
&gt;<i> &gt;&gt;&gt;       
</I>
&gt;<i> &gt;&gt;   
</I>
&gt;<i> &gt;&gt;     
</I>
&gt;<i> &gt;
</I>
&gt;<i> &gt;
</I>
&gt;<i> &gt;   
</I>
&gt;<i> 
</I>
&gt;<i> 
</I>
&gt;<i> -- 
</I>
&gt;<i> -----------------------------------------
</I>
&gt;<i> Dipl. Eng. Dragos Vingarzan
</I>
&gt;<i> FOKUS/NGNI
</I>
&gt;<i> Kaiserin-Augusta-Allee 31
</I>
&gt;<i> 10589 Berlin,Germany
</I>
&gt;<i> Phone +49 (0)30 - 3463 - 7385
</I>
&gt;<i> Mobile +49 (0)163 - 159 - 5221
</I>
&gt;<i> eMail <A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">vingarzan at fokus.fraunhofer.de</A>
</I>
&gt;<i> Web www.fokus.fraunhofer.de
</I>
&gt;<i> We could change the world if God would give us the source code...
</I>
&gt;<i> -----------------------------------------------------------------
</I>
&gt;<i> 
</I>
&gt;<i> 
</I>
&gt;<i> _______________________________________________
</I>
&gt;<i> OpenIMSCore-Users mailing list
</I>
&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">OpenIMSCore-Users at lists.berlios.de</A>
</I>
&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">https://lists.berlios.de/mailman/listinfo/openimscore-users</A>
</I>
 

 


-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="https://lists.berlios.de/pipermail/openimscore-users/attachments/20061214/daf035c7/attachment.html">https://lists.berlios.de/pipermail/openimscore-users/attachments/20061214/daf035c7/attachment.html</A>&gt;
-------------- next part --------------
A non-text attachment was scrubbed...
Name: Invite
Type: application/octet-stream
Size: 4861 bytes
Desc: not available
URL: &lt;<A HREF="https://lists.berlios.de/pipermail/openimscore-users/attachments/20061214/daf035c7/attachment.obj">https://lists.berlios.de/pipermail/openimscore-users/attachments/20061214/daf035c7/attachment.obj</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000265.html">[OpenIMSCore-Users] Initiating 3rd party Registration
</A></li>
	<LI>Next message: <A HREF="000294.html">[OpenIMSCore-Users] Route header is not properly framed
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#292">[ date ]</a>
              <a href="thread.html#292">[ thread ]</a>
              <a href="subject.html#292">[ subject ]</a>
              <a href="author.html#292">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/openimscore-users">More information about the OpenIMSCore-Users
mailing list</a><br>
</body></html>
