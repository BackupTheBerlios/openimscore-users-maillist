<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [OpenIMSCore-Users] &quot;Re: Not Registered! You must register firstwith a S-CSCF&quot;
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/openimscore-users/2006-December/index.html" >
   <LINK REL="made" HREF="mailto:openimscore-users%40lists.berlios.de?Subject=Re%3A%20%5BOpenIMSCore-Users%5D%20%22Re%3A%20Not%20Registered%21%20You%20must%20register%0A%20firstwith%20a%20S-CSCF%22&In-Reply-To=%3C458AB7BE.7040309%40fokus.fraunhofer.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000360.html">
   <LINK REL="Next"  HREF="000365.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[OpenIMSCore-Users] &quot;Re: Not Registered! You must register firstwith a S-CSCF&quot;</H1>
    <B>Dragos Vingarzan</B> 
    <A HREF="mailto:openimscore-users%40lists.berlios.de?Subject=Re%3A%20%5BOpenIMSCore-Users%5D%20%22Re%3A%20Not%20Registered%21%20You%20must%20register%0A%20firstwith%20a%20S-CSCF%22&In-Reply-To=%3C458AB7BE.7040309%40fokus.fraunhofer.de%3E"
       TITLE="[OpenIMSCore-Users] &quot;Re: Not Registered! You must register firstwith a S-CSCF&quot;">vingarzan at fokus.fraunhofer.de
       </A><BR>
    <I>Thu Dec 21 17:35:10 CET 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="000360.html">[OpenIMSCore-Users] &quot;Re: Not Registered! You must register	firstwith a S-CSCF&quot;
</A></li>
        <LI>Next message: <A HREF="000365.html">[OpenIMSCore-Users] &quot;Re: Not Registered! You must register firstwith a S-CSCF&quot;
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#364">[ date ]</a>
              <a href="thread.html#364">[ thread ]</a>
              <a href="subject.html#364">[ subject ]</a>
              <a href="author.html#364">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Carlos,

Thanx for the extensive debug data. This helped me pin-point the problem
immediately - in pcscsf.cfg you have forgot to change a parameter - the
sip2ims_via. Please update that to the listen address that you have
configured in sip2ims.cfg. This should fix the problem.

-Dragos



Carlos Jer&#243;nimo wrote:
&gt;<i>  please help me...its a work for university, and the time not much.
</I>&gt;<i> i will send you all i think is important to explain my problem.
</I>&gt;<i>
</I>&gt;<i> I can registered bob for example, but when i try make a call, this
</I>&gt;<i> erro apears me:Not Registered! You must register first with a S-CSCF
</I>&gt;<i>
</I>&gt;<i> in anex the files: trace.pcap, kphoneshell, icscf.cfg icscf.sh
</I>&gt;<i> pcscf.cfg pcscf.sh scscf.sh scscf.cfg sip2ims.cfg sip2ims.sh
</I>&gt;<i>
</I>&gt;<i> ************my kphone options*********
</I>&gt;<i>
</I>&gt;<i> name:bob
</I>&gt;<i> use part of dip url:bob
</I>&gt;<i> host part of sip url:open-ims.test
</I>&gt;<i> outboundproxy: 192.168.0.11:3060 &lt;<A HREF="http://192.168.0.11:3060">http://192.168.0.11:3060</A>&gt;
</I>&gt;<i> autentication name:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">bob at open-ims.test</A> &lt;mailto:name:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">bob at open-ims.test</A>&gt;
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> **********************************shell pcscf.sh when i try a
</I>&gt;<i> call************************************************
</I>&gt;<i>
</I>&gt;<i> INF:P-CSCF:[ 238] C: &lt;1://192.168.0.11:5062&gt; Exp:[ 861] R:[ 1]
</I>&gt;<i> &lt;sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">bob at 192.168.0.11</A>:5062;transport=udp&gt;
</I>&gt;<i>  5(7158) INF:P-CSCF:         SR: &lt;sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">orig at scscf.open-ims.test</A>:6060;lr&gt;
</I>&gt;<i>  5(7158) INF:P-CSCF:        NAT:&lt; 192.168.0.11:3060
</I>&gt;<i> &lt;<A HREF="http://192.168.0.11:3060">http://192.168.0.11:3060</A>&gt;&gt;
</I>&gt;<i>  5(7158) INF:P-CSCF:          P: D[X] &lt;sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">bob at open-ims.test</A>
</I>&gt;<i> &lt;mailto:sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">bob at open-ims.test</A>&gt;&gt;
</I>&gt;<i>  5(7158) INF:P-CSCF:----------  Registrar Contents end ----------
</I>&gt;<i>  5(7158) INF:P-CSCF:----------  Registrar Contents begin --------
</I>&gt;<i>  5(7158) INF:P-CSCF:[ 238] C: &lt;1://192.168.0.11:5062&gt; Exp:[ 851] R:[
</I>&gt;<i> 1] &lt;sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">bob at 192.168.0.11</A>:5062;transport=udp&gt;
</I>&gt;<i>  5(7158) INF:P-CSCF:         SR: &lt; sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">orig at scscf.open-ims.test</A>:6060;lr&gt;
</I>&gt;<i>  5(7158) INF:P-CSCF:        NAT:&lt;192.168.0.11:3060
</I>&gt;<i> &lt;<A HREF="http://192.168.0.11:3060">http://192.168.0.11:3060</A>&gt;&gt;
</I>&gt;<i>  5(7158) INF:P-CSCF:          P: D[X] &lt; sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">bob at open-ims.test</A>
</I>&gt;<i> &lt;mailto:sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">bob at open-ims.test</A>&gt;&gt;
</I>&gt;<i>  5(7158) INF:P-CSCF:----------  Registrar Contents end ----------
</I>&gt;<i>  1(7154) DBG:P-CSCF:cscf_get_originating_contact: 1://192.168.0.11:3060
</I>&gt;<i>  1(7154) DBG:P-CSCF:cscf_get_terminating_contact: 0://open- ims.test:0
</I>&gt;<i>  1(7154) &gt;&gt;       Orig_Initial
</I>&gt;<i>  1(7154) DBG:P-CSCF:P_is_registered: Looking if registered
</I>&gt;<i>  1(7154) DBG:P-CSCF:P_is_registered: Looking for &lt;1://192.168.0.11:3060&gt;
</I>&gt;<i>  5(7158) INF:P-CSCF:----------  Registrar Contents begin --------
</I>&gt;<i>  5(7158) INF:P-CSCF:[ 238] C: &lt;1://192.168.0.11:5062&gt; Exp:[ 841] R:[
</I>&gt;<i> 1] &lt;sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">bob at 192.168.0.11</A>:5062;transport=udp&gt;
</I>&gt;<i>  5(7158) INF:P-CSCF:         SR: &lt;sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">orig at scscf.open-ims.test</A>:6060;lr&gt;
</I>&gt;<i>  5(7158) INF:P-CSCF:        NAT:&lt; 192.168.0.11:3060
</I>&gt;<i> &lt;<A HREF="http://192.168.0.11:3060">http://192.168.0.11:3060</A>&gt;&gt;
</I>&gt;<i>  5(7158) INF:P-CSCF:          P: D[X] &lt;sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">bob at open-ims.test</A>
</I>&gt;<i> &lt;mailto:sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">bob at open-ims.test</A>&gt;&gt;
</I>&gt;<i>  5(7158) INF:P-CSCF:----------  Registrar Contents end ----------
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> ***********shell icscf.sh when i registered bob, when i try a call,
</I>&gt;<i> nothing happens ******************
</I>&gt;<i>
</I>&gt;<i> DBG:sm_process(): Peer hss.open-ims.test       State R_Open    Event
</I>&gt;<i> R_Rcv_Message
</I>&gt;<i>  1(7193) INFO:I-CSCF:Cx_get_result_code: Failed finding avp
</I>&gt;<i>  1(7193) INFO:I-CSCF:Cx_get_server_name: Failed finding avp
</I>&gt;<i>  1(7193) INFO:I-CSCF:Cx_get_capabilities: Failed finding avp
</I>&gt;<i> 18(7457) DBG:sm_process(): Peer hss.open-ims.test       State
</I>&gt;<i> R_Open    Event R_Rcv_Message
</I>&gt;<i>  1(7193) INFO:I-CSCF:Cx_get_result_code: Failed finding avp
</I>&gt;<i>  1(7193) INFO:I-CSCF:Cx_get_capabilities: Failed finding avp
</I>&gt;<i> 17(7209) --- Peer List: ---
</I>&gt;<i> 17(7209)  S[R_Open] hss.open-ims.test:3868 D[ ]
</I>&gt;<i> 17(7209) ------------------
</I>&gt;<i> 18(7457) DBG:sm_process(): Peer hss.open-ims.test       State
</I>&gt;<i> R_Open    Event R_Rcv_Message
</I>&gt;<i> 17(7209) --- Peer List: ---
</I>&gt;<i> 17(7209)  S[R_Open] hss.open-ims.test:3868 D[ ]
</I>&gt;<i> 17(7209) ------------------
</I>&gt;<i> 17(7209) --- Peer List: ---
</I>&gt;<i> 17(7209)  S[R_Open] hss.open-ims.test:3868 D[ ]
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> ***********shell scscf.sh when i registered bob, when i try a call,
</I>&gt;<i> nothing happens ******************
</I>&gt;<i>
</I>&gt;<i> ------------------
</I>&gt;<i>  5(7230) INF:S-CSCF:----------  Registrar Contents begin --------
</I>&gt;<i>  5(7230) INF:S-CSCF:----------  Registrar Contents end ----------
</I>&gt;<i> 18(7459) DBG:sm_process(): Peer hss.open-ims.test       State
</I>&gt;<i> R_Open    Event R_Rcv_Message
</I>&gt;<i>  2(7227) DBG:S-CSCF:S_is_authorized: UE said:
</I>&gt;<i> 8799b93c8ef82396072983322a6a48ce, but we have 5b846c04823070c8 and
</I>&gt;<i> expect 8799b93c8ef82396072983322a6a48ce ha1
</I>&gt;<i> 0b90f1d28ae33b37b3edbc72720d58cd
</I>&gt;<i> 18(7459) DBG:sm_process(): Peer hss.open-ims.test       State
</I>&gt;<i> R_Open    Event R_Rcv_Message
</I>&gt;<i> 17(7242) --- Peer List: ---
</I>&gt;<i> 17(7242)  S[R_Open] hss.open-ims.test:3868 D[ ]
</I>&gt;<i> 17(7242) ------------------
</I>&gt;<i>  3(7228) sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">term at pcscf.open-ims.test</A>:406017(7242) --- Peer List: ---
</I>&gt;<i> 17(7242)  S[R_Open] hss.open-ims.test:3868 D[ ]
</I>&gt;<i> 17(7242) ------------------
</I>&gt;<i> 17(7242) --- Peer List: ---
</I>&gt;<i> 17(7242)  S[R_Open] hss.open-ims.test:3868 D[ ]
</I>&gt;<i> 17(7242) ------------------
</I>&gt;<i>  5(7230) INF:S-CSCF:----------  Registrar Contents begin --------
</I>&gt;<i>  5(7230) INF:S-CSCF:[  52] P: &lt;sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">bob at open-ims.test</A>
</I>&gt;<i> &lt;mailto:sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">bob at open-ims.test</A>&gt;&gt; R[ 1]
</I>&gt;<i>  5(7230) INF:S-CSCF:         C: &lt;
</I>&gt;<i> sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">bob at 192.168.0.11</A>:5062;transport=udp&gt; Exp:[ 891]
</I>&gt;<i>  5(7230) INF:S-CSCF:           Path:&lt;sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">term at pcscf.open-ims.test</A>:4060;lr&gt;
</I>&gt;<i>  5(7230) INF:S-CSCF:           UA: &lt;kphone/4.2&gt;
</I>&gt;<i>  5(7230) INF:S-CSCF:         S: Event[0] Exp:[ 922] &lt;sip:
</I>&gt;<i> pcscf.open-ims.test:4060&gt;
</I>&gt;<i>  5(7230) INF:S-CSCF:----------  Registrar Contents end ----------
</I>&gt;<i> 17(7242) --- Peer List: ---
</I>&gt;<i> 17(7242)  S[R_Open] hss.open-ims.test:3868 D[ ]
</I>&gt;<i> 17(7242) ------------------
</I>&gt;<i> 17(7242) --- Peer List: ---
</I>&gt;<i> 17(7242)  S[R_Open] hss.open-ims.test:3868 D[ ]
</I>&gt;<i> 17(7242) ------------------
</I>&gt;<i> 17(7242) --- Peer List: ---
</I>&gt;<i> 17(7242)  S[R_Open] hss.open-ims.test:3868 D[ ]
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> ***********shell sip2ims.sh when i registered bob, when i try a call,
</I>&gt;<i> nothing happens ******************
</I>&gt;<i>
</I>&gt;<i> ===
</I>&gt;<i>  3(7259) INF:SIP2IMS:sip2ims_get_public_identity:
</I>&gt;<i> &lt;sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">bob at open-ims.test</A> &lt;mailto:sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">bob at open-ims.test</A>&gt;&gt;
</I>&gt;<i>  3(7259) INF:SIP2IMS:Gw_MD5_to_AKA:
</I>&gt;<i> ===
</I>&gt;<i>
</I>&gt;<i> ---
</I>&gt;<i> Authorization: Digest username=&quot; <A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">bob at open-ims.test</A>
</I>&gt;<i> &lt;mailto:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">bob at open-ims.test</A>&gt;&quot;, realm=&quot;open-ims.test&quot;,
</I>&gt;<i> ===
</I>&gt;<i>  2(7258) DBG:SIP2IMS:Gw_AKA_to_MD5: 401
</I>&gt;<i>  2(7258) INF:SIP2IMS:sip2ims_get_public_identity: &lt;
</I>&gt;<i> sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">bob at open-ims.test</A> &lt;mailto:sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">bob at open-ims.test</A>&gt;&gt;
</I>&gt;<i>  2(7258) INF:SIP2IMS:Gw_AKA_to_MD5:
</I>&gt;<i> +++
</I>&gt;<i> Digest realm=&quot;open-ims.test&quot;,
</I>&gt;<i> nonce=&quot;yfLi5IuFp87fVP4RWoaCNwAAAAAAQQAAiOYjQHnV8xo=&quot;, algorithm=AKAv1-MD5
</I>&gt;<i> ---
</I>&gt;<i> WWW-Authenticate: Digest username=&quot; <A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">bob at open-ims.test</A>
</I>&gt;<i> &lt;mailto:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">bob at open-ims.test</A>&gt;&quot;, realm=&quot;open-ims.test&quot;,
</I>&gt;<i> opaque=&quot;AKAv1-MD5yfLi5IuFp87fVP4RWoaCNwAAAAAAQQAAiOYjQHnV8xo=&quot;,
</I>&gt;<i> nonce=&quot;45888816db76bef7098e601f6427a73b2907783c&quot;, algorithm=MD5
</I>&gt;<i> +++
</I>&gt;<i>  3(7259) INF:SIP2IMS:translate_authorization:
</I>&gt;<i>
</I>&gt;<i>  AUTHORIZED
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>  3(7259) INF:SIP2IMS:sip2ims_get_public_identity:
</I>&gt;<i> &lt;sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">bob at open-ims.test</A> &lt;mailto:sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">bob at open-ims.test</A>&gt;&gt;
</I>&gt;<i>  3(7259) INF:SIP2IMS:Gw_MD5_to_AKA:
</I>&gt;<i> ===
</I>&gt;<i> Digest username=&quot;<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">bob at open-ims.test</A> &lt;mailto:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">bob at open-ims.test</A>&gt;&quot;,
</I>&gt;<i> realm=&quot;open-ims.test&quot;,
</I>&gt;<i> nonce=&quot;45888816db76bef7098e601f6427a73b2907783c&quot;, uri=&quot;sip:
</I>&gt;<i> 192.168.0.11 &lt;<A HREF="http://192.168.0.11">http://192.168.0.11</A>&gt;&quot;, cnonce=&quot;abcdefghi&quot;, nc=00000001,
</I>&gt;<i> response=&quot;a3f6214bc9592069941d07f071a82dd3&quot;,
</I>&gt;<i> opaque=&quot;AKAv1-MD5yfLi5IuFp87fVP4RWoaCNwAAAAAAQQAAiOYjQHnV8xo=&quot;,
</I>&gt;<i> algorithm=&quot;MD5&quot;
</I>&gt;<i> ---
</I>&gt;<i> Authorization: Digest username=&quot;<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">bob at open-ims.test</A>
</I>&gt;<i> &lt;mailto:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">bob at open-ims.test</A>&gt;&quot;, realm=&quot;open-ims.test&quot;,
</I>&gt;<i> nonce=&quot;yfLi5IuFp87fVP4RWoaCNwAAAAAAQQAAiOYjQHnV8xo=&quot;, uri=&quot;sip:
</I>&gt;<i> 192.168.0.11 &lt;<A HREF="http://192.168.0.11">http://192.168.0.11</A>&gt;&quot;,
</I>&gt;<i> response=&quot;082e640f6f8bd96a7545f5f6687a02aa&quot;, algorithm=&quot;AKAv1-MD5&quot;,
</I>&gt;<i> *
</I>&gt;<i> thanks
</I>&gt;<i> *
</I>

-- 
-----------------------------------------
Dipl. Eng. Dragos Vingarzan
FOKUS/NGNI
Kaiserin-Augusta-Allee 31
10589 Berlin,Germany
Phone +49 (0)30 - 3463 - 7385
Mobile +49 (0)163 - 159 - 5221
eMail <A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">vingarzan at fokus.fraunhofer.de</A>
Web www.fokus.fraunhofer.de
We could change the world if God would give us the source code...
-----------------------------------------------------------------


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000360.html">[OpenIMSCore-Users] &quot;Re: Not Registered! You must register	firstwith a S-CSCF&quot;
</A></li>
	<LI>Next message: <A HREF="000365.html">[OpenIMSCore-Users] &quot;Re: Not Registered! You must register firstwith a S-CSCF&quot;
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#364">[ date ]</a>
              <a href="thread.html#364">[ thread ]</a>
              <a href="subject.html#364">[ subject ]</a>
              <a href="author.html#364">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/openimscore-users">More information about the OpenIMSCore-Users
mailing list</a><br>
</body></html>
