<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [OpenIMSCore-Users] &quot;Re: Not Registered! You must register	firstwith a S-CSCF&quot;
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/openimscore-users/2006-December/index.html" >
   <LINK REL="made" HREF="mailto:openimscore-users%40lists.berlios.de?Subject=Re%3A%20%5BOpenIMSCore-Users%5D%20%22Re%3A%20Not%20Registered%21%20You%20must%20register%0A%09firstwith%20a%20S-CSCF%22&In-Reply-To=%3CH000008e0007960c.1166592485.dakghar.aylus.com%40MHS%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000355.html">
   <LINK REL="Next"  HREF="000357.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[OpenIMSCore-Users] &quot;Re: Not Registered! You must register	firstwith a S-CSCF&quot;</H1>
    <B>Babu George</B> 
    <A HREF="mailto:openimscore-users%40lists.berlios.de?Subject=Re%3A%20%5BOpenIMSCore-Users%5D%20%22Re%3A%20Not%20Registered%21%20You%20must%20register%0A%09firstwith%20a%20S-CSCF%22&In-Reply-To=%3CH000008e0007960c.1166592485.dakghar.aylus.com%40MHS%3E"
       TITLE="[OpenIMSCore-Users] &quot;Re: Not Registered! You must register	firstwith a S-CSCF&quot;">bgeorge at aylus.com
       </A><BR>
    <I>Wed Dec 20 06:28:05 CET 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="000355.html">[OpenIMSCore-Users] &quot;Re: Not Registered! You must register	firstwith a S-CSCF&quot;
</A></li>
        <LI>Next message: <A HREF="000357.html">[OpenIMSCore-Users] &quot;Re: Not Registered! You must register	firstwith a S-CSCF&quot;
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#356">[ date ]</a>
              <a href="thread.html#356">[ thread ]</a>
              <a href="subject.html#356">[ subject ]</a>
              <a href="author.html#356">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Carlos,

  It would be good if you could capture the ethereal trace corresponding
to Registration also.

  Set the filter for sip&amp;dns.

Regards

Babu

 

  _____  

From: Carlos Jer&#243;nimo [mailto:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">carjer at gmail.com</A>] 
Sent: Wednesday, December 20, 2006 6:33 AM
To: Dragos Vingarzan
Cc: <A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">openimscore-users at lists.berlios.de</A>
Subject: Re: [OpenIMSCore-Users] &quot;Re: Not Registered! You must register
firstwith a S-CSCF&quot;

 

  

please help me...its a work for university, and the time not much.
i will send you all i think is important to explain my problem.

I can registered bob for example, but when i try make a call, this erro
apears me:Not Registered! You must register first with a S-CSCF

in anex the files: trace.pcap, kphoneshell, icscf.cfg icscf.sh pcscf.cfg
pcscf.sh scscf.sh scscf.cfg sip2ims.cfg sip2ims.sh 

************my kphone options*********

name:bob
use part of dip url:bob
host part of sip url:open-ims.test
outboundproxy: 192.168.0.11:3060
autentication name:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">bob at open-ims.test</A>


**********************************shell pcscf.sh when i try a
call************************************************ 

INF:P-CSCF:[ 238] C: &lt;1://192.168.0.11:5062&gt; Exp:[ 861] R:[ 1]
&lt;sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">bob at 192.168.0.11</A>:5062;transport=udp&gt;
 5(7158) INF:P-CSCF:         SR: &lt;sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">orig at scscf.open-ims.test</A>:6060;lr&gt;
 5(7158) INF:P-CSCF:        NAT:&lt; 192.168.0.11:3060&gt;
 5(7158) INF:P-CSCF:          P: D[X] &lt;sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">bob at open-ims.test</A>&gt;
 5(7158) INF:P-CSCF:----------  Registrar Contents end ---------- 
 5(7158) INF:P-CSCF:----------  Registrar Contents begin --------
 5(7158) INF:P-CSCF:[ 238] C: &lt;1://192.168.0.11:5062&gt; Exp:[ 851] R:[ 1]
&lt;sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">bob at 192.168.0.11</A>:5062;transport=udp&gt;
 5(7158) INF:P-CSCF:         SR: &lt; sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">orig at scscf.open-ims.test</A>:6060;lr&gt;
 5(7158) INF:P-CSCF:        NAT:&lt;192.168.0.11:3060&gt;
 5(7158) INF:P-CSCF:          P: D[X] &lt; sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">bob at open-ims.test</A>&gt;
 5(7158) INF:P-CSCF:----------  Registrar Contents end ----------
 1(7154) DBG:P-CSCF:cscf_get_originating_contact: 1://192.168.0.11:3060
 1(7154) DBG:P-CSCF:cscf_get_terminating_contact: 0://open- ims.test:0
 1(7154) &gt;&gt;       Orig_Initial
 1(7154) DBG:P-CSCF:P_is_registered: Looking if registered
 1(7154) DBG:P-CSCF:P_is_registered: Looking for &lt;1://192.168.0.11:3060&gt;
 5(7158) INF:P-CSCF:----------  Registrar Contents begin -------- 
 5(7158) INF:P-CSCF:[ 238] C: &lt;1://192.168.0.11:5062&gt; Exp:[ 841] R:[ 1]
&lt;sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">bob at 192.168.0.11</A>:5062;transport=udp&gt;
 5(7158) INF:P-CSCF:         SR: &lt;sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">orig at scscf.open-ims.test</A>:6060;lr&gt;
 5(7158) INF:P-CSCF:        NAT:&lt; 192.168.0.11:3060&gt;
 5(7158) INF:P-CSCF:          P: D[X] &lt;sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">bob at open-ims.test</A>&gt;
 5(7158) INF:P-CSCF:----------  Registrar Contents end ---------- 



***********shell icscf.sh when i registered bob, when i try a call,
nothing happens ******************

DBG:sm_process(): Peer hss.open-ims.test       State R_Open    Event
R_Rcv_Message
 1(7193) INFO:I-CSCF:Cx_get_result_code: Failed finding avp 
 1(7193) INFO:I-CSCF:Cx_get_server_name: Failed finding avp
 1(7193) INFO:I-CSCF:Cx_get_capabilities: Failed finding avp
18(7457) DBG:sm_process(): Peer hss.open-ims.test       State R_Open
Event R_Rcv_Message 
 1(7193) INFO:I-CSCF:Cx_get_result_code: Failed finding avp
 1(7193) INFO:I-CSCF:Cx_get_capabilities: Failed finding avp
17(7209) --- Peer List: ---
17(7209)  S[R_Open] hss.open-ims.test:3868 D[ ]
17(7209) ------------------ 
18(7457) DBG:sm_process(): Peer hss.open-ims.test       State R_Open
Event R_Rcv_Message
17(7209) --- Peer List: ---
17(7209)  S[R_Open] hss.open-ims.test:3868 D[ ]
17(7209) ------------------
17(7209) --- Peer List: --- 
17(7209)  S[R_Open] hss.open-ims.test:3868 D[ ]





***********shell scscf.sh when i registered bob, when i try a call,
nothing happens ******************

------------------
 5(7230) INF:S-CSCF:----------  Registrar Contents begin -------- 
 5(7230) INF:S-CSCF:----------  Registrar Contents end ----------
18(7459) DBG:sm_process(): Peer hss.open-ims.test       State R_Open
Event R_Rcv_Message
 2(7227) DBG:S-CSCF:S_is_authorized: UE said:
8799b93c8ef82396072983322a6a48ce, but we have 5b846c04823070c8 and
expect 8799b93c8ef82396072983322a6a48ce ha1
0b90f1d28ae33b37b3edbc72720d58cd 
18(7459) DBG:sm_process(): Peer hss.open-ims.test       State R_Open
Event R_Rcv_Message
17(7242) --- Peer List: ---
17(7242)  S[R_Open] hss.open-ims.test:3868 D[ ]
17(7242) ------------------
 3(7228) sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">term at pcscf.open-ims.test</A>:406017(7242) --- Peer List: ---
17(7242)  S[R_Open] hss.open-ims.test:3868 D[ ]
17(7242) ------------------
17(7242) --- Peer List: ---
17(7242)  S[R_Open] hss.open-ims.test:3868 D[ ] 
17(7242) ------------------
 5(7230) INF:S-CSCF:----------  Registrar Contents begin --------
 5(7230) INF:S-CSCF:[  52] P: &lt;sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">bob at open-ims.test</A>&gt; R[ 1]
 5(7230) INF:S-CSCF:         C: &lt;
sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">bob at 192.168.0.11</A>:5062;transport=udp&gt; Exp:[ 891]
 5(7230) INF:S-CSCF:
Path:&lt;sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">term at pcscf.open-ims.test</A>:4060;lr&gt;
 5(7230) INF:S-CSCF:           UA: &lt;kphone/4.2&gt;
 5(7230) INF:S-CSCF:         S: Event[0] Exp:[ 922] &lt;sip:
pcscf.open-ims.test:4060&gt;
 5(7230) INF:S-CSCF:----------  Registrar Contents end ----------
17(7242) --- Peer List: ---
17(7242)  S[R_Open] hss.open-ims.test:3868 D[ ]
17(7242) ------------------
17(7242) --- Peer List: --- 
17(7242)  S[R_Open] hss.open-ims.test:3868 D[ ]
17(7242) ------------------
17(7242) --- Peer List: ---
17(7242)  S[R_Open] hss.open-ims.test:3868 D[ ]





***********shell sip2ims.sh when i registered bob, when i try a call,
nothing happens ****************** 

===
 3(7259) INF:SIP2IMS:sip2ims_get_public_identity:
&lt;sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">bob at open-ims.test</A>&gt;
 3(7259) INF:SIP2IMS:Gw_MD5_to_AKA:
===

---
Authorization: Digest username=&quot; <A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">bob at open-ims.test</A>&quot;,
realm=&quot;open-ims.test&quot;,
===
 2(7258) DBG:SIP2IMS:Gw_AKA_to_MD5: 401
 2(7258) INF:SIP2IMS:sip2ims_get_public_identity: &lt;
sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">bob at open-ims.test</A>&gt;
 2(7258) INF:SIP2IMS:Gw_AKA_to_MD5:
+++
Digest realm=&quot;open-ims.test&quot;,
nonce=&quot;yfLi5IuFp87fVP4RWoaCNwAAAAAAQQAAiOYjQHnV8xo=&quot;,
algorithm=AKAv1-MD5
---
WWW-Authenticate: Digest username=&quot; <A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">bob at open-ims.test</A>&quot;,
realm=&quot;open-ims.test&quot;,
opaque=&quot;AKAv1-MD5yfLi5IuFp87fVP4RWoaCNwAAAAAAQQAAiOYjQHnV8xo=&quot;,
nonce=&quot;45888816db76bef7098e601f6427a73b2907783c&quot;, algorithm=MD5 
+++
 3(7259) INF:SIP2IMS:translate_authorization:

 AUTHORIZED


 3(7259) INF:SIP2IMS:sip2ims_get_public_identity:
&lt;sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">bob at open-ims.test</A>&gt;
 3(7259) INF:SIP2IMS:Gw_MD5_to_AKA: 
===
Digest username=&quot;<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">bob at open-ims.test</A>&quot;, realm=&quot;open-ims.test&quot;,
nonce=&quot;45888816db76bef7098e601f6427a73b2907783c&quot;, uri=&quot;sip:
192.168.0.11&quot;, cnonce=&quot;abcdefghi&quot;, nc=00000001,
response=&quot;a3f6214bc9592069941d07f071a82dd3&quot;,
opaque=&quot;AKAv1-MD5yfLi5IuFp87fVP4RWoaCNwAAAAAAQQAAiOYjQHnV8xo=&quot;,
algorithm=&quot;MD5&quot; 
---
Authorization: Digest username=&quot;<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">bob at open-ims.test</A>&quot;,
realm=&quot;open-ims.test&quot;,
nonce=&quot;yfLi5IuFp87fVP4RWoaCNwAAAAAAQQAAiOYjQHnV8xo=&quot;, uri=&quot;sip:
192.168.0.11&quot;, response=&quot;082e640f6f8bd96a7545f5f6687a02aa&quot;,
algorithm=&quot;AKAv1-MD5&quot;,

thanks


-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="https://lists.berlios.de/pipermail/openimscore-users/attachments/20061220/778cacf4/attachment.html">https://lists.berlios.de/pipermail/openimscore-users/attachments/20061220/778cacf4/attachment.html</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000355.html">[OpenIMSCore-Users] &quot;Re: Not Registered! You must register	firstwith a S-CSCF&quot;
</A></li>
	<LI>Next message: <A HREF="000357.html">[OpenIMSCore-Users] &quot;Re: Not Registered! You must register	firstwith a S-CSCF&quot;
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#356">[ date ]</a>
              <a href="thread.html#356">[ thread ]</a>
              <a href="subject.html#356">[ subject ]</a>
              <a href="author.html#356">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/openimscore-users">More information about the OpenIMSCore-Users
mailing list</a><br>
</body></html>
