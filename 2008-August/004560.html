<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [OpenIMSCore-Users] Problem with CDiameterPeer
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/openimscore-users/2008-August/index.html" >
   <LINK REL="made" HREF="mailto:openimscore-users%40lists.berlios.de?Subject=Re%3A%20%5BOpenIMSCore-Users%5D%20Problem%20with%20CDiameterPeer&In-Reply-To=%3CBBE61D1553D8A34F812FF87377B2935F04AAC1B9%40ATL1VEXC020.usdom003.tco.tc%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="004563.html">
   <LINK REL="Next"  HREF="004561.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[OpenIMSCore-Users] Problem with CDiameterPeer</H1>
    <B>Doug Sauder</B> 
    <A HREF="mailto:openimscore-users%40lists.berlios.de?Subject=Re%3A%20%5BOpenIMSCore-Users%5D%20Problem%20with%20CDiameterPeer&In-Reply-To=%3CBBE61D1553D8A34F812FF87377B2935F04AAC1B9%40ATL1VEXC020.usdom003.tco.tc%3E"
       TITLE="[OpenIMSCore-Users] Problem with CDiameterPeer">doug at broadsoft.com
       </A><BR>
    <I>Wed Aug 27 21:29:30 CEST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="004563.html">[OpenIMSCore-Users] Remote register with X-lite
</A></li>
        <LI>Next message: <A HREF="004561.html">[OpenIMSCore-Users] how to add an AS ?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4560">[ date ]</a>
              <a href="thread.html#4560">[ thread ]</a>
              <a href="subject.html#4560">[ subject ]</a>
              <a href="author.html#4560">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi!
 
I have had limited success getting OpenIMS working.  My current problem
is, I believe, that the cdp module in the S-CSCF is unable to connect to
the HSS.  Here's the section from the debug log file for the S-CSCF:
 
 0(15033) ERROR:get_routing_peer(): No connected DefaultRoute peer
found.
 0(15033) ERROR:AAASendRecvMessage(): Can't find a suitable connected
peer in the routing table.
...
 0(15033) ERR:S-CSCF:S_challenge: Error retrieving an auth vector

This happens when OpenIMS receives a REGISTER request without an
Authorization header.  I'm guessing that the S-CSCF tries to get the
authorization vector from the HSS and fails.
 
The registration was working last week.  Now it's not.  I have been
tracing the execution through the code in the scscf module.  But I feel
now that I'm far from finding the solution.
 
The cdp module appears to know about the HSS.  Here's a section of the
log output at startup:
 
 0(15033) DEBUG: init_mod: cdp
 0(15033) INFO:cdp:cdp_init(): CDiameterPeer initializing
 0(15033) Diameter Peer Config:
 0(15033)       FQDN    : scscf.open-ims.test
 0(15033)       Realm   : open-ims.test
 0(15033)       VendorID: 10415
 0(15033)       ProdName: CDiameterPeer
 0(15033)       AcceptUn: [X]
 0(15033)       DropUnkn: [X]
 0(15033)       Tc      : 30
 0(15033)       Workers : 4
 0(15033)       QueueLen: 8
 0(15033)       Peers : 1
 0(15033)               FQDN:  hss.open-ims.test         Realm:
open-ims.test   Port: 3868
 0(15033)       Acceptors : 1
 0(15033)               Port:  3870      Bind: 127.0.0.1
 0(15033)       Applications : 3
 0(15033)               Auth ID:  16777216       Vendor: 10415
 0(15033)               Auth ID:  16777216       Vendor: 4491
 0(15033)               Auth ID:  16777216       Vendor: 13019
 0(15033)       Routing Table :
 0(15033)               DefaultRoute: [  10] hss.open-ims.test
 0(15033) DBG:peer_manager_init(): Peer Manager initialization...

Everything here looks correct.
 
Any ideas on how to proceed to solve this problem?
 
Thank you in advance!
 
 
Doug Sauder
Manager, Service Control Development
BroadSoft, Inc. 
Gaithersburg, Maryland, USA
+1 240.364.5339 
+1 301.977.8846 (BroadWorks Fax)
 


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="004563.html">[OpenIMSCore-Users] Remote register with X-lite
</A></li>
	<LI>Next message: <A HREF="004561.html">[OpenIMSCore-Users] how to add an AS ?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4560">[ date ]</a>
              <a href="thread.html#4560">[ thread ]</a>
              <a href="subject.html#4560">[ subject ]</a>
              <a href="author.html#4560">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/openimscore-users">More information about the OpenIMSCore-Users
mailing list</a><br>
</body></html>
