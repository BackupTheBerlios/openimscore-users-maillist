<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [OpenIMSCore-Users] Registeration over IPSec fails
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/openimscore-users/2007-September/index.html" >
   <LINK REL="made" HREF="mailto:openimscore-users%40lists.berlios.de?Subject=Re%3A%20%5BOpenIMSCore-Users%5D%20Registeration%20over%20IPSec%20fails&In-Reply-To=%3C101d0f20709070025y5807ceb6s120a0854fb5f2291%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002553.html">
   <LINK REL="Next"  HREF="002561.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[OpenIMSCore-Users] Registeration over IPSec fails</H1>
    <B>Purna Chandar M</B> 
    <A HREF="mailto:openimscore-users%40lists.berlios.de?Subject=Re%3A%20%5BOpenIMSCore-Users%5D%20Registeration%20over%20IPSec%20fails&In-Reply-To=%3C101d0f20709070025y5807ceb6s120a0854fb5f2291%40mail.gmail.com%3E"
       TITLE="[OpenIMSCore-Users] Registeration over IPSec fails">cmongusagusa at gmail.com
       </A><BR>
    <I>Fri Sep  7 09:25:44 CEST 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="002553.html">[OpenIMSCore-Users] Registeration over IPSec fails
</A></li>
        <LI>Next message: <A HREF="002561.html">[OpenIMSCore-Users] Registeration over IPSec fails
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2559">[ date ]</a>
              <a href="thread.html#2559">[ thread ]</a>
              <a href="subject.html#2559">[ subject ]</a>
              <a href="author.html#2559">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Typically, to create an ipsec tunnel, we need  a subset of these elements:
port-c, port-s, spi-c, spi-s of UE end and also that of the other end(pcscf)
along with a pre-shared-key. UE would be aware of port-c/s and spi-c/s of
the pcscf only in the 401 authentication challenge. I was just wondering how
you were able to send your first REGISTER over ipsec tunnel.
Thats about the confusion I had in your setup.

Coming to my scenario, my UE creates 2 SAs, one for receiving and one for
sending SIP messages over the tunnel. While creating the receiving SA, I
used spi-c of UE end and while creating the sending SA, I used spi-s of
remote end. As I told you earlier, this setup worked perfectly with revision
number 312, but not with a later revision number.

I would be grateful if you can send the ethereal capture and the results of
setkey -D and setkey -DP commands on your setup once the registration went
successfully.

On 9/6/07, Divya Singh &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">divya.singh at aricent.com</A>&gt; wrote:
&gt;<i>
</I>&gt;<i>
</I>&gt;<i> I used code revision 419.
</I>&gt;<i> I did see Sanjeev's mail and the logs he sent. Theres a difference in what
</I>&gt;<i> I observed though.
</I>&gt;<i> In my case the security tunnel was used right from the first register msg.
</I>&gt;<i> I used ESP with pre-shared-key.
</I>&gt;<i> How did you establish the ipsec connection ?
</I>&gt;<i>
</I>&gt;<i> Regards,
</I>&gt;<i> Divya
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>  *&quot;Purna Chandar M&quot; &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">cmongusagusa at gmail.com</A>&gt;*
</I>&gt;<i>
</I>&gt;<i> 09/06/2007 05:21 PM
</I>&gt;<i>   To
</I>&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">OpenIMSCore-Users at lists.berlios.de</A>  cc
</I>&gt;<i> Divya Singh/<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">HSS at HSS</A>  Subject
</I>&gt;<i> Re: [OpenIMSCore-Users] Registeration over IPSec fails
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> What is revision number of the code that you are using?? Asking this
</I>&gt;<i> because with my UE, I was successfully able to REGISTER over IPSEC with
</I>&gt;<i> revision number 312 ( a month ago). With the later versions (I tried with
</I>&gt;<i> 397), I was not able to register over ipsec. Currently Im not looking into
</I>&gt;<i> the problem but would get onto that in near future. So if you can let me
</I>&gt;<i> know the revision number, I think I would straight away try with that. ( You
</I>&gt;<i> might have seen Sanjeev's mail on the ipsec issue. We both are working on
</I>&gt;<i> the same stuff).
</I>&gt;<i>
</I>&gt;<i> Thanks and regards,
</I>&gt;<i> Purna Chandar M
</I>&gt;<i>
</I>&gt;<i> On 9/6/07, *Divya Singh* &lt;*<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">divya.singh at aricent.com</A>*&lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">divya.singh at aricent.com</A>&gt;&gt;
</I>&gt;<i> wrote:
</I>&gt;<i>
</I>&gt;<i> Hi,
</I>&gt;<i> I finally got my UE registered over IPsec using ESP.
</I>&gt;<i> Thanks for the support.
</I>&gt;<i>
</I>&gt;<i> Regards,
</I>&gt;<i> Divya
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>   *Divya Singh/HSS*
</I>&gt;<i>
</I>&gt;<i> 09/05/2007 03:31 PM
</I>&gt;<i> Aricent-Unclassified
</I>&gt;<i>
</I>&gt;<i>   To
</I>&gt;<i> *<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">openimscore-users at lists.berlios.de</A> * &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">openimscore-users at lists.berlios.de</A>&gt;
</I>&gt;<i> cc
</I>&gt;<i>
</I>&gt;<i>  Subject
</I>&gt;<i> [OpenIMSCore-Users] Registeration over IPSec fails
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Hi Klemens,
</I>&gt;<i>
</I>&gt;<i> The UE in my case is not not using ipsec to send the 2nd Register. The
</I>&gt;<i> ipsec connection is not properly setup since the tcpdump and ping results
</I>&gt;<i> are not in ah/esp!
</I>&gt;<i>
</I>&gt;<i> I am not able to figure out whats going wrong in the configuration.
</I>&gt;<i>
</I>&gt;<i> I have tried various thing I found googling around. Can you pls. suggest
</I>&gt;<i> any pointers on how to setup an ipsec connection between fedora 6 and
</I>&gt;<i> windows 2000.
</I>&gt;<i>
</I>&gt;<i> Thanks &amp; regards,
</I>&gt;<i>
</I>&gt;<i> Divya
</I>&gt;<i>
</I>&gt;<i> ***********************  Aricent-Unclassified   ***********************
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> ***********************  Aricent-Unclassified   ***********************  &quot;DISCLAIMER:
</I>&gt;<i> This message is proprietary to Aricent  and is intended solely for the use
</I>&gt;<i> of
</I>&gt;<i> the individual to whom it is addressed. It may contain privileged or
</I>&gt;<i> confidential information and should not be
</I>&gt;<i>
</I>&gt;<i> circulated or used for any purpose other than for what it is intended. If
</I>&gt;<i> you have received this message in error,
</I>&gt;<i> please notify the originator immediately. If you are not the intended
</I>&gt;<i> recipient, you are notified that you are strictly
</I>&gt;<i>
</I>&gt;<i> prohibited from using, copying, altering, or disclosing the contents of
</I>&gt;<i> this message. Aricent accepts no responsibility for
</I>&gt;<i> loss or damage arising from the use of the information transmitted by this
</I>&gt;<i> email including damage from virus.&quot;
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> OpenIMSCore-Users mailing list*
</I>&gt;<i> **<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">OpenIMSCore-Users at lists.berlios.de</A>* &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">OpenIMSCore-Users at lists.berlios.de</A>&gt;
</I>&gt;<i> *
</I>&gt;<i> **<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">https://lists.berlios.de/mailman/listinfo/openimscore-users</A> *&lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">https://lists.berlios.de/mailman/listinfo/openimscore-users</A>&gt;
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> ***********************  Aricent-Unclassified   ***********************
</I>&gt;<i>
</I>&gt;<i> &quot;DISCLAIMER: This message is proprietary to Aricent  and is intended solely for the use of
</I>&gt;<i> the individual to whom it is addressed. It may contain privileged or confidential information and should not be
</I>&gt;<i> circulated or used for any purpose other than for what it is intended. If you have received this message in error,
</I>&gt;<i> please notify the originator immediately. If you are not the intended recipient, you are notified that you are strictly
</I>&gt;<i> prohibited from using, copying, altering, or disclosing the contents of this message. Aricent accepts no responsibility for
</I>&gt;<i> loss or damage arising from the use of the information transmitted by this email including damage from virus.&quot;
</I>&gt;<i>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="https://lists.berlios.de/pipermail/openimscore-users/attachments/20070907/e12540dd/attachment.html">https://lists.berlios.de/pipermail/openimscore-users/attachments/20070907/e12540dd/attachment.html</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002553.html">[OpenIMSCore-Users] Registeration over IPSec fails
</A></li>
	<LI>Next message: <A HREF="002561.html">[OpenIMSCore-Users] Registeration over IPSec fails
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2559">[ date ]</a>
              <a href="thread.html#2559">[ thread ]</a>
              <a href="subject.html#2559">[ subject ]</a>
              <a href="author.html#2559">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/openimscore-users">More information about the OpenIMSCore-Users
mailing list</a><br>
</body></html>
