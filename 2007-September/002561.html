<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [OpenIMSCore-Users] Registeration over IPSec fails
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/openimscore-users/2007-September/index.html" >
   <LINK REL="made" HREF="mailto:openimscore-users%40lists.berlios.de?Subject=Re%3A%20%5BOpenIMSCore-Users%5D%20Registeration%20over%20IPSec%20fails&In-Reply-To=%3COF2D0D4CFC.09A9D64D-ON6525734F.0028E783-6525734F.002ADE16%40flextronicssoftware.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002559.html">
   <LINK REL="Next"  HREF="002562.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[OpenIMSCore-Users] Registeration over IPSec fails</H1>
    <B>Divya Singh</B> 
    <A HREF="mailto:openimscore-users%40lists.berlios.de?Subject=Re%3A%20%5BOpenIMSCore-Users%5D%20Registeration%20over%20IPSec%20fails&In-Reply-To=%3COF2D0D4CFC.09A9D64D-ON6525734F.0028E783-6525734F.002ADE16%40flextronicssoftware.com%3E"
       TITLE="[OpenIMSCore-Users] Registeration over IPSec fails">divya.singh at aricent.com
       </A><BR>
    <I>Fri Sep  7 09:47:34 CEST 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="002559.html">[OpenIMSCore-Users] Registeration over IPSec fails
</A></li>
        <LI>Next message: <A HREF="002562.html">[OpenIMSCore-Users] Registeration over IPSec fails
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2561">[ date ]</a>
              <a href="thread.html#2561">[ thread ]</a>
              <a href="subject.html#2561">[ subject ]</a>
              <a href="author.html#2561">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I also read the same ( and expected the 2nd register to start using 
ipsec). But I observed differently and brought it up. 
I used IMS communicator as UE on windows. It provides the option of 
filling in the security params including spi-c &amp; spi-s.
Would be great if you can throw some more light on how to look for SA's on 
windows and should be set in UE config.

I tried registering 2 UEs and established call between them. Attached are 
the requested logs. 
IMS core is running on 138 and UE on 132.

 




&quot;Purna Chandar M&quot; &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">cmongusagusa at gmail.com</A>&gt; 
09/07/2007 12:55 PM


To
<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">OpenIMSCore-Users at lists.berlios.de</A>
cc
Divya Singh/<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">HSS at HSS</A>
Subject
Re: [OpenIMSCore-Users] Registeration over IPSec fails






Typically, to create an ipsec tunnel, we need  a subset of these elements: 
port-c, port-s, spi-c, spi-s of UE end and also that of the other 
end(pcscf) along with a pre-shared-key. UE would be aware of port-c/s and 
spi-c/s of the pcscf only in the 401 authentication challenge. I was just 
wondering how you were able to send your first REGISTER over ipsec tunnel. 

Thats about the confusion I had in your setup.

Coming to my scenario, my UE creates 2 SAs, one for receiving and one for 
sending SIP messages over the tunnel. While creating the receiving SA, I 
used spi-c of UE end and while creating the sending SA, I used spi-s of 
remote end. As I told you earlier, this setup worked perfectly with 
revision number 312, but not with a later revision number. 

I would be grateful if you can send the ethereal capture and the results 
of setkey -D and setkey -DP commands on your setup once the registration 
went successfully.

On 9/6/07, Divya Singh &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">divya.singh at aricent.com</A>&gt; wrote:

I used code revision 419. 
I did see Sanjeev's mail and the logs he sent. Theres a difference in what 
I observed though. 
In my case the security tunnel was used right from the first register msg. 

I used ESP with pre-shared-key. 
How did you establish the ipsec connection ? 

Regards, 
Divya 
 


&quot;Purna Chandar M&quot; &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">cmongusagusa at gmail.com</A>&gt; 
09/06/2007 05:21 PM 


To
<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">OpenIMSCore-Users at lists.berlios.de</A> 
cc
Divya Singh/<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">HSS at HSS</A> 
Subject
Re: [OpenIMSCore-Users] Registeration over IPSec fails









What is revision number of the code that you are using?? Asking this 
because with my UE, I was successfully able to REGISTER over IPSEC with 
revision number 312 ( a month ago). With the later versions (I tried with 
397), I was not able to register over ipsec. Currently Im not looking into 
the problem but would get onto that in near future. So if you can let me 
know the revision number, I think I would straight away try with that. ( 
You might have seen Sanjeev's mail on the ipsec issue. We both are working 
on the same stuff). 

Thanks and regards,
Purna Chandar M

On 9/6/07, Divya Singh &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">divya.singh at aricent.com</A> &gt; wrote: 

Hi, 
I finally got my UE registered over IPsec using ESP. 
Thanks for the support. 

Regards, 
Divya 
 

Divya Singh/HSS 
09/05/2007 03:31 PM 
Aricent-Unclassified 


To
<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">openimscore-users at lists.berlios.de</A> 
cc

Subject
[OpenIMSCore-Users] Registeration over IPSec fails







Hi Klemens, 
The UE in my case is not not using ipsec to send the 2nd Register. The 
ipsec connection is not properly setup since the tcpdump and ping results 
are not in ah/esp! 
I am not able to figure out whats going wrong in the configuration. 
I have tried various thing I found googling around. Can you pls. suggest 
any pointers on how to setup an ipsec connection between fedora 6 and 
windows 2000. 
Thanks &amp; regards, 
Divya

***********************  Aricent-Unclassified   *********************** 


***********************  Aricent-Unclassified   *********************** 
&quot;DISCLAIMER: This message is proprietary to Aricent  and is intended 
solely for the use of 
the individual to whom it is addressed. It may contain privileged or 
confidential information and should not be 

circulated or used for any purpose other than for what it is intended. If 
you have received this message in error, 
please notify the originator immediately. If you are not the intended 
recipient, you are notified that you are strictly

prohibited from using, copying, altering, or disclosing the contents of 
this message. Aricent accepts no responsibility for 
loss or damage arising from the use of the information transmitted by this 
email including damage from virus.&quot;

_______________________________________________
OpenIMSCore-Users mailing list
<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">OpenIMSCore-Users at lists.berlios.de</A> 
<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">https://lists.berlios.de/mailman/listinfo/openimscore-users</A> 




***********************  Aricent-Unclassified   *********************** 
&quot;DISCLAIMER: This message is proprietary to Aricent  and is intended 
solely for the use of 
the individual to whom it is addressed. It may contain privileged or 
confidential information and should not be 

circulated or used for any purpose other than for what it is intended. If 
you have received this message in error, 
please notify the originator immediately. If you are not the intended 
recipient, you are notified that you are strictly

prohibited from using, copying, altering, or disclosing the contents of 
this message. Aricent accepts no responsibility for 
loss or damage arising from the use of the information transmitted by this 
email including damage from virus.&quot;




***********************  Aricent-Unclassified   ***********************
&quot;DISCLAIMER: This message is proprietary to Aricent  and is intended solely for the use of 
the individual to whom it is addressed. It may contain privileged or confidential information and should not be 
circulated or used for any purpose other than for what it is intended. If you have received this message in error, 
please notify the originator immediately. If you are not the intended recipient, you are notified that you are strictly
prohibited from using, copying, altering, or disclosing the contents of this message. Aricent accepts no responsibility for 
loss or damage arising from the use of the information transmitted by this email including damage from virus.&quot;
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="https://lists.berlios.de/pipermail/openimscore-users/attachments/20070907/bab352d6/attachment.html">https://lists.berlios.de/pipermail/openimscore-users/attachments/20070907/bab352d6/attachment.html</A>&gt;
-------------- next part --------------
A non-text attachment was scrubbed...
Name: ipsec_logs.zip
Type: application/zip
Size: 158482 bytes
Desc: not available
URL: &lt;<A HREF="https://lists.berlios.de/pipermail/openimscore-users/attachments/20070907/bab352d6/attachment.zip">https://lists.berlios.de/pipermail/openimscore-users/attachments/20070907/bab352d6/attachment.zip</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002559.html">[OpenIMSCore-Users] Registeration over IPSec fails
</A></li>
	<LI>Next message: <A HREF="002562.html">[OpenIMSCore-Users] Registeration over IPSec fails
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2561">[ date ]</a>
              <a href="thread.html#2561">[ thread ]</a>
              <a href="subject.html#2561">[ subject ]</a>
              <a href="author.html#2561">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/openimscore-users">More information about the OpenIMSCore-Users
mailing list</a><br>
</body></html>
