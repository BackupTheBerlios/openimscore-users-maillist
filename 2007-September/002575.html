<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [OpenIMSCore-Users] Registeration over IPSec fails
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/openimscore-users/2007-September/index.html" >
   <LINK REL="made" HREF="mailto:openimscore-users%40lists.berlios.de?Subject=Re%3A%20%5BOpenIMSCore-Users%5D%20Registeration%20over%20IPSec%20fails&In-Reply-To=%3C1189177132.4265.15.camel%40localhost%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002571.html">
   <LINK REL="Next"  HREF="002578.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[OpenIMSCore-Users] Registeration over IPSec fails</H1>
    <B>Jamal Hadi Salim</B> 
    <A HREF="mailto:openimscore-users%40lists.berlios.de?Subject=Re%3A%20%5BOpenIMSCore-Users%5D%20Registeration%20over%20IPSec%20fails&In-Reply-To=%3C1189177132.4265.15.camel%40localhost%3E"
       TITLE="[OpenIMSCore-Users] Registeration over IPSec fails">hadi at znyx.com
       </A><BR>
    <I>Fri Sep  7 16:58:52 CEST 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="002571.html">[OpenIMSCore-Users] Registeration over IPSec fails
</A></li>
        <LI>Next message: <A HREF="002578.html">[OpenIMSCore-Users] Registeration over IPSec fails
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2575">[ date ]</a>
              <a href="thread.html#2575">[ thread ]</a>
              <a href="subject.html#2575">[ subject ]</a>
              <a href="author.html#2575">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello Divya,

On Fri, 2007-07-09 at 19:33 +0530, Divya Singh wrote:
&gt;<i> 
</I>&gt;<i> I am using automatic keying for ipsec and did not add any SA's
</I>&gt;<i> manually. I defined only the security policies. 
</I>&gt;<i> I observed that the windows and linux m/c exchange ISAKMP packets on
</I>&gt;<i> the defaulted port (500). 
</I>&gt;<i> This establishes SA between the 2 m/cs. Thus Register msg is not the
</I>&gt;<i> first msg exchanged between them 
</I>&gt;<i> and thus is sent as an ESP packet. Once the security handshake is done
</I>&gt;<i> over SIP using the 1st register and the 401 
</I>&gt;<i> new SAs are created. 
</I>

What is the end-goal of the ISAKMP setup?

&gt;<i> Jamal,  
</I>&gt;<i>  if you look at the logs that i sent to the group when ipsec was not
</I>&gt;<i> working and all msgs were exchanged in  
</I>&gt;<i> plain text... u will observe that the 
</I>&gt;<i> UE does send the 1st Register msg with a security-client header 
</I>&gt;<i> P-CSCF inserting a security-server header in 401 
</I>&gt;<i> the 2nd Register msg with security-verify header ( constructed from
</I>&gt;<i> the security-server header of 401). 
</I>&gt;<i> 
</I>&gt;<i> (24.229)The P-CSCF shall remove and store the Security-Client header
</I>&gt;<i> before forwarding the request to the S-CSCF; 
</I>
Thanks for the pointer on 24.229; i will read up on it. Out of
curiosity, how is the SCSCF going to understand it needs to get IK/CK
then and ship to the PCSCF?

&gt;<i> Due to which the security headers cannot be seen in the logs. 
</I>&gt;<i> 
</I>I have decrypted all the headers per your SA file and i can not see any
security headers at all. Where are the UE&lt;-&gt;PCSCF transactions? Also can
you not do the IKE so it is easier to see?

cheers,
jamal


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002571.html">[OpenIMSCore-Users] Registeration over IPSec fails
</A></li>
	<LI>Next message: <A HREF="002578.html">[OpenIMSCore-Users] Registeration over IPSec fails
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2575">[ date ]</a>
              <a href="thread.html#2575">[ thread ]</a>
              <a href="subject.html#2575">[ subject ]</a>
              <a href="author.html#2575">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/openimscore-users">More information about the OpenIMSCore-Users
mailing list</a><br>
</body></html>
