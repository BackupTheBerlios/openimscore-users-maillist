<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [OpenIMSCore-Users] Not able make call between Alice and Bob.
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/openimscore-users/2009-July/index.html" >
   <LINK REL="made" HREF="mailto:openimscore-users%40lists.berlios.de?Subject=Re%3A%20%5BOpenIMSCore-Users%5D%20Not%20able%20make%20call%20between%20Alice%20and%20Bob.&In-Reply-To=%3CFE8084DFCF6170439FA8BA3F696DB34DD1B677%40BLR-EC-MBX04.wipro.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="005643.html">
   <LINK REL="Next"  HREF="005645.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[OpenIMSCore-Users] Not able make call between Alice and Bob.</H1>
    <B>prabin.mathew at wipro.com</B> 
    <A HREF="mailto:openimscore-users%40lists.berlios.de?Subject=Re%3A%20%5BOpenIMSCore-Users%5D%20Not%20able%20make%20call%20between%20Alice%20and%20Bob.&In-Reply-To=%3CFE8084DFCF6170439FA8BA3F696DB34DD1B677%40BLR-EC-MBX04.wipro.com%3E"
       TITLE="[OpenIMSCore-Users] Not able make call between Alice and Bob.">prabin.mathew at wipro.com
       </A><BR>
    <I>Tue Jul 28 15:59:51 CEST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="005643.html">[OpenIMSCore-Users] Not able make call between Alice and Bob.
</A></li>
        <LI>Next message: <A HREF="005645.html">[OpenIMSCore-Users] Not able make call between Alice and Bob.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5644">[ date ]</a>
              <a href="thread.html#5644">[ thread ]</a>
              <a href="subject.html#5644">[ subject ]</a>
              <a href="author.html#5644">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Franz,
 
Please find the wireshark trace file for the call between Alice and Bob
attached.
 
Regards,
Prabin Mathew.

________________________________

From: Franz Edler [mailto:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">franz-edler at aon.at</A>] 
Sent: Tuesday, July 28, 2009 5:07 PM
To: Prabin Mathew (WT01 - Technology, Media and Telecom);
<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">openimscore-users at lists.berlios.de</A>
Cc: sachin jain (WT01 - Telecom Equipment); Suresh kumar Selvaraji (WT01
- Telecom Equipment); Gayathri Nagarajan (WT01 - Telecom Equipment)
Subject: Re:[OpenIMSCore-Users] Not able make call between Alice and
Bob.


For the most efficient method to get help you should provide a
core-trace-file (SIP and Diameter).

Franz

----- Original Message -----
From: &quot;&quot; 
Date: 28.07.2009 11:05
To: <A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">openimscore-users at lists.berlios.de</A>



	Hi,
	 
	We have installed and started 
	pcscf,scscf,icscf and hss. We are able to get the Xlite clients
registered 
	for both alice and bob. (For testing purpose, we have both the
clients on 
	the same machine where openimscore is installed). Hss webconsole
shows 
	both users as registered. When we attempt to make a call between
them, we get 
	&quot;408-Request Timed out&quot; error. We seriously doubt that our DNS
configuration is 
	not proper. But we are not able to pinpoint where exactly the
problem is and how 
	to solve it!!!
	 
	We suspect that hss is not able to communicate to 
	SCSCF, because we see the following in hss.server.log
	 
	2009-07-27 19:21:00,735 [Thread-24] ERROR 
	de.fhg.fokus.diameter.DiameterPeer.peer.StateMachine  -
StateMachine: Peer 
	scscf.open-ims.test:3870 not responding to connection attempt
	2009-07-27 
	19:21:57,136 [main] WARN  
	org.apache.catalina.connector.MapperListener  - Unknown default
host: 
	127.0.0.1
	2009-07-27 19:22:05,431 [main] WARN  
	org.hibernate.impl.SessionFactoryObjectFactory  - InitialContext
did not 
	implement EventContext
	 
	 
	Please find the details below:-
	 
	The system IP 192.168.55.171.
	 
	The DNS config files:-
	 
	
&lt;-----------------------named.conf------------------------------&gt;
	//
	// named.conf
	//
	// Provided by Red Hat bind package 
	to configure the ISC BIND named(8) DNS
	// server as a caching only nameserver 
	(as a localhost DNS resolver only).
	//
	// See /usr/share/doc/bind*/sample/ 
	for example named configuration files.
	//
	 
	options 
	{
	        listen-on port 53 { 
	127.0.0.1;192.168.55.171; };
	        
	listen-on-v6 port 53 { ::1; };
	        
	directory       
	&quot;/var/named&quot;;
	        
	dump-file       
	&quot;/var/named/data/cache_dump.db&quot;;
	        
	statistics-file 
	&quot;/var/named/data/named_stats.txt&quot;;
	        
	memstatistics-file 
	&quot;/var/named/data/named_mem_stats.txt&quot;;
	        
	allow-query     { localhost; 
	};
	        forward 
	first;
	        forwarders 
	{127.0.0.1;192.168.55.171;192.168.55.1;};
	        
	recursion yes;
	};
	 
	logging 
	{
	        channel default_debug 
	{
	                
	file 
	&quot;data/named.run&quot;;
	                
	severity dynamic;
	        
	};
	};
	 
	zone &quot;open-ims.test&quot; IN 
	{
	                  
	type 
	master;
	                  
	file 
	&quot;open-ims.dnszone&quot;;
	                  
	notify 
	no;
	                  
	allow-update { none; 
	};
	                   
	};
	 
	#zone &quot;localhost&quot; IN 
	{
	#type master;
	#file &quot;localhost.zone&quot;;
	#allow-update { none; 
	};
	#};
	 
	include 
	&quot;/etc/named.rfc1912.zones&quot;;
	 
	 

	&lt;-------------resolv.conf------------------------&gt;
	 
	# Generated by 
	NetworkManager
	nameserver 127.0.0.1
	search open-ims.test
	domain 
	open-ims.test
	 
	# No nameservers found; try 
	putting DNS servers into your
	# ifcfg files in /etc/sysconfig/network-scripts 
	like so:
	#
	# DNS1=xxx.xxx.xxx.xxx
	# DNS2=xxx.xxx.xxx.xxx
	# 
	DOMAIN=lab.foo.com 
	bar.foo.com
	                    
	 
	&lt;--------------------------/etc/hosts------------------------&gt;
	 
	# Do not remove the following line, or various 
	programs
	# that require network functionality will 
	fail.
	127.0.0.1       
	localhost.localdomain   localhost.localdomain   
	localhost       
	wipro
	127.0.0.1       debian open-ims.test 
	scscf.open-ims.test
	hss.open-ims.test icscf.open-ims.test 
	pcscf.open-ims.test
	192.168.55.171  
	wipro.open-ims.test
	
	 
	The Xlite(we used the linux version) settings are 
	given below:-
	 
	Display name:alice
	User name: alice
	Password:alice
	Authorization User Name: <A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">alice at open-ims.test</A>
&lt;javascript:parent.fastEmail('<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">alice at open-ims.test</A>');&gt; 
	Domain:open-ims.test
	Outbound Proxy: 
	SIP Proxy: pcscf.open-ims.test:4060
	 
	Similarly for bob. We have changed the authentication 
	type to MD5 to get the clients registered.
	 
	 
	The SIP request for the call attempt from wireshark is 
	given below:-
	 
	sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">bob at open-ims.test</A> SIP/2.0
	Via: SIP/2.0/UDP 
	
127.0.0.1:4061;rport;branch=z9hG4bK20F731E67C0CDBA23D91F97CD241C8EA
	From: 
	alice ;tag=1134004567
	To: 
	
	Contact: 
	
	Call-ID: <A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">3882E716-3615-BBEA-7B87-662282FBD16A at 127.0.0.1</A>
&lt;javascript:parent.fastEmail('<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">3882E716-3615-BBEA-7B87-662282FBD16A at 127.0</A>
.0.1');&gt; 
	CSeq: 
	39877 INVITE
	Max-Forwards: 70
	Content-Type: application/sdp
	User-Agent: 
	X-Lite release 1105d
	Content-Length: 304
	 
	v=0
	o=alice 3220917033 3220917105 IN IP4 
	127.0.0.1
	s=X-Lite
	c=IN IP4 127.0.0.1
	t=0 0
	m=audio 8000 RTP/AVP 0 8 
	3 98 97 101
	a=rtpmap:0 pcmu/8000
	a=rtpmap:8 pcma/8000
	a=rtpmap:3 
	gsm/8000
	a=rtpmap:98 iLBC/8000
	a=rtpmap:97 speex/8000
	a=rtpmap:101 
	telephone-event/8000
	a=fmtp:101 0-15
	a=sendrecv
	 
	 
	 
	When we attempt to make a call... the following log is 
	seen in the pcscf and icscf logs...
	 
	 3(1897) DBG:P-CSCF:cscf_get_originating_contact: 
	1://127.0.0.1:4061 
	 3(1897) DBG:P-CSCF:cscf_get_terminating_contact: 
	0://open-ims.test:0 
	 3(1897) 
	&gt;&gt;       Orig_Initial
	 3(1897) 
	DBG:P-CSCF:P_is_registered: Looking if registered
	 3(1897) 
	DBG:P-CSCF:P_is_registered: Looking for 
	&lt;1://127.0.0.1:4061&gt;
	 3(1897) INF:P-CSCF:P_assert_identity: 
	Asserting Identity
	 3(1897) DBG:P-CSCF:P_assert_identity: Looking for 
	&lt;1://127.0.0.1:4061&gt; Pref: 
	 2(1896) 
	DBG:P-CSCF:cscf_get_originating_contact: 1://127.0.0.1:4061 
	 2(1896) 
	DBG:P-CSCF:cscf_get_terminating_contact: 0://open-ims.test:0 
	 2(1896) 
	&gt;&gt;       Orig_Initial
	 2(1896) 
	DBG:P-CSCF:P_is_registered: Looking if registered
	 2(1896) 
	DBG:P-CSCF:P_is_registered: Looking for 
	&lt;1://127.0.0.1:4061&gt;
	 2(1896) INF:P-CSCF:P_assert_identity: 
	Asserting Identity
	 2(1896) DBG:P-CSCF:P_assert_identity: Looking for 
	&lt;1://127.0.0.1:4061&gt; Pref: 
	 5(1963) INF:P-CSCF:----------  
	Registrar Contents begin --------
	 5(1963) INF:P-CSCF:[  60] C: 
	&lt;0://127.0.0.1:4063&gt; Exp:[1352] R:[ 1] SOS:[ ] 
	
	 5(1963) 
	INF:P-CSCF:         SR: 
	
	 5(1963) 
	INF:P-CSCF:          P: D[X] 
	
	 5(1963) INF:P-CSCF:[  62] C: 
	&lt;0://127.0.0.1:4061&gt; Exp:[1506] R:[ 1] SOS:[ ] 
	
	 5(1963) 
	INF:P-CSCF:         SR: 
	
	 5(1963) 
	INF:P-CSCF:          P: D[X] 
	
	 5(1963) INF:P-CSCF:----------  
	Registrar Contents end ----------
	 5(1963) INF:P-CSCF:----------  
	Subscription list begin ---------
	 5(1963) INF:P-CSCF:[   
	3] P: D:[ 1830] E:[ 1536] 
	Att:[-1]
	 5(1963) INF:P-CSCF:[  52] P: 
	D:[ 1830] E:[ 1382] Att:[-1]
	 5(1963) 
	INF:P-CSCF:----------  Subscription list end 
	-----------
	 
	 
	 
	Thanks,
	 
	Prabin Mathew.
	Wipro Technologies,
	Bangalore, India.

	 

	Please do not print this email unless it is absolutely
necessary. 

	The information contained in this electronic message and any
attachments to this message are intended for the exclusive use of the
addressee(s) and may contain proprietary, confidential or privileged
information. If you are not the intended recipient, you should not
disseminate, distribute or copy this e-mail. Please notify the sender
immediately and destroy all copies of this message and any attachments. 

	WARNING: Computer viruses can be transmitted via email. The
recipient should check this email and any attachments for the presence
of viruses. The company accepts no liability for any damage caused by
any virus transmitted by this email. 

	www.wipro.com 


Please do not print this email unless it is absolutely necessary. 

The information contained in this electronic message and any attachments to this message are intended for the exclusive use of the addressee(s) and may contain proprietary, confidential or privileged information. If you are not the intended recipient, you should not disseminate, distribute or copy this e-mail. Please notify the sender immediately and destroy all copies of this message and any attachments. 

WARNING: Computer viruses can be transmitted via email. The recipient should check this email and any attachments for the presence of viruses. The company accepts no liability for any damage caused by any virus transmitted by this email. 

www.wipro.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="https://lists.berlios.de/pipermail/openimscore-users/attachments/20090728/f81e45e9/attachment.html">https://lists.berlios.de/pipermail/openimscore-users/attachments/20090728/f81e45e9/attachment.html</A>&gt;
-------------- next part --------------
A non-text attachment was scrubbed...
Name: Alice-Bob
Type: application/octet-stream
Size: 42486 bytes
Desc: Alice-Bob
URL: &lt;<A HREF="https://lists.berlios.de/pipermail/openimscore-users/attachments/20090728/f81e45e9/attachment.obj">https://lists.berlios.de/pipermail/openimscore-users/attachments/20090728/f81e45e9/attachment.obj</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="005643.html">[OpenIMSCore-Users] Not able make call between Alice and Bob.
</A></li>
	<LI>Next message: <A HREF="005645.html">[OpenIMSCore-Users] Not able make call between Alice and Bob.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5644">[ date ]</a>
              <a href="thread.html#5644">[ thread ]</a>
              <a href="subject.html#5644">[ subject ]</a>
              <a href="author.html#5644">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/openimscore-users">More information about the OpenIMSCore-Users
mailing list</a><br>
</body></html>
