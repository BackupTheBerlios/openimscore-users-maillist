<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [OpenIMSCore-Users] Trigger towards presence server
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/openimscore-users/2007-June/index.html" >
   <LINK REL="made" HREF="mailto:openimscore-users%40lists.berlios.de?Subject=Re%3A%20%5BOpenIMSCore-Users%5D%20Trigger%20towards%20presence%20server&In-Reply-To=%3C1180962300.22811.108.camel%40alean%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001917.html">
   <LINK REL="Next"  HREF="001914.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[OpenIMSCore-Users] Trigger towards presence server</H1>
    <B>Peter Weik</B> 
    <A HREF="mailto:openimscore-users%40lists.berlios.de?Subject=Re%3A%20%5BOpenIMSCore-Users%5D%20Trigger%20towards%20presence%20server&In-Reply-To=%3C1180962300.22811.108.camel%40alean%3E"
       TITLE="[OpenIMSCore-Users] Trigger towards presence server">weik at fokus.fraunhofer.de
       </A><BR>
    <I>Mon Jun  4 15:05:00 CEST 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="001917.html">[OpenIMSCore-Users] Registration timeout 504 with uctimsclient
</A></li>
        <LI>Next message: <A HREF="001914.html">[OpenIMSCore-Users] [Feature #3462] isc: save orig. dialog info,	detect chan
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1913">[ date ]</a>
              <a href="thread.html#1913">[ thread ]</a>
              <a href="subject.html#1913">[ subject ]</a>
              <a href="author.html#1913">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello Kiran,

your attached trace SUBSCRIBE contains no Event header with the word
&quot;presence&quot; in it thus also the iFC in the user profile does not match.

Regards,

Peter

On Fri, 2007-06-01 at 10:57 +0530, <A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">kiran.bkumar at wipro.com</A> wrote:
&gt;<i> Hi Peter,
</I>&gt;<i> 
</I>&gt;<i> Please find attached the traces with SAA captured.
</I>&gt;<i> 
</I>&gt;<i> Let me know what could possibly be wrong.
</I>&gt;<i> 
</I>&gt;<i> Thanks,
</I>&gt;<i> Kiran.
</I>&gt;<i> 
</I>&gt;<i> -----Original Message-----
</I>&gt;<i> From: Peter Weik [mailto:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">weik at fokus.fraunhofer.de</A>] 
</I>&gt;<i> Sent: Thursday, May 31, 2007 9:54 PM
</I>&gt;<i> To: Kiran B Kumar (WT01 - Testing Services)
</I>&gt;<i> Cc: <A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">openimscore-users at lists.berlios.de</A>
</I>&gt;<i> Subject: Re: [OpenIMSCore-Users] Trigger towards presence server
</I>&gt;<i> 
</I>&gt;<i> Hello Kiran,
</I>&gt;<i> 
</I>&gt;<i> please post a trace with the SAA message so that we can see where your
</I>&gt;<i> iFCs might be wrong.
</I>&gt;<i> 
</I>&gt;<i> - Peter
</I>&gt;<i> 
</I>&gt;<i> On Thu, 2007-05-31 at 19:38 +0530, <A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">kiran.bkumar at wipro.com</A> wrote:
</I>&gt;<i> &gt; Hi,
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;  
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; I just wanted to add, if I configure HSS trigger point with SIP Method
</I>&gt;<i> &gt; Register, the scscf is triggering the sending of the Register message
</I>&gt;<i> &gt; towards the OpenSER. But this is not what I want, because the scscf
</I>&gt;<i> &gt; should trigger on receipt of subscribe message from user. But this is
</I>&gt;<i> &gt; not happening, find the below snapshot from scscf logs.
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;  
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; Please tell me what could possibly be the mistake...I feel this is
</I>&gt;<i> &gt; something to do with the hss configuration (more specifically setting
</I>&gt;<i> &gt; trigger).
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;  
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; The problem what is IFC happens only on the first register message and
</I>&gt;<i> &gt; not when the subscribe is received by the scscf (atleast this what I
</I>&gt;<i> &gt; think !!!).
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;  
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; 4(3923) parse_headers: flags=ffffffffffffffff
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;  4(3923) DEBUG: add_param: tag=7461949
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;  4(3923) end of header reached, state=29
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;  4(3923) DEBUG:ISC:isc_get_originating_user: From
</I>&gt;<i> &gt; sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">wipro2 at mkd149633.wipro.com</A>
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;  4(3923) INFO:ISC:ISC_match_filter_reg(): Orig User
</I>&gt;<i> &gt; &lt;sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">wipro2 at mkd149633.wipro.com</A>&gt; [1]
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;  4(3923) INFO:ISC:isc_checker_find: starting search
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;  4(3923) DEBUG:ISC:ifc_checker_trigger: Starting expression check: 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;  4(3923) DEBUG:ISC:ifc_check_spt:             SPT type 2 -&gt; Method ==
</I>&gt;<i> &gt; SUBSCRIBE ?
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;  4(3923) DEBUG:ISC:ifc_check_spt:               Found method REGISTER 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;  4(3923) DEBUG:ISC:ifc_checker_trigger: Check finished =&gt; 0
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;  4(3923) INFO:ISC:ISC_match_filter_reg(): No REGISTER match found in
</I>&gt;<i> &gt; filter criteria
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;  4(3923) DEBUG:destroy_avp_list: destroying list (nil)
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;  4(3923) DEBUG:destroy_avp_list: destroying list (nil)
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;  4(3923) DEBUG:destroy_avp_list: destroying list (nil)
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;  4(3923) DEBUG:destroy_avp_list: destroying list (nil)
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;  4(3923) DEBUG:destroy_avp_list: destroying list (nil)
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;  4(3923) DEBUG:destroy_avp_list: destroying list (nil)
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;  4(3923) receive_msg: cleaning up
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;  1(3920) SIP Request:
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;  1(3920)  method:  &lt;SUBSCRIBE&gt;
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;  1(3920)  uri:     &lt;sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">wipro2 at mkd149633.wipro.com</A>&gt;
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;  1(3920)  version: &lt;SIP/2.0&gt;
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;  1(3920) parse_headers: flags=2
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;  1(3920) get_hdr_field: cseq &lt;CSeq&gt;: &lt;1&gt; &lt;SUBSCRIBE&gt;
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;  1(3920) end of header reached, state=9
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;  1(3920) DEBUG: get_hdr_field: &lt;To&gt; [43];
</I>&gt;<i> &gt; uri=[sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">wipro2 at mkd149633.wipro.com</A>] 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;  1(3920) DEBUG: to body [&quot;wipro2&quot; &lt;sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">wipro2 at mkd149633.wipro.com</A>&gt;
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;  
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;  
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; Thanks in advance,
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;  
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; Regards,
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; Kiran.
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;  
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;                                    
</I>&gt;<i> &gt; ______________________________________________________________________
</I>&gt;<i> &gt; From: Kiran B Kumar (WT01 - Testing Services) 
</I>&gt;<i> &gt; Sent: Thursday, May 31, 2007 4:49 PM
</I>&gt;<i> &gt; To: Kiran B Kumar (WT01 - Testing Services);
</I>&gt;<i> &gt; <A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">openimscore-users at lists.berlios.de</A>
</I>&gt;<i> &gt; Subject: RE: [OpenIMSCore-Users] Trigger towards presence server
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;  
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; Hi All,
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;  
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; In continuation to my previous mail,
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;  
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; I have changed the AS address to sip:localhost:5000 and have the
</I>&gt;<i> &gt; openser presence server is running on port 5000 of the localhost.
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;  
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; But the scscf does not send the subscribe message towards the presence
</I>&gt;<i> &gt; server, but instead I get a response from the scscf itself saying 200
</I>&gt;<i> &gt; Subscription to REG saved.
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;  
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; Is there any change in the scscf/pcscf /hss configuration required???
</I>&gt;<i> &gt; Attached below is the trace as seen at the ims communicator.
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;  
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; One more doubt I have is, the trigger is set to subscribe message, and
</I>&gt;<i> &gt; SIP header is event and content is &quot;presence&quot;. 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; But in the below message, the event is set to &quot;reg&quot;.
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;  
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; &lt;message
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; from=&quot;10.117.2.44:5090&quot; 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; to=&quot;10.154.20.45:4060&quot; 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; time=&quot;1180609298926&quot; 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; isSender=&quot;true&quot; 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; transactionId=&quot;z9hG4bK549721be764d34bd132d3e007cdbe76f&quot; 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; callId=&quot;<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">a2aeb307177ba577c94f81d660454bc0 at 10.117.2.44</A>&quot; 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; firstLine=&quot;SUBSCRIBE sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">wipro2 at mkd149633.wipro.com</A> SIP/2.0&quot; 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; debugLine=&quot;0&quot; 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; &lt;![CDATA[SUBSCRIBE sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">wipro2 at mkd149633.wipro.com</A> SIP/2.0
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; Call-ID: <A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">a2aeb307177ba577c94f81d660454bc0 at 10.117.2.44</A>
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; CSeq: 1 SUBSCRIBE
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; From: &quot;wipro2&quot; &lt;sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">wipro2 at mkd149633.wipro.com</A>&gt;;tag=19432672
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; To: &quot;wipro2&quot; &lt;sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">wipro2 at mkd149633.wipro.com</A>&gt;
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; Via: SIP/2.0/UDP
</I>&gt;<i> &gt; 10.117.2.44:5090;branch=z9hG4bK549721be764d34bd132d3e007cdbe76f
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; Max-Forwards: 70
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; Contact: &lt;sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">wipro2 at 10.117.2.44</A>:5090&gt;
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; Event:  reg
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; Expires: 600000
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; P-Access-Network-Info: IEEE-802.11
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; Route:
</I>&gt;<i> &gt;
</I>&gt;<i> &lt;sip:mkd149633.wipro.com:4060;transport=udp&gt;,&lt;sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">orig at scscf.mkd149633.w</A>
</I>&gt;<i> ipro.com:6060;lr&gt;
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; P-Preferred-Identity: &quot;wipro2&quot; &lt;sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">wipro2 at mkd149633.wipro.com</A>&gt;
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; Require: sec-agree
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; Proxy-Require: sec-agree
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; Accept: application/reginfo+xml
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; User-Agent: IMS-Communicator 070518
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; Content-Length: 0
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;  
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; ]]&gt;
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; &lt;/message&gt;
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;  
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; &lt;message
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; from=&quot;10.154.20.45:4060&quot; 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; to=&quot;10.117.2.44:5090&quot; 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; time=&quot;1180609299020&quot; 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; isSender=&quot;false&quot; 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; statusMessage=&quot;normal processing&quot; 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; transactionId=&quot;z9hG4bK549721be764d34bd132d3e007cdbe76f&quot; 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; firstLine=&quot;SIP/2.0 200 Subscription to REG saved&quot; 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; callId=&quot;<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">a2aeb307177ba577c94f81d660454bc0 at 10.117.2.44</A>&quot; 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; debugLine=&quot;0&quot; 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; &lt;![CDATA[SIP/2.0 200 Subscription to REG saved
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; Record-Route: &lt;sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">mo at pcscf.mkd149633.wipro.com</A>:4060;lr&gt;
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; Call-ID: <A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">a2aeb307177ba577c94f81d660454bc0 at 10.117.2.44</A>
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; CSeq: 1 SUBSCRIBE
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; From: &quot;wipro2&quot; &lt;sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">wipro2 at mkd149633.wipro.com</A>&gt;;tag=19432672
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; To: &quot;wipro2&quot;
</I>&gt;<i> &gt;
</I>&gt;<i> &lt;sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">wipro2 at mkd149633.wipro.com</A>&gt;;tag=91f892d9dea214017c312092c9cda187-84
</I>&gt;<i> 34
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; Via: SIP/2.0/UDP
</I>&gt;<i> &gt;
</I>&gt;<i> 10.117.2.44:5090;received=10.117.2.44;rport=5090;branch=z9hG4bK549721be7
</I>&gt;<i> 64d34bd132d3e007cdbe76f
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; Expires: 600000
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; Server: Sip EXpress router (2.1.0-dev1 OpenIMSCore (i386/linux))
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; Warning: 392 10.154.20.45:6060 &quot;Noisy feedback tells:  pid=4019
</I>&gt;<i> &gt; req_src_ip=10.154.20.45 req_src_port=4060
</I>&gt;<i> &gt; in_uri=sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">wipro2 at mkd149633.wipro.com</A>
</I>&gt;<i> &gt; out_uri=sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">wipro2 at mkd149633.wipro.com</A> via_cnt==2&quot;
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; Content-Length: 0
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;  
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; ]]&gt;
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; &lt;/message&gt;
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;  
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; &lt;message
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; from=&quot;10.117.2.44:5090&quot; 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; to=&quot;10.154.20.45:4060&quot; 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; time=&quot;1180609300051&quot; 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; isSender=&quot;true&quot; 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; transactionId=&quot;z9hG4bKa32e.2716c8e2.0&quot; 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; callId=&quot;<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">a2aeb307177ba577c94f81d660454bc0 at 10.117.2.44</A>&quot; 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; firstLine=&quot;SIP/2.0 200 OK&quot; 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; debugLine=&quot;0&quot; 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; &lt;![CDATA[SIP/2.0 200 OK
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; Via: SIP/2.0/UDP
</I>&gt;<i> &gt; 10.154.20.45:4060;branch=z9hG4bKa32e.2716c8e2.0,SIP/2.0/UDP
</I>&gt;<i> &gt;
</I>&gt;<i> 10.154.20.45:6060;received=10.154.20.45;rport=6060;branch=z9hG4bKa32e.42
</I>&gt;<i> 20c537.0
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; To: &quot;wipro2&quot; &lt;sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">wipro2 at mkd149633.wipro.com</A>&gt;;tag=19432672
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; From: &quot;wipro2&quot;
</I>&gt;<i> &gt;
</I>&gt;<i> &lt;sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">wipro2 at mkd149633.wipro.com</A>&gt;;tag=91f892d9dea214017c312092c9cda187-84
</I>&gt;<i> 34
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; CSeq: 10 NOTIFY
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; Call-ID: <A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">a2aeb307177ba577c94f81d660454bc0 at 10.117.2.44</A>
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; Content-Length: 0
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;  
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; ]]&gt;
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; &lt;/message&gt;
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;  
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; &lt;message
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; from=&quot;10.154.20.45:4060&quot; 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; to=&quot;10.117.2.44:5090&quot; 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; time=&quot;1180609300004&quot; 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; isSender=&quot;false&quot; 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; transactionId=&quot;z9hG4bKa32e.2716c8e2.0&quot; 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; callId=&quot;<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">a2aeb307177ba577c94f81d660454bc0 at 10.117.2.44</A>&quot; 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; firstLine=&quot;NOTIFY sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">wipro2 at 10.117.2.44</A>:5090 SIP/2.0&quot; 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; debugLine=&quot;0&quot; 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; &lt;![CDATA[NOTIFY sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">wipro2 at 10.117.2.44</A>:5090 SIP/2.0
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; Via: SIP/2.0/UDP
</I>&gt;<i> &gt; 10.154.20.45:4060;branch=z9hG4bKa32e.2716c8e2.0,SIP/2.0/UDP
</I>&gt;<i> &gt;
</I>&gt;<i> 10.154.20.45:6060;received=10.154.20.45;rport=6060;branch=z9hG4bKa32e.42
</I>&gt;<i> 20c537.0
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; To: &quot;wipro2&quot; &lt;sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">wipro2 at mkd149633.wipro.com</A>&gt;;tag=19432672
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; From: &quot;wipro2&quot;
</I>&gt;<i> &gt;
</I>&gt;<i> &lt;sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">wipro2 at mkd149633.wipro.com</A>&gt;;tag=91f892d9dea214017c312092c9cda187-84
</I>&gt;<i> 34
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; CSeq: 10 NOTIFY
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; Call-ID: <A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">a2aeb307177ba577c94f81d660454bc0 at 10.117.2.44</A>
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; User-Agent: Sip EXpress router(2.1.0-dev1 OpenIMSCore (i386/linux))
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; Contact: &lt;sip:scscf.mkd149633.wipro.com:6060&gt;
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; Event:  reg
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; Max-Forwards: 16
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; Subscription-State: active;expires=3630
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; Content-Type: application/reginfo+xml
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; Content-Length: 340
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;  
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; ]]&gt;
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; &lt;/message&gt;
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;  
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;  
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;                                    
</I>&gt;<i> &gt; ______________________________________________________________________
</I>&gt;<i> &gt; From:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">openimscore-users-bounces at lists.berlios.de</A>
</I>&gt;<i> &gt; [mailto:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">openimscore-users-bounces at lists.berlios.de</A>] On Behalf Of
</I>&gt;<i> &gt; <A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">kiran.bkumar at wipro.com</A>
</I>&gt;<i> &gt; Sent: Thursday, May 31, 2007 1:50 PM
</I>&gt;<i> &gt; To: <A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">openimscore-users at lists.berlios.de</A>
</I>&gt;<i> &gt; Subject: [OpenIMSCore-Users] Trigger towards presence server
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;  
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;  
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; Hi All,
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;  
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; I have done the necessary changes to the HSS to trigger on SIP method
</I>&gt;<i> &gt; based and the trigger methods are SUBSCRIBE OR PUBLISH. The apsvr
</I>&gt;<i> &gt; table is also correctly updated with the AS server address
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;  
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; mysql&gt; select * from apsvr;
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; +----------+-------------+-----------------------+------------------+
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; | apsvr_id | name        | address               | default_handling |
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; +----------+-------------+-----------------------+------------------+
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; |        1 | default_as  |                       |                0 | 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; |        2 | presence_as | sip:10.154.20.45:5000 |                0 | 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; +----------+-------------+-----------------------+------------------+
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; 2 rows in set (0.00 sec)
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;  
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; mysql&gt; select * from spt;
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;
</I>&gt;<i> +--------+-----------+------------+------------+---------+--------------
</I>&gt;<i> +-------------------+--------------------+----------------------+-----+-
</I>&gt;<i> --------+------+
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; | spt_id | trigpt_id | sip_method | sip_header | req_uri |
</I>&gt;<i> &gt; session_case | session_desc_line | sip_header_content |
</I>&gt;<i> &gt; session_desc_content | neg | groupId | type |
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;
</I>&gt;<i> +--------+-----------+------------+------------+---------+--------------
</I>&gt;<i> +-------------------+--------------------+----------------------+-----+-
</I>&gt;<i> --------+------+
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; |      1 |         1 | SUBSCRIBE  | NULL       | NULL    |
</I>&gt;<i> &gt;    0 | NULL              | NULL               | NULL                 |
</I>&gt;<i> &gt; 0 |       0 |    2 | 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; |      2 |         1 | PUBLISH    | NULL       | NULL    |
</I>&gt;<i> &gt; 0 | NULL              | NULL               | NULL                 |
</I>&gt;<i> &gt; 0 |       0 |    2 | 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; |      3 |         1 | NULL       | Event      | NULL    |
</I>&gt;<i> &gt; 0 | NULL              | .*presence.*       | NULL                 |
</I>&gt;<i> &gt; 0 |       1 |    5 | 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; |     27 |         7 | SUBSCRIBE  | NULL       | NULL    |
</I>&gt;<i> &gt; 0 | NULL              | NULL               | NULL                 |
</I>&gt;<i> &gt; 0 |       0 |    2 | 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; |     28 |         7 | PUBLISH    | NULL       | NULL    |
</I>&gt;<i> &gt; 0 | NULL              | NULL               | NULL                 |
</I>&gt;<i> &gt; 0 |       1 |    2 | 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;
</I>&gt;<i> +--------+-----------+------------+------------+---------+--------------
</I>&gt;<i> +-------------------+--------------------+----------------------+-----+-
</I>&gt;<i> --------+------+
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; 5 rows in set (0.00 sec)
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;  
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; Trigger point ID 7 is what is used by me, and trigger point 1 is used
</I>&gt;<i> &gt; by the default service profile.
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;  
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; But in the scscf logs I dont see any triggers after recieving the
</I>&gt;<i> &gt; SUBSCRIBE. But there are some isc_matching when the Register message
</I>&gt;<i> &gt; arrives. 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;  
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; Please let me know if you find something from the log files or any
</I>&gt;<i> &gt; more traces are needed.
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;  
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; Thanks in advance :)
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt;  
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; Regards,
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; Kiran. 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; The information contained in this electronic message and any
</I>&gt;<i> &gt; attachments to this message are intended for the exclusive use of the
</I>&gt;<i> &gt; addressee(s) and may contain proprietary, confidential or privileged
</I>&gt;<i> &gt; information. If you are not the intended recipient, you should not
</I>&gt;<i> &gt; disseminate, distribute or copy this e-mail. Please notify the sender
</I>&gt;<i> &gt; immediately and destroy all copies of this message and any
</I>&gt;<i> &gt; attachments. 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; WARNING: Computer viruses can be transmitted via email. The recipient
</I>&gt;<i> &gt; should check this email and any attachments for the presence of
</I>&gt;<i> &gt; viruses. The company accepts no liability for any damage caused by any
</I>&gt;<i> &gt; virus transmitted by this email.
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; www.wipro.com
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; The information contained in this electronic message and any
</I>&gt;<i> &gt; attachments to this message are intended for the exclusive use of the
</I>&gt;<i> &gt; addressee(s) and may contain proprietary, confidential or privileged
</I>&gt;<i> &gt; information. If you are not the intended recipient, you should not
</I>&gt;<i> &gt; disseminate, distribute or copy this e-mail. Please notify the sender
</I>&gt;<i> &gt; immediately and destroy all copies of this message and any
</I>&gt;<i> &gt; attachments. 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; WARNING: Computer viruses can be transmitted via email. The recipient
</I>&gt;<i> &gt; should check this email and any attachments for the presence of
</I>&gt;<i> &gt; viruses. The company accepts no liability for any damage caused by any
</I>&gt;<i> &gt; virus transmitted by this email.
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; www.wipro.com
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; _______________________________________________
</I>&gt;<i> &gt; OpenIMSCore-Users mailing list
</I>&gt;<i> &gt; <A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">OpenIMSCore-Users at lists.berlios.de</A>
</I>&gt;<i> &gt; <A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">https://lists.berlios.de/mailman/listinfo/openimscore-users</A>
</I>
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001917.html">[OpenIMSCore-Users] Registration timeout 504 with uctimsclient
</A></li>
	<LI>Next message: <A HREF="001914.html">[OpenIMSCore-Users] [Feature #3462] isc: save orig. dialog info,	detect chan
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1913">[ date ]</a>
              <a href="thread.html#1913">[ thread ]</a>
              <a href="subject.html#1913">[ subject ]</a>
              <a href="author.html#1913">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/openimscore-users">More information about the OpenIMSCore-Users
mailing list</a><br>
</body></html>
