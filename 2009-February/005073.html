<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [OpenIMSCore-Users] Question about Trigger points
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/openimscore-users/2009-February/index.html" >
   <LINK REL="made" HREF="mailto:openimscore-users%40lists.berlios.de?Subject=Re%3A%20%5BOpenIMSCore-Users%5D%20Question%20about%20Trigger%20points&In-Reply-To=%3C20090215152856.alf4itm20woko4o0%40correo.cec.uchile.cl%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="005068.html">
   <LINK REL="Next"  HREF="005074.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[OpenIMSCore-Users] Question about Trigger points</H1>
    <B>apinedo at ing.uchile.cl</B> 
    <A HREF="mailto:openimscore-users%40lists.berlios.de?Subject=Re%3A%20%5BOpenIMSCore-Users%5D%20Question%20about%20Trigger%20points&In-Reply-To=%3C20090215152856.alf4itm20woko4o0%40correo.cec.uchile.cl%3E"
       TITLE="[OpenIMSCore-Users] Question about Trigger points">apinedo at ing.uchile.cl
       </A><BR>
    <I>Sun Feb 15 19:28:56 CET 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="005068.html">[OpenIMSCore-Users] Question about Trigger points
</A></li>
        <LI>Next message: <A HREF="005074.html">[OpenIMSCore-Users] Question about Trigger points
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5073">[ date ]</a>
              <a href="thread.html#5073">[ thread ]</a>
              <a href="subject.html#5073">[ subject ]</a>
              <a href="author.html#5073">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi all,

I'm now trying to interconnect Asterisk with IMS as peer, and asterisk  
notifies me that peer 'ims' (as I called in sip.conf) is not  
reachable! I know this is a particular case of interconnection with  
AS, but I read in some forum that is hard to interconnect * with IMS,  
so I'm commending to ask you all the trigger point problem that  
Sireesha speaks will help me to interconnect * with IMS, or on the  
other hand I must to reconfigure the Asterisk's configuration files  
(specifically sip.conf) to have a decent interconnection.

My trigger points are: (server name=192.168.0.174:5060 -&gt; the asterisk  
port in my IP address)

CNF=0

group 0:SIP Method =INVITE
group 1:Session case=Origin - Session

My asterisk configuration is:

[general]
context=default
allowguest=no

realm=midominio.tld

bindport=5060
bindaddr=0.0.0.0
srvlookup=yes

domain=midominio.tld

[ims]
type=peer
host=open-ims.test
fromdomain=open-ims.test
qualify=yes
port=6060
canreinvite=yes
dtmfmode=rfc2833
context=outcoming_calls
incominglimit=2
language=es
disallow=all
allow=ulaw
allow=alaw
allow=g729
insecure=invite

If someone can help me about this, if someone had done it, please help

reegard Andrew

Sireesha Jakku &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">sireesha.jakku at info-spectrum.com</A>&gt; ha escrito:

&gt;<i> Hi,
</I>&gt;<i>
</I>&gt;<i> I have one more doubt..
</I>&gt;<i>
</I>&gt;<i> I am simply forwarding the INVITE message from AS to SCSCF.. ( The   
</I>&gt;<i> same INVITE message that I got from SCSCF earlier).
</I>&gt;<i> Do I need to modify anything in the message at AS, before forwarding  
</I>&gt;<i>  it to SCSCF? such as removing AS's own address from Route   
</I>&gt;<i> header..something like that?
</I>&gt;<i>
</I>&gt;<i> Regards,
</I>&gt;<i> Sireesha J
</I>&gt;<i>   ----- Original Message -----
</I>&gt;<i>   From: Franz Edler
</I>&gt;<i>   To: 'Sireesha Jakku' ; 'Devdutt Patnaik' ;   
</I>&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">openimscore-users at lists.berlios.de</A>
</I>&gt;<i>   Sent: Friday, February 13, 2009 2:05 AM
</I>&gt;<i>   Subject: RE: [OpenIMSCore-Users] Question about Trigger points
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>   Hi SIreesha,
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>   the issue should be handled via iFC alone, no need to modify the cfg-files.
</I>&gt;<i>
</I>&gt;<i>   What are you iFCs?
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>   Please provide a core trace-file (pcap) including the   
</I>&gt;<i> registration, than I also can see the iFCs provisioned.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>   regards
</I>&gt;<i>
</I>&gt;<i>   FRanz
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> ------------------------------------------------------------------------------
</I>&gt;<i>
</I>&gt;<i>   From: <A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">openimscore-users-bounces at lists.berlios.de</A>   
</I>&gt;<i> [mailto:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">openimscore-users-bounces at lists.berlios.de</A>] On Behalf Of   
</I>&gt;<i> Sireesha Jakku
</I>&gt;<i>   Sent: Thursday, February 12, 2009 8:24 AM
</I>&gt;<i>   To: Devdutt Patnaik; <A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">openimscore-users at lists.berlios.de</A>
</I>&gt;<i>   Subject: Re: [OpenIMSCore-Users] Question about Trigger points
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>   Hi Devdutt,
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>   Were you able to solve this problem??
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>   I also want INVITE from UE1 to UE2 to be sent via AS..
</I>&gt;<i>
</I>&gt;<i>   I am able to achieve till this point:
</I>&gt;<i>
</I>&gt;<i>       UE1 -&gt; PCSCF -&gt; SCSCF -&gt; AS -&gt; SCSCF
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>   but after reaching SCSCF,  the message is looping in SCSCF only..   
</I>&gt;<i> because of the condition in cfg file:
</I>&gt;<i>
</I>&gt;<i>   (both of my users - originating &amp; terminating are registered with   
</I>&gt;<i> same s-cscf.)
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>   if (S_term_registered()){
</I>&gt;<i>                 t_relay_to_udp(&quot;127.0.0.1&quot;,6060);
</I>&gt;<i>                 exit;
</I>&gt;<i>           }
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>   If after some checkings, I forward it to PCSCF using t_relay.
</I>&gt;<i>
</I>&gt;<i>   Again, PCSCF is giving error...its saying &quot;403- Forbidden - Not   
</I>&gt;<i> Registered! You must register first with a S-CSCF&quot;
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>   If can you please let me know..how to forward it succesfully to   
</I>&gt;<i> UE2 ?? if you have done it..
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>   Can anyone help me on this??
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>   Regards,
</I>&gt;<i>
</I>&gt;<i>   Sireesha J
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>     ----- Original Message -----
</I>&gt;<i>
</I>&gt;<i>     From: Devdutt Patnaik
</I>&gt;<i>
</I>&gt;<i>     To: <A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">openimscore-users at lists.berlios.de</A>
</I>&gt;<i>
</I>&gt;<i>     Sent: Saturday, February 07, 2009 12:51 PM
</I>&gt;<i>
</I>&gt;<i>     Subject: [OpenIMSCore-Users] Question about Trigger points
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>     Hi All,
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>     I am trying to use the Trigger points and the iFC to forward an   
</I>&gt;<i> INVITE to a SIP-AS based on the content of the INVITE method.
</I>&gt;<i>
</I>&gt;<i>     The scenario is as below :
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>     1 &gt; User1 calls User2.
</I>&gt;<i>
</I>&gt;<i>     2 &gt; The iFC causes the call to be forwarded to the SIP-AS for   
</I>&gt;<i> some processing.
</I>&gt;<i>
</I>&gt;<i>     3 &gt; Now the call should continue to user2 which I do by   
</I>&gt;<i> forwarding the INVITE back to the openIMS core ( since user1 and   
</I>&gt;<i> user2 are both registered with the opemIMS).
</I>&gt;<i>
</I>&gt;<i>           I am not maintaining any registrations at the SIP-AS.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>     Now the problem arises here when the INVITE comes back to the   
</I>&gt;<i> IMS core. It sees the INVITE header and again forwards the packet to  
</I>&gt;<i>  the SIP-AS thus resulting in a loop.
</I>&gt;<i>
</I>&gt;<i>     I want it to forward it to User2.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>     Any suggestions how I can achieve this scenario such that all   
</I>&gt;<i> the INVITEs are eventually handled by the IMS core. Is there some   
</I>&gt;<i> condition I can specify in the filter criteria itself ?
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>     Thanks
</I>&gt;<i>
</I>&gt;<i>     Devdutt.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> ----------------------------------------------------------------------------
</I>&gt;<i>
</I>&gt;<i>     _______________________________________________
</I>&gt;<i>     OpenIMSCore-Users mailing list
</I>&gt;<i>     <A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">OpenIMSCore-Users at lists.berlios.de</A>
</I>&gt;<i>     <A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">https://lists.berlios.de/mailman/listinfo/openimscore-users</A>
</I>&gt;<i>
</I>


----------------------------------------------------------------
This message was sent using IMP, the Internet Messaging Program.


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="005068.html">[OpenIMSCore-Users] Question about Trigger points
</A></li>
	<LI>Next message: <A HREF="005074.html">[OpenIMSCore-Users] Question about Trigger points
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5073">[ date ]</a>
              <a href="thread.html#5073">[ thread ]</a>
              <a href="subject.html#5073">[ subject ]</a>
              <a href="author.html#5073">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/openimscore-users">More information about the OpenIMSCore-Users
mailing list</a><br>
</body></html>
