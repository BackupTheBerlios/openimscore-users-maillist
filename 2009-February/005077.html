<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [OpenIMSCore-Users] OpenIMSCore-Users Digest, Vol 28, Issue 12
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/openimscore-users/2009-February/index.html" >
   <LINK REL="made" HREF="mailto:openimscore-users%40lists.berlios.de?Subject=Re%3A%20%5BOpenIMSCore-Users%5D%20OpenIMSCore-Users%20Digest%2C%20Vol%2028%2C%20Issue%2012&In-Reply-To=%3C78D29159D9EE4C339E7F4A2F02AEF3AB%40LIONKING.COM%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="005059.html">
   <LINK REL="Next"  HREF="005060.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[OpenIMSCore-Users] OpenIMSCore-Users Digest, Vol 28, Issue 12</H1>
    <B>Sireesha Jakku</B> 
    <A HREF="mailto:openimscore-users%40lists.berlios.de?Subject=Re%3A%20%5BOpenIMSCore-Users%5D%20OpenIMSCore-Users%20Digest%2C%20Vol%2028%2C%20Issue%2012&In-Reply-To=%3C78D29159D9EE4C339E7F4A2F02AEF3AB%40LIONKING.COM%3E"
       TITLE="[OpenIMSCore-Users] OpenIMSCore-Users Digest, Vol 28, Issue 12">sireesha.jakku at info-spectrum.com
       </A><BR>
    <I>Mon Feb 16 06:37:43 CET 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="005059.html">[OpenIMSCore-Users] OpenIMSCore-Users Digest, Vol 28, Issue 12
</A></li>
        <LI>Next message: <A HREF="005060.html">[OpenIMSCore-Users] Not able to Register, port unrechable
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5077">[ date ]</a>
              <a href="thread.html#5077">[ thread ]</a>
              <a href="subject.html#5077">[ subject ]</a>
              <a href="author.html#5077">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Prabha,

I just added Origin-Session session case for invite at the HSS...
here is my iFC..

&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;

&lt;IMSSubscription&gt;

&lt;PrivateID&gt;<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">bob at domain.com</A>&lt;/PrivateID&gt;

 

&lt;ServiceProfile&gt;

&lt;PublicIdentity&gt;

&lt;Identity&gt;sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">bob at domain.com</A>&lt;/Identity&gt;

&lt;Extension&gt;

&lt;IdentityType&gt;0&lt;/IdentityType&gt;

&lt;/Extension&gt;

&lt;/PublicIdentity&gt;

 

&lt;InitialFilterCriteria&gt;

&lt;Priority&gt;1&lt;/Priority&gt;

&lt;TriggerPoint&gt;

&lt;ConditionTypeCNF&gt;1&lt;/ConditionTypeCNF&gt;

&lt;SPT&gt;

&lt;ConditionNegated&gt;0&lt;/ConditionNegated&gt;

&lt;Group&gt;0&lt;/Group&gt;

&lt;Method&gt;INVITE&lt;/Method&gt;

&lt;Extension&gt;&lt;/Extension&gt;

&lt;/SPT&gt;

 

&lt;SPT&gt;

&lt;ConditionNegated&gt;0&lt;/ConditionNegated&gt;

&lt;Group&gt;0&lt;/Group&gt;

&lt;Method&gt;REGISTER&lt;/Method&gt;

&lt;Extension&gt;&lt;/Extension&gt;

&lt;/SPT&gt;

 

&lt;SPT&gt;

&lt;ConditionNegated&gt;0&lt;/ConditionNegated&gt;

&lt;Group&gt;1&lt;/Group&gt;

&lt;SessionCase&gt;1&lt;/SessionCase&gt;

&lt;Extension&gt;&lt;/Extension&gt;

&lt;/SPT&gt;

&lt;/TriggerPoint&gt;

 

&lt;ApplicationServer&gt;

&lt;ServerName&gt;sip:172.18.2.231:5065&lt;/ServerName&gt;

&lt;DefaultHandling&gt;0&lt;/DefaultHandling&gt;

&lt;/ApplicationServer&gt;

&lt;/InitialFilterCriteria&gt;

&lt;/ServiceProfile&gt;

&lt;/IMSSubscription&gt;





Regards,
Sireesha 
  ----- Original Message ----- 
  From: prabhavati inamdar 
  To: <A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">openimscore-users at lists.berlios.de</A> 
  Sent: Friday, February 13, 2009 8:29 PM
  Subject: Re: [OpenIMSCore-Users] OpenIMSCore-Users Digest, Vol 28, Issue 12


  Hi Shreesha,


  Can you also share the HSS logs? I have a similar situation and using IFCs works for me.
  I had to use &quot;Session case&quot; in Trigger Point definition. 
  Filter for calls going to AS had session case as Origin-Session and for INVITEs coming from AS had Origin-Session as Term-Reg. 


  Prabha






  2009/2/13 &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">openimscore-users-request at lists.berlios.de</A>&gt;

    Send OpenIMSCore-Users mailing list submissions to
           <A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">openimscore-users at lists.berlios.de</A>

    To subscribe or unsubscribe via the World Wide Web, visit
           <A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">https://lists.berlios.de/mailman/listinfo/openimscore-users</A>
    or, via email, send a message with subject or body 'help' to
           <A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">openimscore-users-request at lists.berlios.de</A>

    You can reach the person managing the list at
           <A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">openimscore-users-owner at lists.berlios.de</A>

    When replying, please edit your Subject line so it is more specific
    than &quot;Re: Contents of OpenIMSCore-Users digest...&quot;


    Today's Topics:

      1. Re: Question about Trigger points (Franz Edler)
      2. Re: Question about Trigger points (Sireesha Jakku)


    ----------------------------------------------------------------------

    Message: 1
    Date: Thu, 12 Feb 2009 21:35:00 +0100
    From: &quot;Franz Edler&quot; &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">franz-edler at aon.at</A>&gt;
    Subject: Re: [OpenIMSCore-Users] Question about Trigger points
    To: &quot;'Sireesha Jakku'&quot; &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">sireesha.jakku at info-spectrum.com</A>&gt;,      &quot;'Devdutt
           Patnaik'&quot; &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">xendevid at gmail.com</A>&gt;, &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">openimscore-users at lists.berlios.de</A>&gt;
    Message-ID: &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">9D6B5C34C31D4EF08A6AC59AA084A1D9 at notebook</A>&gt;
    Content-Type: text/plain; charset=&quot;us-ascii&quot;

    Hi SIreesha,



    the issue should be handled via iFC alone, no need to modify the cfg-files.

    What are you iFCs?



    Please provide a core trace-file (pcap) including the registration, than I
    also can see the iFCs provisioned.



    regards

    FRanz



     _____

    From: <A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">openimscore-users-bounces at lists.berlios.de</A>
    [mailto:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">openimscore-users-bounces at lists.berlios.de</A>] On Behalf Of Sireesha
    Jakku
    Sent: Thursday, February 12, 2009 8:24 AM
    To: Devdutt Patnaik; <A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">openimscore-users at lists.berlios.de</A>
    Subject: Re: [OpenIMSCore-Users] Question about Trigger points



    Hi Devdutt,



    Were you able to solve this problem??



    I also want INVITE from UE1 to UE2 to be sent via AS..

    I am able to achieve till this point:

       UE1 -&gt; PCSCF -&gt; SCSCF -&gt; AS -&gt; SCSCF



    but after reaching SCSCF,  the message is looping in SCSCF only.. because of
    the condition in cfg file:

    (both of my users - originating &amp; terminating are registered with same
    s-cscf.)



    if (S_term_registered()){
                 t_relay_to_udp(&quot;127.0.0.1&quot;,6060);
                 exit;
           }



    If after some checkings, I forward it to PCSCF using t_relay.

    Again, PCSCF is giving error...its saying &quot;403- Forbidden - Not Registered!
    You must register first with a S-CSCF&quot;



    If can you please let me know..how to forward it succesfully to UE2 ?? if
    you have done it..



    Can anyone help me on this??



    Regards,

    Sireesha J



    ----- Original Message -----

    From: Devdutt Patnaik &lt;mailto:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">xendevid at gmail.com</A>&gt;

    To: <A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">openimscore-users at lists.berlios.de</A>

    Sent: Saturday, February 07, 2009 12:51 PM

    Subject: [OpenIMSCore-Users] Question about Trigger points



    Hi All,



    I am trying to use the Trigger points and the iFC to forward an INVITE to a
    SIP-AS based on the content of the INVITE method.

    The scenario is as below :



    1 &gt; User1 calls User2.

    2 &gt; The iFC causes the call to be forwarded to the SIP-AS for some
    processing.

    3 &gt; Now the call should continue to user2 which I do by forwarding the
    INVITE back to the openIMS core ( since user1 and user2 are both registered
    with the opemIMS).

         I am not maintaining any registrations at the SIP-AS.



    Now the problem arises here when the INVITE comes back to the IMS core. It
    sees the INVITE header and again forwards the packet to the SIP-AS thus
    resulting in a loop.

    I want it to forward it to User2.



    Any suggestions how I can achieve this scenario such that all the INVITEs
    are eventually handled by the IMS core. Is there some condition I can
    specify in the filter criteria itself ?



    Thanks

    Devdutt.


     _____


    _______________________________________________
    OpenIMSCore-Users mailing list
    <A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">OpenIMSCore-Users at lists.berlios.de</A>
    <A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">https://lists.berlios.de/mailman/listinfo/openimscore-users</A>

    -------------- next part --------------
    An HTML attachment was scrubbed...
    URL: <A HREF="https://lists.berlios.de/pipermail/openimscore-users/attachments/20090212/1e48da48/attachment-0001.html">https://lists.berlios.de/pipermail/openimscore-users/attachments/20090212/1e48da48/attachment-0001.html</A>

    ------------------------------

    Message: 2
    Date: Fri, 13 Feb 2009 10:37:16 +0530
    From: &quot;Sireesha Jakku&quot; &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">sireesha.jakku at info-spectrum.com</A>&gt;
    Subject: Re: [OpenIMSCore-Users] Question about Trigger points
    To: &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">franz-edler at aon.at</A>&gt;, &quot;'Devdutt Patnaik'&quot; &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">xendevid at gmail.com</A>&gt;,
           &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">openimscore-users at lists.berlios.de</A>&gt;
    Message-ID: &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">EE1E5158B61B4FF1A1CA5DA5FA1C65FB at LIONKING.COM</A>&gt;
    Content-Type: text/plain; charset=&quot;iso-8859-1&quot;

    Hi FRanz,

    here is my iFC...

    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;IMSSubscription&gt;

    &lt;ServiceProfile&gt;

    &lt;PublicIdentity&gt;

    &lt;Identity&gt;sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">bob at info-spectrum.com</A>&lt;/Identity&gt;

    &lt;Extension&gt;&lt;IdentityType&gt;0&lt;/IdentityType&gt;

    &lt;/Extension&gt;

    &lt;/PublicIdentity&gt;



    &lt;InitialFilterCriteria&gt;

    &lt;Priority&gt;1&lt;/Priority&gt;

                   &lt;TriggerPoint&gt;

                   &lt;ConditionTypeCNF&gt;1&lt;/ConditionTypeCNF&gt;

                   &lt;SPT&gt;

                                   &lt;ConditionNegated&gt;0&lt;/ConditionNegated&gt;

                                   &lt;Group&gt;0&lt;/Group&gt;

                                   &lt;Method&gt;INVITE&lt;/Method&gt;

                                   &lt;Extension&gt;&lt;/Extension&gt;

                   &lt;/SPT&gt;

                   &lt;SPT&gt;

                                   &lt;ConditionNegated&gt;0&lt;/ConditionNegated&gt;

                                   &lt;Group&gt;0&lt;/Group&gt;

                                   &lt;Method&gt;REGISTER&lt;/Method&gt;

                                   &lt;Extension&gt;

                                   &lt;/Extension&gt;

                   &lt;/SPT&gt;

                   &lt;/TriggerPoint&gt;



                   &lt;ApplicationServer&gt;

                                   &lt;ServerName&gt;sip:172.18.2.231:5065&lt;/ServerName&gt;

                                   &lt;DefaultHandling&gt;0&lt;/DefaultHandling&gt;

                   &lt;/ApplicationServer&gt;

    &lt;/InitialFilterCriteria&gt;



    &lt;InitialFilterCriteria&gt;

                   &lt;Priority&gt;0&lt;/Priority&gt;

                   &lt;TriggerPoint&gt;

    &lt;ConditionTypeCNF&gt;1&lt;/ConditionTypeCNF&gt;

    &lt;SPT&gt;

    &lt;ConditionNegated&gt;0&lt;/ConditionNegated&gt;

    &lt;Group&gt;0&lt;/Group&gt;

    &lt;Method&gt;SUBSCRIBE&lt;/Method&gt;

    &lt;Extension&gt;&lt;/Extension&gt;

    &lt;/SPT&gt;

    &lt;SPT&gt;

    &lt;ConditionNegated&gt;0&lt;/ConditionNegated&gt;

    &lt;Group&gt;0&lt;/Group&gt;

    &lt;Method&gt;PUBLISH&lt;/Method&gt;

    &lt;Extension&gt;&lt;/Extension&gt;

    &lt;/SPT&gt;

    &lt;SPT&gt;

    &lt;ConditionNegated&gt;0&lt;/ConditionNegated&gt;

    &lt;Group&gt;1&lt;/Group&gt;

    &lt;SIPHeader&gt;

    &lt;Header&gt;Event&lt;/Header&gt;

    &lt;Content&gt;.*presence.*&lt;/Content&gt;

    &lt;/SIPHeader&gt;

    &lt;Extension&gt;&lt;/Extension&gt;

    &lt;/SPT&gt;

    &lt;/TriggerPoint&gt;



    &lt;ApplicationServer&gt;

    &lt;ServerName&gt;sip:172.18.2.231:5065&lt;/ServerName&gt;

    &lt;DefaultHandling&gt;0&lt;/DefaultHandling&gt;

    &lt;/ApplicationServer&gt;

    &lt;/InitialFilterCriteria&gt;

    &lt;/ServiceProfile&gt;

    &lt;/IMSSubscription&gt;



    Is there any thing that I need to change??



    Regards,

    Sireesha J



     ----- Original Message -----
     From: Franz Edler
     To: 'Sireesha Jakku' ; 'Devdutt Patnaik' ; <A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">openimscore-users at lists.berlios.de</A>
     Sent: Friday, February 13, 2009 2:05 AM
     Subject: RE: [OpenIMSCore-Users] Question about Trigger points


     Hi SIreesha,



     the issue should be handled via iFC alone, no need to modify the cfg-files.

     What are you iFCs?



     Please provide a core trace-file (pcap) including the registration, than I also can see the iFCs provisioned.



     regards

     FRanz




    ------------------------------------------------------------------------------

     From: <A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">openimscore-users-bounces at lists.berlios.de</A> [mailto:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">openimscore-users-bounces at lists.berlios.de</A>] On Behalf Of Sireesha Jakku
     Sent: Thursday, February 12, 2009 8:24 AM
     To: Devdutt Patnaik; <A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">openimscore-users at lists.berlios.de</A>
     Subject: Re: [OpenIMSCore-Users] Question about Trigger points



     Hi Devdutt,



     Were you able to solve this problem??



     I also want INVITE from UE1 to UE2 to be sent via AS..

     I am able to achieve till this point:

         UE1 -&gt; PCSCF -&gt; SCSCF -&gt; AS -&gt; SCSCF



     but after reaching SCSCF,  the message is looping in SCSCF only.. because of the condition in cfg file:

     (both of my users - originating &amp; terminating are registered with same s-cscf.)



     if (S_term_registered()){
                   t_relay_to_udp(&quot;127.0.0.1&quot;,6060);
                   exit;
             }



     If after some checkings, I forward it to PCSCF using t_relay.

     Again, PCSCF is giving error...its saying &quot;403- Forbidden - Not Registered! You must register first with a S-CSCF&quot;



     If can you please let me know..how to forward it succesfully to UE2 ?? if you have done it..



     Can anyone help me on this??



     Regards,

     Sireesha J



       ----- Original Message -----

       From: Devdutt Patnaik

       To: <A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">openimscore-users at lists.berlios.de</A>

       Sent: Saturday, February 07, 2009 12:51 PM

       Subject: [OpenIMSCore-Users] Question about Trigger points



       Hi All,



       I am trying to use the Trigger points and the iFC to forward an INVITE to a SIP-AS based on the content of the INVITE method.

       The scenario is as below :



       1 &gt; User1 calls User2.

       2 &gt; The iFC causes the call to be forwarded to the SIP-AS for some processing.

       3 &gt; Now the call should continue to user2 which I do by forwarding the INVITE back to the openIMS core ( since user1 and user2 are both registered with the opemIMS).

             I am not maintaining any registrations at the SIP-AS.



       Now the problem arises here when the INVITE comes back to the IMS core. It sees the INVITE header and again forwards the packet to the SIP-AS thus resulting in a loop.

       I want it to forward it to User2.



       Any suggestions how I can achieve this scenario such that all the INVITEs are eventually handled by the IMS core. Is there some condition I can specify in the filter criteria itself ?



       Thanks

       Devdutt.


    ----------------------------------------------------------------------------

       _______________________________________________
       OpenIMSCore-Users mailing list
       <A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">OpenIMSCore-Users at lists.berlios.de</A>
       <A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">https://lists.berlios.de/mailman/listinfo/openimscore-users</A>
    -------------- next part --------------
    An HTML attachment was scrubbed...
    URL: <A HREF="https://lists.berlios.de/pipermail/openimscore-users/attachments/20090213/4b98d829/attachment.html">https://lists.berlios.de/pipermail/openimscore-users/attachments/20090213/4b98d829/attachment.html</A>

    ------------------------------

    _______________________________________________
    OpenIMSCore-Users mailing list
    <A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">OpenIMSCore-Users at lists.berlios.de</A>
    <A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">https://lists.berlios.de/mailman/listinfo/openimscore-users</A>


    End of OpenIMSCore-Users Digest, Vol 28, Issue 12
    *************************************************





------------------------------------------------------------------------------


  _______________________________________________
  OpenIMSCore-Users mailing list
  <A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">OpenIMSCore-Users at lists.berlios.de</A>
  <A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">https://lists.berlios.de/mailman/listinfo/openimscore-users</A>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="https://lists.berlios.de/pipermail/openimscore-users/attachments/20090216/792365c0/attachment.html">https://lists.berlios.de/pipermail/openimscore-users/attachments/20090216/792365c0/attachment.html</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="005059.html">[OpenIMSCore-Users] OpenIMSCore-Users Digest, Vol 28, Issue 12
</A></li>
	<LI>Next message: <A HREF="005060.html">[OpenIMSCore-Users] Not able to Register, port unrechable
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5077">[ date ]</a>
              <a href="thread.html#5077">[ thread ]</a>
              <a href="subject.html#5077">[ subject ]</a>
              <a href="author.html#5077">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/openimscore-users">More information about the OpenIMSCore-Users
mailing list</a><br>
</body></html>
