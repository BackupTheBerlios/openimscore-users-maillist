<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [OpenIMSCore-Users] REGISTER over TLS resulting &quot;477	Unfortunatelyerror on sending to next hop occurred&quot;
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/openimscore-users/2009-February/index.html" >
   <LINK REL="made" HREF="mailto:openimscore-users%40lists.berlios.de?Subject=Re%3A%20%5BOpenIMSCore-Users%5D%20REGISTER%20over%20TLS%20resulting%20%22477%0A%09Unfortunatelyerror%20on%20sending%20to%20next%20hop%20occurred%22&In-Reply-To=%3C3AA8EB12F8AB429C81395B975884CA97%40notebook%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="005037.html">
   <LINK REL="Next"  HREF="005043.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[OpenIMSCore-Users] REGISTER over TLS resulting &quot;477	Unfortunatelyerror on sending to next hop occurred&quot;</H1>
    <B>Franz Edler</B> 
    <A HREF="mailto:openimscore-users%40lists.berlios.de?Subject=Re%3A%20%5BOpenIMSCore-Users%5D%20REGISTER%20over%20TLS%20resulting%20%22477%0A%09Unfortunatelyerror%20on%20sending%20to%20next%20hop%20occurred%22&In-Reply-To=%3C3AA8EB12F8AB429C81395B975884CA97%40notebook%3E"
       TITLE="[OpenIMSCore-Users] REGISTER over TLS resulting &quot;477	Unfortunatelyerror on sending to next hop occurred&quot;">franz-edler at aon.at
       </A><BR>
    <I>Mon Feb  9 19:16:16 CET 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="005037.html">[OpenIMSCore-Users] REGISTER over TLS resulting &quot;477 Unfortunatelyerror on sending to next hop occurred&quot;
</A></li>
        <LI>Next message: <A HREF="005043.html">[OpenIMSCore-Users] query
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5038">[ date ]</a>
              <a href="thread.html#5038">[ thread ]</a>
              <a href="subject.html#5038">[ subject ]</a>
              <a href="author.html#5038">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Just to confirm what Klemens said below: In IMS only SIP or tel-URI are
valid. Therefore an IMS subscriber will never be validly addressed by a
SIPS-URI.

Franz

&gt;<i> -----Original Message-----
</I>&gt;<i> From: <A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">openimscore-users-bounces at lists.berlios.de</A> [mailto:openimscore-
</I>&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">users-bounces at lists.berlios.de</A>] On Behalf Of Klemens Schragel
</I>&gt;<i> Sent: Monday, February 09, 2009 4:11 PM
</I>&gt;<i> To: Vavilapalli Srikanth-A19563; <A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">openimscore-users at lists.berlios.de</A>
</I>&gt;<i> Subject: Re: [OpenIMSCore-Users] REGISTER over TLS resulting &quot;477
</I>&gt;<i> Unfortunatelyerror on sending to next hop occurred&quot;
</I>&gt;<i> 
</I>&gt;<i> no problem!
</I>&gt;<i> 
</I>&gt;<i> ...well, sips-uri indicates, that YOUR domain (originating) shall use tls
</I>&gt;<i> for each hop, the handling within the destination domain is...say &quot;non of
</I>&gt;<i> your business&quot;. if someone addresses your uri with sips it means just,
</I>&gt;<i> that the transport to the first node of your domain is tls secured, the
</I>&gt;<i> rest within your domain is not forced to use tls.
</I>&gt;<i> 
</I>&gt;<i> unfortunately I don't know anything about sips in IMS, all security issues
</I>&gt;<i> are covered by other mechanisms (see 33.203 about Access Security (first
</I>&gt;<i> hop) and 33.210 about Network Domain Security (domain internal and inter-
</I>&gt;<i> domain)..
</I>&gt;<i> 
</I>&gt;<i> cheers
</I>&gt;<i> 
</I>&gt;<i> -------- Original-Nachricht --------
</I>&gt;<i> &gt; Datum: Mon, 9 Feb 2009 18:55:58 +0800
</I>&gt;<i> &gt; Von: &quot;Vavilapalli Srikanth-A19563&quot; &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">srikanthv at motorola.com</A>&gt;
</I>&gt;<i> &gt; An: &quot;Klemens Schragel&quot; &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">klemens.schragel at gmx.at</A>&gt;, openimscore-
</I>&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">users at lists.berlios.de</A>
</I>&gt;<i> &gt; Betreff: RE: [OpenIMSCore-Users] REGISTER over TLS resulting &quot;477
</I>&gt;<i> Unfortunatelyerror on sending to next hop occurred&quot;
</I>&gt;<i> 
</I>&gt;<i> &gt; Thanks klemens
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; I tried with SIP URI over TLS and it worked fine. With SIPS Uri only I
</I>&gt;<i> am
</I>&gt;<i> &gt; facing the issue.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; So support for Registering SIPS AOR is not there in OpenIMS? How does a
</I>&gt;<i> UE
</I>&gt;<i> &gt; receives calls addressed for its SIPS URI received over TLS and calls
</I>&gt;<i> &gt; addressed for its SIP URI received over normal TCP/UDP?
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Regards
</I>&gt;<i> &gt; Srikanth
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; -----Original Message-----
</I>&gt;<i> &gt; From: Klemens Schragel [mailto:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">klemens.schragel at gmx.at</A>]
</I>&gt;<i> &gt; Sent: Sunday, February 08, 2009 7:54 PM
</I>&gt;<i> &gt; To: Vavilapalli Srikanth-A19563; <A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">openimscore-users at lists.berlios.de</A>
</I>&gt;<i> &gt; Subject: Re: [OpenIMSCore-Users] REGISTER over TLS resulting &quot;477
</I>&gt;<i> &gt; Unfortunatelyerror on sending to next hop occurred&quot;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Hi,
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; you are using SIPS-URI, but this would require your domain to use TLS
</I>&gt;<i> also
</I>&gt;<i> &gt; internal.
</I>&gt;<i> &gt; try with a normal SIP-URI...
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; cheers, klemens
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; -------- Original-Nachricht --------
</I>&gt;<i> &gt; &gt; Datum: Thu, 29 Jan 2009 18:18:25 +0800
</I>&gt;<i> &gt; &gt; Von: &quot;Vavilapalli Srikanth-A19563&quot; &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">srikanthv at motorola.com</A>&gt;
</I>&gt;<i> &gt; &gt; An: <A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">openimscore-users at lists.berlios.de</A>
</I>&gt;<i> &gt; &gt; Betreff: [OpenIMSCore-Users] REGISTER over TLS resulting &quot;477
</I>&gt;<i> &gt; Unfortunately	error on sending to next hop occurred&quot;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; &gt; Hi
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; Today I enabled the TLS support on OpenIMS and when tested with my
</I>&gt;<i> &gt; &gt; client, getting the following error: Did any one else face the same
</I>&gt;<i> &gt; &gt; issue? If so, can u please help me to resolve this?
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt;&gt;
</I>&gt;<i> &gt; &gt; REGISTER sips:open-ims.test SIP/2.0
</I>&gt;<i> &gt; &gt; To: Srikanth &lt;sips:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">a19563 at open-ims.test</A>&gt;
</I>&gt;<i> &gt; &gt; From: Srikanth
</I>&gt;<i> &gt; &gt; &lt;sips:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">a19563 at open-ims.test</A>&gt;;tag=18-16941760-0101345c-00000001
</I>&gt;<i> &gt; &gt; Contact: sips:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">a19563 at 10.232.44.85</A>:5081
</I>&gt;<i> &gt; &gt; Route: &lt;sips:10.232.15.41:4061;lr&gt;
</I>&gt;<i> &gt; &gt; Call-ID: <A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">0101345c0102cb901 at 16856156</A> &lt;mailto:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">0101345c0102cb901 at 16856156</A>
</I>&gt;<i> &gt; &gt; &lt;mailto:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">0101345c0102cb901 at 16856156</A>&gt; &gt;
</I>&gt;<i> &gt; &gt; P-Access-Network-Info: LAN
</I>&gt;<i> &gt; &gt; Expires: 3600
</I>&gt;<i> &gt; &gt; CSeq: 1 REGISTER
</I>&gt;<i> &gt; &gt; Via: SIP/2.0/TLS 10.232.44.85:5081;rport;branch=z9hG4bK156296559fcc6d
</I>&gt;<i> &gt; &gt; Supported: timer,path
</I>&gt;<i> &gt; &gt; Allow:
</I>&gt;<i> &gt; &gt; ACK,BYE,CANCEL,INFO,INVITE,NOTIFY,OPTIONS,PRACK,REFER,REGISTER,SUBSCRI
</I>&gt;<i> &gt; &gt; BE
</I>&gt;<i> &gt; &gt; ,UPDATE
</I>&gt;<i> &gt; &gt; Accept-Encoding: identity
</I>&gt;<i> &gt; &gt; Accept: application/sdp
</I>&gt;<i> &gt; &gt; Accept: application/reginfo+xml
</I>&gt;<i> &gt; &gt; Accept: message/sipfrag
</I>&gt;<i> &gt; &gt; Accept: multipart/mixed
</I>&gt;<i> &gt; &gt; Accept: application/simple-message-summary
</I>&gt;<i> &gt; &gt; Content-Length: 0
</I>&gt;<i> &gt; &gt; Max-Forwards: 70
</I>&gt;<i> &gt; &gt; History-Info: sips:open-ims.test;index=1
</I>&gt;<i> &gt; &gt; Authorization: Digest
</I>&gt;<i> &gt; &gt; nonce=&quot;&quot;,realm=&quot;open-ims.test&quot;,response=&quot;&quot;,uri=&quot;sips:open-ims.test&quot;,us
</I>&gt;<i> &gt; &gt; er name=&quot;<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">srikanthv at open-ims.test</A> &lt;mailto:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">srikanthv at open-ims.test</A>
</I>&gt;<i> &gt; &gt; &lt;mailto:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">srikanthv at open-ims.test</A>&gt; &gt; &quot;
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; &lt;&lt;
</I>&gt;<i> &gt; &gt; SIP/2.0 477 Unfortunately error on sending to next hop occurred
</I>&gt;<i> &gt; &gt; (477/TM)
</I>&gt;<i> &gt; &gt; To: Srikanth
</I>&gt;<i> &gt; &gt; &lt;sips:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">a19563 at open-ims.test</A>&gt;;tag=8d51b8e0f199085fabd3b06c16470afe-2e40
</I>&gt;<i> &gt; &gt; From: Srikanth
</I>&gt;<i> &gt; &gt; &lt;sips:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">a19563 at open-ims.test</A>&gt;;tag=18-16941760-0101345c-00000001
</I>&gt;<i> &gt; &gt; Call-ID: <A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">0101345c0102cb901 at 16856156</A>
</I>&gt;<i> &gt; &gt; &lt;mailto:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">0101345c0102cb901 at 16856156</A>&gt;
</I>&gt;<i> &gt; &gt; CSeq: 1 REGISTER
</I>&gt;<i> &gt; &gt; Via: SIP/2.0/TLS
</I>&gt;<i> &gt; &gt; 10.232.44.85:5081;rport=2041;branch=z9hG4bK156296559fcc6d
</I>&gt;<i> &gt; &gt; Server: Sip EXpress router (2.1.0-dev1 OpenIMSCore (i386/linux))
</I>&gt;<i> &gt; &gt; Content-Length: 0
</I>&gt;<i> &gt; &gt; Warning: 392 10.232.15.41:4061 &quot;Noisy feedback tells:  pid=21910
</I>&gt;<i> &gt; &gt; req_src_ip=10.232.44.85 req_src_port=2041 in_uri=sips:open-ims.test
</I>&gt;<i> &gt; &gt; out_uri=sips:open-ims.test via_cnt==1&quot;
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; &lt;&lt;
</I>&gt;<i> &gt; &gt; SIP/2.0 500 Error forwarding to Home Domain
</I>&gt;<i> &gt; &gt; To: Srikanth
</I>&gt;<i> &gt; &gt; &lt;sips:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">a19563 at open-ims.test</A>&gt;;tag=b1623caad70c0d423698fb1411191807.2e40
</I>&gt;<i> &gt; &gt; From: Srikanth
</I>&gt;<i> &gt; &gt; &lt;sips:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">a19563 at open-ims.test</A>&gt;;tag=18-16941760-0101345c-00000001
</I>&gt;<i> &gt; &gt; Call-ID: <A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">0101345c0102cb901 at 16856156</A>
</I>&gt;<i> &gt; &gt; &lt;mailto:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">0101345c0102cb901 at 16856156</A>&gt;
</I>&gt;<i> &gt; &gt; CSeq: 1 REGISTER
</I>&gt;<i> &gt; &gt; Via: SIP/2.0/TLS
</I>&gt;<i> &gt; &gt; 10.232.44.85:5081;rport=2041;branch=z9hG4bK156296559fcc6d
</I>&gt;<i> &gt; &gt; Server: Sip EXpress router (2.1.0-dev1 OpenIMSCore (i386/linux))
</I>&gt;<i> &gt; &gt; Content-Length: 0
</I>&gt;<i> &gt; &gt; Warning: 392 10.232.15.41:4061 &quot;Noisy feedback tells:  pid=21910
</I>&gt;<i> &gt; &gt; req_src_ip=10.232.44.85 req_src_port=2041 in_uri=sips:open-ims.test
</I>&gt;<i> &gt; &gt; out_uri=sips:open-ims.test via_cnt==1&quot;
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; Attached the tcpdump report. Appreciate ur help in this regrad.
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; Question: Do I need to create a subscription/Public Identity Record
</I>&gt;<i> &gt; &gt; for sips:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">a19563 at open-ims.test</A>? I just created one entry for
</I>&gt;<i> &gt; &gt; sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">a19563 at open-ims.test</A>?
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; Regards
</I>&gt;<i> &gt; &gt; Srikanth
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; --
</I>&gt;<i> &gt; Psssst! Schon vom neuen GMX MultiMessenger geh&#246;rt? Der kann`s mit allen:
</I>&gt;<i> &gt; <A HREF="http://www.gmx.net/de/go/multimessenger01">http://www.gmx.net/de/go/multimessenger01</A>
</I>&gt;<i> 
</I>&gt;<i> --
</I>&gt;<i> Jetzt 1 Monat kostenlos! GMX FreeDSL - Telefonanschluss + DSL
</I>&gt;<i> f&#252;r nur 17,95 Euro/mtl.!* <A HREF="http://dsl.gmx.de/?ac=OM.AD.PD003K11308T4569a">http://dsl.gmx.de/?ac=OM.AD.PD003K11308T4569a</A>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> OpenIMSCore-Users mailing list
</I>&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">OpenIMSCore-Users at lists.berlios.de</A>
</I>&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">https://lists.berlios.de/mailman/listinfo/openimscore-users</A>
</I>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="005037.html">[OpenIMSCore-Users] REGISTER over TLS resulting &quot;477 Unfortunatelyerror on sending to next hop occurred&quot;
</A></li>
	<LI>Next message: <A HREF="005043.html">[OpenIMSCore-Users] query
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5038">[ date ]</a>
              <a href="thread.html#5038">[ thread ]</a>
              <a href="subject.html#5038">[ subject ]</a>
              <a href="author.html#5038">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/openimscore-users">More information about the OpenIMSCore-Users
mailing list</a><br>
</body></html>
