<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [OpenIMSCore-Users] IMS level registration and OSIMS
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/openimscore-users/2007-January/index.html" >
   <LINK REL="made" HREF="mailto:openimscore-users%40lists.berlios.de?Subject=Re%3A%20%5BOpenIMSCore-Users%5D%20IMS%20level%20registration%20and%20OSIMS&In-Reply-To=%3C714966.72949.qm%40web53601.mail.yahoo.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000527.html">
   <LINK REL="Next"  HREF="000541.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[OpenIMSCore-Users] IMS level registration and OSIMS</H1>
    <B>Bindu B Pillai</B> 
    <A HREF="mailto:openimscore-users%40lists.berlios.de?Subject=Re%3A%20%5BOpenIMSCore-Users%5D%20IMS%20level%20registration%20and%20OSIMS&In-Reply-To=%3C714966.72949.qm%40web53601.mail.yahoo.com%3E"
       TITLE="[OpenIMSCore-Users] IMS level registration and OSIMS">bbp44 at yahoo.com
       </A><BR>
    <I>Tue Jan 23 19:56:09 CET 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="000527.html">[OpenIMSCore-Users] How to send sip Register request to pcscf
</A></li>
        <LI>Next message: <A HREF="000541.html">[OpenIMSCore-Users] IMS level registration and OSIMS
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#534">[ date ]</a>
              <a href="thread.html#534">[ thread ]</a>
              <a href="subject.html#534">[ subject ]</a>
              <a href="author.html#534">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I just realised, I didn't post this to the user
group...

Here is the error I see on the SCSCF window when I try
to register. This is the same error I saw with my
older version as well (taken early-mid december). So
whatever changes were in effect for AKA
authentication... didn't really make a difference to
scenario where the IMS client is trying to register.

12(2292) DBG:sm_process(): Peer hss.open-ims.test     
 State I_Open    Event I_Rcv_Message

 1(2248) DBG:S-CSCF:S_is_authorized: UE said:
980f84bb3feb63b90c997eb0d7d75114 and we  expect
e1995e3f17d131b714e95e85b6a3a825 ha1
ab6bb1e2d50c60f36109c998a30eecb8

12(2292) DBG:sm_process(): Peer hss.open-ims.test     
 State I_Open    Event I_Rcv_Message

 1(2248) DBG:S-CSCF:S_is_authorized: UE said:
f7b06be68aa56ca4f9f4366defa26ea6 and we  expect
5e14424b8935c5e587f53e7be6b3766d ha1
58a3bdd8fdb34c3a79e2e276c60bf363

--- Bindu B Pillai &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">bbp44 at yahoo.com</A>&gt; wrote:

&gt;<i> Hi Dragos...
</I>&gt;<i> 
</I>&gt;<i> So if I were not using the SIP2IMS gateway... the
</I>&gt;<i> AKA
</I>&gt;<i> fix is not in effect then? correct? 
</I>&gt;<i> 
</I>&gt;<i> What is the latest AKA fix? 
</I>&gt;<i> 
</I>&gt;<i> Thanks,
</I>&gt;<i> -bindu
</I>&gt;<i> 
</I>&gt;<i> --- Dragos Vingarzan &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">vingarzan at fokus.fraunhofer.de</A>&gt;
</I>&gt;<i> wrote:
</I>&gt;<i> 
</I>&gt;<i> &gt; Then the question would be: Is the client
</I>&gt;<i> up-to-date
</I>&gt;<i> &gt; with the latest AKA
</I>&gt;<i> &gt; fix? The SIP2IMS gateway is.
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; OP and AMF - we are usually filling them with
</I>&gt;<i> zeros
</I>&gt;<i> &gt; for easier
</I>&gt;<i> &gt; debugging. They are essential. Try to find out the
</I>&gt;<i> &gt; values pre-compiled
</I>&gt;<i> &gt; in the client (if they are not configurable) and
</I>&gt;<i> &gt; then provision the same
</I>&gt;<i> &gt; values in the HSS.
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; -Dragos
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; Bindu B Pillai wrote:
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; I downloaded the latest version and tried to run
</I>&gt;<i> &gt; the
</I>&gt;<i> &gt; &gt; REGISTER message from the IMS client again.
</I>&gt;<i> &gt; &gt; I get the same 401 messages as with the previous
</I>&gt;<i> &gt; rev.
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; What can I look at further on the core side, to
</I>&gt;<i> &gt; help
</I>&gt;<i> &gt; &gt; debug the scenario? The IMS client is configured
</I>&gt;<i> &gt; as
</I>&gt;<i> &gt; &gt; given in the installation guide. The only
</I>&gt;<i> missing
</I>&gt;<i> &gt; part
</I>&gt;<i> &gt; &gt; is OP and AMF - I don't know what these are. Are
</I>&gt;<i> &gt; these
</I>&gt;<i> &gt; &gt; essential for a successful registration?
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; How can I look at what actual key is being
</I>&gt;<i> shared
</I>&gt;<i> &gt; in
</I>&gt;<i> &gt; &gt; the messages?
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; Thanks,
</I>&gt;<i> &gt; &gt; -bindu
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; --- Dragos Vingarzan
</I>&gt;<i> &gt; &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">vingarzan at fokus.fraunhofer.de</A>&gt;
</I>&gt;<i> &gt; &gt; wrote:
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; But Bindu, the headers received and sent by
</I>&gt;<i> the
</I>&gt;<i> &gt; &gt; &gt; SIP2IMS are completely
</I>&gt;<i> &gt; &gt; &gt; different on the 2 sides. There are 2
</I>&gt;<i> &gt; authorization
</I>&gt;<i> &gt; &gt; &gt; happening:
</I>&gt;<i> &gt; &gt; &gt; - one between the SIP client and the SIP2IMS
</I>&gt;<i> &gt; gateway
</I>&gt;<i> &gt; &gt; &gt; as a server - that
</I>&gt;<i> &gt; &gt; &gt; is MD5
</I>&gt;<i> &gt; &gt; &gt; - one between the SIP2IMS gateway as a client
</I>&gt;<i> &gt; and
</I>&gt;<i> &gt; &gt; &gt; the IMS Core as a
</I>&gt;<i> &gt; &gt; &gt; server - that is AKAv1-MD5
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; They happen in &quot;parallel&quot; and if the first is
</I>&gt;<i> &gt; &gt; &gt; successful, the the
</I>&gt;<i> &gt; &gt; &gt; SIP2IMS gateway will try and make the 2nd one
</I>&gt;<i> &gt; &gt; &gt; successful.
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; Regarding authorization with an AKA client,
</I>&gt;<i> &gt; there
</I>&gt;<i> &gt; &gt; &gt; was recent fix. Please
</I>&gt;<i> &gt; &gt; &gt; see the revision 84 log:
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt;
</I>&gt;<i>
</I><A HREF="https://lists.berlios.de/pipermail/openimscore-cscf/2007-January/000121.html">https://lists.berlios.de/pipermail/openimscore-cscf/2007-January/000121.html</A>
&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; -Dragos
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; Bindu B Pillai wrote:
</I>&gt;<i> &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; OK... help me understand this then.
</I>&gt;<i> &gt; &gt; &gt; &gt; To start with, I used the Xlite through the
</I>&gt;<i> &gt; &gt; &gt; sip2ims
</I>&gt;<i> &gt; &gt; &gt; &gt; gateway. The registration worked.
</I>&gt;<i> &gt; &gt; &gt; &gt; With the IMS client, i'm not able to get it
</I>&gt;<i> to
</I>&gt;<i> &gt; &gt; &gt; &gt; register.
</I>&gt;<i> &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; Here is the output from Xlite soft sip phone
</I>&gt;<i> &gt; &gt; &gt; working
</I>&gt;<i> &gt; &gt; &gt; &gt; with the sip2ims gateway for registration.
</I>&gt;<i> The
</I>&gt;<i> &gt; 2nd
</I>&gt;<i> &gt; &gt; &gt; &gt; REGISTER message sent has the nonce from the
</I>&gt;<i> &gt; 401
</I>&gt;<i> &gt; &gt; &gt; &gt; message received, but the response is
</I>&gt;<i> &gt; different.
</I>&gt;<i> &gt; &gt; &gt; &gt; Should this be a 1 to 1 match is my
</I>&gt;<i> question.
</I>&gt;<i> &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; REGISTER sip:open-ims.test SIP/2.0
</I>&gt;<i> &gt; &gt; &gt; &gt; Via: SIP/2.0/UDP
</I>&gt;<i> &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt;
</I>&gt;<i>
</I>172.16.0.11:26418;branch=z9hG4bK-d87543-3b550060c5029939-1--d87543-;rport
&gt;<i> &gt; &gt; &gt; &gt; Max-Forwards: 70
</I>&gt;<i> &gt; &gt; &gt; &gt; Contact:
</I>&gt;<i> &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt;
</I>&gt;<i>
</I>&lt;sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">alice at 172.16.0.11</A>:26418;rinstance=57a223723d7be6f1&gt;
&gt;<i> &gt; &gt; &gt; &gt; To: &quot;&quot;Alice&quot;&quot;&lt;sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">alice at open-ims.test</A>&gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; From:
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &quot;&quot;Alice&quot;&quot;&lt;sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">alice at open-ims.test</A>&gt;;tag=a704b36c
</I>&gt;<i> &gt; &gt; &gt; &gt; Call-ID:
</I>&gt;<i> &gt; &gt; &gt; ZWM4YWIzNTExZGRjMzQyNzYzNmM2YWIxY2VlZGIyYWU.
</I>&gt;<i> &gt; &gt; &gt; &gt; CSeq: 1 REGISTER
</I>&gt;<i> &gt; &gt; &gt; &gt; Expires: 3600
</I>&gt;<i> &gt; &gt; &gt; &gt; Allow: INVITE, ACK, CANCEL, OPTIONS, BYE,
</I>&gt;<i> &gt; REFER,
</I>&gt;<i> &gt; &gt; &gt; &gt; NOTIFY, MESSAGE, SUBSCRIBE, INFO
</I>&gt;<i> &gt; &gt; &gt; &gt; User-Agent: X-Lite release 1006e stamp 34025
</I>&gt;<i> &gt; &gt; &gt; &gt; Content-Length: 0
</I>&gt;<i> &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; SIP/2.0 401 Unauthorized - Challenging the
</I>&gt;<i> UE
</I>&gt;<i> &gt; &gt; &gt; &gt; Via: SIP/2.0/UDP
</I>&gt;<i> &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt;
</I>&gt;<i>
</I>172.16.0.11:26418;branch=z9hG4bK-d87543-3b550060c5029939-1--d87543-;rport=26418
&gt;<i> &gt; &gt; &gt; &gt; Path: &lt;sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">term at pcscf.open-ims.test</A>:4060;lr&gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; Service-Route:
</I>&gt;<i> &gt; &gt; &gt; &lt;sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">orig at scscf.open-ims.test</A>:6060;lr&gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; To:
</I>&gt;<i> &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt;
</I>&gt;<i>
</I>&quot;&quot;Alice&quot;&quot;&lt;sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">alice at open-ims.test</A>&gt;;tag=8a8b4a4bfe6e9e279a0f819adaa9fa5e-15e0
&gt;<i> &gt; &gt; &gt; &gt; From:
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &quot;&quot;Alice&quot;&quot;&lt;sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">alice at open-ims.test</A>&gt;;tag=a704b36c
</I>&gt;<i> &gt; &gt; &gt; &gt; Call-ID:
</I>&gt;<i> &gt; &gt; &gt; ZWM4YWIzNTExZGRjMzQyNzYzNmM2YWIxY2VlZGIyYWU.
</I>&gt;<i> &gt; &gt; &gt; &gt; CSeq: 1 REGISTER
</I>&gt;<i> &gt; &gt; &gt; &gt; Server: Sip EXpress router
</I>&gt;<i> &gt; (0.10.99-dev53-tm_fixes
</I>&gt;<i> &gt; &gt; &gt; &gt; (i386/linux))
</I>&gt;<i> &gt; &gt; &gt; &gt; Warning: 392 192.168.64.2:6060 &quot;&quot;Noisy
</I>&gt;<i> &gt; feedback
</I>&gt;<i> &gt; &gt; &gt; tells:
</I>&gt;<i> &gt; &gt; &gt; &gt;  pid=23809 req_src_ip=192.168.64.2
</I>&gt;<i> &gt; &gt; &gt; req_src_port=5060
</I>&gt;<i> &gt; &gt; &gt; &gt; in_uri=sip:scscf.open-ims.test:6060
</I>&gt;<i> &gt; &gt; &gt; &gt; out_uri=sip:scscf.open-ims.test:6060
</I>&gt;<i> &gt; via_cnt==4&quot;&quot;
</I>&gt;<i> &gt; &gt; &gt; &gt; WWW-Authenticate: Digest
</I>&gt;<i> &gt; &gt; &gt; &gt; username=&quot;&quot;<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">alice at open-ims.test</A>&quot;&quot;,
</I>&gt;<i> &gt; &gt; &gt; &gt; realm=&quot;&quot;open-ims.test&quot;&quot;,
</I>&gt;<i> &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt;
</I>&gt;<i>
</I>opaque=&quot;&quot;AKAv1-MD5ETKl/AmZLeLQGGkEahISbwAAAAABNAAAUg2QxyjnlpE=&quot;&quot;,
&gt;<i> &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> nonce=&quot;&quot;45a5159f3ee620dc5f79b32027e4753f9e231463&quot;&quot;,
</I>&gt;<i> &gt; &gt; &gt; &gt; algorithm=MD5
</I>&gt;<i> &gt; &gt; &gt; &gt; Content-Length: 0
</I>&gt;<i> &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; REGISTER sip:open-ims.test SIP/2.0
</I>&gt;<i> &gt; &gt; &gt; &gt; Via: SIP/2.0/UDP
</I>&gt;<i> &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt;
</I>&gt;<i>
</I>172.16.0.11:26418;branch=z9hG4bK-d87543-19411c32c739c507-1--d87543-;rport
&gt;<i> &gt; &gt; &gt; &gt; Max-Forwards: 70
</I>&gt;<i> 
</I>=== message truncated ===



 
____________________________________________________________________________________
Sucker-punch spam with award-winning protection. 
Try the free Yahoo! Mail Beta.
<A HREF="http://advision.webevents.yahoo.com/mailbeta/features_spam.html">http://advision.webevents.yahoo.com/mailbeta/features_spam.html</A>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000527.html">[OpenIMSCore-Users] How to send sip Register request to pcscf
</A></li>
	<LI>Next message: <A HREF="000541.html">[OpenIMSCore-Users] IMS level registration and OSIMS
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#534">[ date ]</a>
              <a href="thread.html#534">[ thread ]</a>
              <a href="subject.html#534">[ subject ]</a>
              <a href="author.html#534">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/openimscore-users">More information about the OpenIMSCore-Users
mailing list</a><br>
</body></html>
