<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [OpenIMSCore-Users] Openser AS cannot pass through S-CSCF a MESSAGE	request
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/openimscore-users/2007-November/index.html" >
   <LINK REL="made" HREF="mailto:openimscore-users%40lists.berlios.de?Subject=Re%3A%20%5BOpenIMSCore-Users%5D%20Openser%20AS%20cannot%20pass%20through%20S-CSCF%20a%20MESSAGE%0A%09request&In-Reply-To=%3C58700.138.4.7.163.1195211264.squirrel%40jungla.dit.upm.es%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003042.html">
   <LINK REL="Next"  HREF="002947.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[OpenIMSCore-Users] Openser AS cannot pass through S-CSCF a MESSAGE	request</H1>
    <B>Alvaro Mari Diego</B> 
    <A HREF="mailto:openimscore-users%40lists.berlios.de?Subject=Re%3A%20%5BOpenIMSCore-Users%5D%20Openser%20AS%20cannot%20pass%20through%20S-CSCF%20a%20MESSAGE%0A%09request&In-Reply-To=%3C58700.138.4.7.163.1195211264.squirrel%40jungla.dit.upm.es%3E"
       TITLE="[OpenIMSCore-Users] Openser AS cannot pass through S-CSCF a MESSAGE	request">amdiego at dit.upm.es
       </A><BR>
    <I>Fri Nov 16 12:07:44 CET 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="003042.html">[OpenIMSCore-Users] I-CSCF stops responding
</A></li>
        <LI>Next message: <A HREF="002947.html">[OpenIMSCore-Users] Openser AS cannot pass through S-CSCF a MESSAGE request
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2946">[ date ]</a>
              <a href="thread.html#2946">[ thread ]</a>
              <a href="subject.html#2946">[ subject ]</a>
              <a href="author.html#2946">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi everyone!

I've got a HelloWorld SIP-Servlet running on WeSIP over OpenSER AS, which
is configured as deflault AS in OpenIMSCore. Any request excepto REGISTER
is forwarded by the SCSCF to OpenSER.

The HelloWorldServlet takes any client incoming MESSAGE request, responses
a 200 OK and a new MESSAGE request with content = &quot;Hello World&quot;. The thing
is, the 200 OK respones reaches my client sucecssfully, but the &quot;Hello,
World!&quot; MESSAGE request get stuck in the S-CSCF, getting in my AS a &quot;403
Forbidden - Dialog not found on S-CSCF or Terminating user not suitable
for unregistered services&quot; response. The MESSAGE request from the AS has
got a header to get permission without register in the network, like this:

messageRequest.addHeader(&quot;p-asserted-identity&quot;,

                &quot;sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">helloworld at amd-openims.test</A>&quot;);

But it's not working. I also tried to add a push-route header to the
P-CSCF, but it responses a &quot;403 Forbidden Not Registered&quot; because of not
going through the SCSCF first.

I attach you a capture of one example of the message flow of the problem.
the IPs are:

- 138.4.7.149:1748: client (X-Lite), outside the network.
- 138.4.7.163:4060: OpenIMSCore P-CSCF
- 138.4.7.163:6060: OpenIMSCore S-CSCF
- 138.4.7.163:5080: OpenSER+WeSIP AS

I wonder if  maybe i've got to configure the S-CSCF or the USER PROFILE in
the FoHSS web UI to make the SCSCF allow the MESSAGE request, but i dont'
know how to do it. Any idea of what's going on?

Cheers,

-- 
&#193;lvaro Mar&#237;
-------------- next part --------------
A non-text attachment was scrubbed...
Name: 403capture
Type: application/octet-stream
Size: 37900 bytes
Desc: not available
URL: &lt;<A HREF="https://lists.berlios.de/pipermail/openimscore-users/attachments/20071116/e79b2386/attachment.obj">https://lists.berlios.de/pipermail/openimscore-users/attachments/20071116/e79b2386/attachment.obj</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003042.html">[OpenIMSCore-Users] I-CSCF stops responding
</A></li>
	<LI>Next message: <A HREF="002947.html">[OpenIMSCore-Users] Openser AS cannot pass through S-CSCF a MESSAGE request
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2946">[ date ]</a>
              <a href="thread.html#2946">[ thread ]</a>
              <a href="subject.html#2946">[ subject ]</a>
              <a href="author.html#2946">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/openimscore-users">More information about the OpenIMSCore-Users
mailing list</a><br>
</body></html>
