<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [OpenIMSCore-Users] Need help on DNS Zone file changes
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/openimscore-users/2007-November/index.html" >
   <LINK REL="made" HREF="mailto:openimscore-users%40lists.berlios.de?Subject=Re%3A%20%5BOpenIMSCore-Users%5D%20Need%20help%20on%20DNS%20Zone%20file%20changes&In-Reply-To=%3CBAY107-W38B5D2A6C991614910B615BA810%40phx.gbl%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002921.html">
   <LINK REL="Next"  HREF="002955.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[OpenIMSCore-Users] Need help on DNS Zone file changes</H1>
    <B>Jingyi Hu</B> 
    <A HREF="mailto:openimscore-users%40lists.berlios.de?Subject=Re%3A%20%5BOpenIMSCore-Users%5D%20Need%20help%20on%20DNS%20Zone%20file%20changes&In-Reply-To=%3CBAY107-W38B5D2A6C991614910B615BA810%40phx.gbl%3E"
       TITLE="[OpenIMSCore-Users] Need help on DNS Zone file changes">jhu2000 at hotmail.com
       </A><BR>
    <I>Wed Nov 14 23:02:33 CET 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="002921.html">[OpenIMSCore-Users] Need help on DNS Zone file changes
</A></li>
        <LI>Next message: <A HREF="002955.html">[OpenIMSCore-Users] Need help on DNS Zone file changes
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2942">[ date ]</a>
              <a href="thread.html#2942">[ thread ]</a>
              <a href="subject.html#2942">[ subject ]</a>
              <a href="author.html#2942">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
Hi Dragos,
 
Thank you for the help and email. 
 
After I did changes for /opt/OpenIMSCore/*.cfg, /opt/OpenIMSCore/*.sh, /opt/OpenIMSCore/*.xml
 
I got the logs from pscf and icscf, do it looks ok to you?
 
[<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">root at VoIPIMS</A> OpenIMSCore]# ./pcscf.sh./pcscf.sh: line 3: killser: command not found./pcscf.sh: line 4: setkey: command not found./pcscf.sh: line 5: setkey: command not found 0(6698) WARNING: fix_socket_list: could not rev. resolve 10.1.41.100 0(6698) WARNING: fix_socket_list: could not rev. resolve 10.1.41.100Listening on             udp: 10.1.41.100 [10.1.41.100]:4060             tcp: 10.1.41.100 [10.1.41.100]:4060Aliases:             *: pcscf.open-ims.test:4060
 0(6698) init_tcp: using epoll_lt as the io watch method (auto detected) 0(6698) Maxfwd module- initializing 0(6698) INFO:P-CSCF:mod_init: Initialization of module 0(6698) INFO: udp_init: SO_RCVBUF is initially 129024 0(6698) INFO: udp_init: SO_RCVBUF is finally 262142 2(6700) INFO:P-CSCF:mod_init: Initialization of module in child [2] 1(6699) INFO:P-CSCF:mod_init: Initialization of module in child [1] 3(6701) INFO:P-CSCF:mod_init: Initialization of module in child [3] 4(6702) INFO:P-CSCF:mod_init: Initialization of module in child [4] 5(6703) INFO:P-CSCF:mod_init: Initialization of module in child [-1] 6(6704) INFO:P-CSCF:mod_init: Initialization of module in child [-1] 0(6698) INFO:P-CSCF:mod_init: Initialization of module in child [0] 7(6705) INFO:P-CSCF:mod_init: Initialization of module in child [5] 8(6706)  9(6707) INFO:P-CSCF:mod_init: Initialization of module in child [7]10(6708) INFO:P-CSCF:mod_init: Initialization of module in child [8]11(6709) INFO:P-CSCF:mod_init: Initialization of module in child [-4]INFO:P-CSCF:mod_init: Initialization of module in child [6] 5(6703) INF:P-CSCF:----------  Registrar Contents begin -------- 5(6703) INF:P-CSCF:----------  Registrar Contents end ---------- 5(6703) INF:P-CSCF:----------  Subscription list begin --------- 5(6703) INF:P-CSCF:----------  Subscription list end ----------- 5(6703) INF:P-CSCF:----------  Registrar Contents begin -------- 5(6703) INF:P-CSCF:----------  Registrar Contents end ---------- 5(6703) INF:P-CSCF:----------  Subscription list begin --------- 5(6703) INF:P-CSCF:----------  Subscription list end ----------- 5(6703) INF:P-CSCF:----------  Registrar Contents begin -------- 5(6703) INF:P-CSCF:----------  Registrar Contents end ---------- 5(6703) INF:P-CSCF:----------  Subscription list begin --------- 5(6703) INF:P-CSCF:----------  Subscription list end ----------- 5(6703) INF:P-CSCF:----------  Registrar Contents begin -------- 5(6703) INF:P-CSCF:----------  Registrar Contents end ---------- 5(6703) INF:P-CSCF:----------  Subscription list begin ---------
 
 
 
<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">root at VoIPIMS</A> ~]# cd /opt[<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">root at VoIPIMS</A> opt]# cd Open*[<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">root at VoIPIMS</A> OpenIMSCore]# ./icscf.sh./icscf.sh: line 3: killser: command not found 0(6745) WARNING: fix_socket_list: could not rev. resolve 10.1.41.100 0(6745) WARNING: fix_socket_list: could not rev. resolve 10.1.41.100Listening on             udp: 10.1.41.100 [10.1.41.100]:5060             tcp: 10.1.41.100 [10.1.41.100]:5060Aliases:             *: open-ims.test:*             *: icscf.open-ims.test:*
 0(6745) init_tcp: using epoll_lt as the io watch method (auto detected) 0(6745) Maxfwd module- initializing 0(6745) INFO:I-CSCF:mod_init: Initialization of module 0(6745) INF:I-CSCF:icscf_db_get_nds: Loaded 1 trusted domains 0(6745) INF:I-CSCF:icscf_db_get_capabilities: Loaded 2 capabilities for 1 S-CSCFs (0 invalid entries in db) 0(6745) Twofish encryption ready 0(6745) INFO:cdp:cdp_init(): CDiameterPeer initializing 0(6745) Diameter Peer Config: 0(6745)        FQDN    : icscf.open-ims.test 0(6745)        Realm   : open-ims.test 0(6745)        VendorID: 10415 0(6745)        ProdName: CDiameterPeer 0(6745)        AcceptUn: [X] 0(6745)        DropUnkn: [X] 0(6745)        Tc      : 30 0(6745)        Workers : 4 0(6745)        QueueLen: 8 0(6745)        Peers : 1 0(6745)                FQDN:  hss.open-ims.test         Realm: open-ims.test   Port: 3868 0(6745)        Acceptors : 1 0(6745)                Port:  3869      Bind: 10.1.41.100 0(6745)        Applications : 1 0(6745)                Auth ID:  16777216       Vendor: 10415 0(6745)        Routing Table : 0(6745)                DefaultRoute: [  10] hss.open-ims.test 0(6745) INFO: udp_init: SO_RCVBUF is initially 129024 0(6745) INFO: udp_init: SO_RCVBUF is finally 262142 2(6748)  1(6747) INFO:I-CSCF:mod_init: Initialization of module in child [1] receiver child=0 sock=10.1.41.100:5060INFO:I-CSCF:mod_init: Initialization of module in child [2] 3(6749) INFO:I-CSCF:mod_init: Initialization of module in child [3] 4(6750) INFO:I-CSCF:mod_init: Initialization of module in child [4] receiver child=3 sock=10.1.41.100:5060 5(6751) INFO:I-CSCF:mod_init: Initialization of module in child [-1] 0(6745)  6(6752) INFO:I-CSCF:mod_init: Initialization of module in child [-1] timerINFO:I-CSCF:mod_init: Initialization of module in child [0] main 0(6745) INFO:cdp:cdp_child_init(): CDiameterPeer starting ... 7(6753) INFO:I-CSCF:mod_init: Initialization of module in child [1000] 7(6753) INFO:Acceptor process starting up... 7(6753) INFO:create_sockets: IPv4 Listening on 10.1.41.100:3869 7(6753) INFO:... Acceptor opened sockets. Entering accept loop ... 8(6754) INFO:I-CSCF:mod_init: Initialization of module in child [1001] cdp_worker 9(6755)  8(6754) INFO:I-CSCF:mod_init: Initialization of module in child [1002]INFO:[0] Worker process started...10(6756)  9(6755) INFO:[1] Worker process started...INFO:I-CSCF:mod_init: Initialization of module in child [1003] cdp_worker12(6758) INFO:I-CSCF:mod_init: Initialization of module in child [1001] cdp_timer10(6756) INFO:[2] Worker process started...11(6757)  0(6745) INFO:cdp:cdp_child_init(): ... CDiameterPeer started12(6758) INFO:Timer process starting up...INFO:I-CSCF:mod_init: Initialization of module in child [1004] cdp_worker11(6757) INFO:[3] Worker process started...13(6759) INFO:I-CSCF:mod_init: Initialization of module in child [5]14(6760) INFO:I-CSCF:mod_init: Initialization of module in child [6]15(6761) INFO:I-CSCF:mod_init: Initialization of module in child [7] tcp receiver child=216(6762) INFO:I-CSCF:mod_init: Initialization of module in child [8] tcp receiver child=317(6763) INFO:I-CSCF:mod_init: Initialization of module in child [-4] tcp main process12(6758) DBG:peer_timer(): Peer hss.open-ims.test       State 012(6758) DBG:sm_process(): Peer hss.open-ims.test       State Closed    Event Start12(6758) DBG:I_Snd_Conn_Req(): Peer hss.open-ims.test12(6758) WARNING:peer_connect(): Error opening connection to hss.open-ims.test:3868 &gt;Connection refused12(6758) DBG:sm_process(): Peer hss.open-ims.test       State Wait_Conn_Ack    Event I_Rcv_Conn_NAck12(6758) --- Peer List: ---12(6758)  S[Closed] hss.open-ims.test:3868 D[ ]12(6758) ------------------12(6758) --- Peer List: ---12(6758)  S[Closed] hss.open-ims.test:3868 D[ ]12(6758) ------------------12(6758) --- Peer List: ---12(6758)  S[Closed] hss.open-ims.test:3868 D[ ]12(6758) ------------------12(6758) --- Peer List: ---12(6758)  S[Closed] hss.open-ims.test:3868 D[ ]12(6758) ------------------12(6758) --- Peer List: ---12(6758)  S[Closed] hss.open-ims.test:3868 D[ ]12(6758) ------------------
 
 
 
After that, I run ./startup.sh for FHoSS. Here is the logs:
 
[<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">root at VoIPIMS</A> deploy]# ./startup.shBuilding ClasspathClasspath is lib/xml-apis.jar:lib/xercesImpl.jar:lib/xerces-2.4.0.jar:lib/xalan-2.4.0.jar:lib/tomcat-util.jar:lib/tomcat-http.jar:lib/tomcat-coyote.jar:lib/struts.jar:lib/servlets-default.jar:lib/servlet-api.jar:lib/naming-resources.jar:lib/naming-factory.jar:lib/mysql-connector-java-3.1.12-bin.jar:lib/mx4j-3.0.1.jar:lib/log4j.jar:lib/junit.jar:lib/junitee.jar:lib/jta.jar:lib/jsp-api.jar:lib/jmx.jar:lib/jdp.jar:lib/jasper-runtime.jar:lib/jasper-compiler-jdt.jar:lib/jasper-compiler.jar:lib/hibernate3.jar:lib/FHoSS.jar:lib/ehcache-1.1.jar:lib/dom4j-1.6.1.jar:lib/commons-validator.jar:lib/commons-modeler.jar:lib/commons-logging.jar:lib/commons-logging-1.0.4.jar:lib/commons-lang.jar:lib/commons-fileupload.jar:lib/commons-el.jar:lib/commons-digester.jar:lib/commons-collections-3.1.jar:lib/commons-beanutils.jar:lib/cglib-2.1.3.jar:lib/catalina-optional.jar:lib/catalina.jar:lib/c3p0-0.9.1.jar:lib/base64.jar:lib/asm.jar:lib/asm-attrs.jar:lib/antlr-2.7.6.jar::log4j.properties:..2007-11-14 13:45:46,083 INFO  de.fhg.fokus.hss.main.TomcatServer - startTomcat Tomcat-Server is started.2007-11-14 13:45:46,649 WARN  org.apache.catalina.connector.MapperListener - registerEngine Unknown default host: 10.1.41.1002007-11-14 13:45:47,184 INFO  de.fhg.fokus.hss.web.servlet.ResponseFilter - init Response Filter Initialisation!2007-11-14 13:45:47,633 INFO  de.fhg.fokus.hss.main.TomcatServer - startTomcat WebConsole of FHoSS was started !2007-11-14 13:45:49,917 WARN  org.hibernate.impl.SessionFactoryObjectFactory - addInstance InitialContext did not implement EventContext2007-11-14 13:45:49,956 INFO  de.fhg.fokus.diameter.DiameterPeer.DiameterPeer - &lt;init&gt; FQDN: hss.open-ims.test2007-11-14 13:45:49,956 INFO  de.fhg.fokus.diameter.DiameterPeer.DiameterPeer - &lt;init&gt; Realm: open-ims.test2007-11-14 13:45:49,956 INFO  de.fhg.fokus.diameter.DiameterPeer.DiameterPeer - &lt;init&gt; Vendor_ID : 104152007-11-14 13:45:49,957 INFO  de.fhg.fokus.diameter.DiameterPeer.DiameterPeer - &lt;init&gt; Product Name: JavaDiameterPeer2007-11-14 13:45:49,957 INFO  de.fhg.fokus.diameter.DiameterPeer.DiameterPeer - &lt;init&gt; AcceptUnknwonPeers: true2007-11-14 13:45:49,957 INFO  de.fhg.fokus.diameter.DiameterPeer.DiameterPeer - &lt;init&gt; DropUnknownOnDisconnect: true2007-11-14 13:45:49,980 INFO  de.fhg.fokus.hss.main.HSSContainer - waitForExitType &quot;exit&quot; to stop FHoSS!2007-11-14 13:45:49,982 ERROR de.fhg.fokus.diameter.DiameterPeer.peer.StateMachine - I_Snd_Conn_Req StateMachine: Peer icscf.open-ims.test not responding to connection attempt2007-11-14 13:45:49,983 ERROR de.fhg.fokus.diameter.DiameterPeer.peer.StateMachine - I_Snd_Conn_Req StateMachine: Peer scscf.open-ims.test not responding to connection attempt2007-11-14 13:46:20,040 ERROR de.fhg.fokus.diameter.DiameterPeer.peer.StateMachine - I_Snd_Conn_Req StateMachine: Peer icscf.open-ims.test not responding to connection attempt2007-11-14 13:46:20,041 ERROR de.fhg.fokus.diameter.DiameterPeer.peer.StateMachine - I_Snd_Conn_Req StateMachine: Peer scscf.open-ims.test not responding to connection attempt2007-11-14 13:46:50,096 ERROR de.fhg.fokus.diameter.DiameterPeer.peer.StateMachine - I_Snd_Conn_Req StateMachine: Peer icscf.open-ims.test not responding to connection attempt2007-11-14 13:46:50,097 ERROR de.fhg.fokus.diameter.DiameterPeer.peer.StateMachine - I_Snd_Conn_Req StateMachine: Peer scscf.open-ims.test not responding to connection attempt2007-11-14 13:47:20,155 ERROR de.fhg.fokus.diameter.DiameterPeer.peer.StateMachine - I_Snd_Conn_Req StateMachine: Peer icscf.open-ims.test not responding to connection attempt2007-11-14 13:47:20,155 ERROR de.fhg.fokus.diameter.DiameterPeer.peer.StateMachine - I_Snd_Conn_Req StateMachine: Peer scscf.open-ims.test not responding to connection attempt2007-11-14 13:47:50,213 ERROR de.fhg.fokus.diameter.DiameterPeer.peer.StateMachine - I_Snd_Conn_Req StateMachine: Peer icscf.open-ims.test not responding to connection attempt
 
 
 
Do you see any problem? The DNS server is point to 10.1.41.100
 
Thank you so much for the help!
 
Jingyi Hu
 
 
 
 
&gt;<i> Date: Sun, 11 Nov 2007 22:37:09 +0100&gt; From: <A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">Dragos.Vingarzan at fokus.fraunhofer.de</A>&gt; To: <A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">jhu2000 at hotmail.com</A>&gt; CC: <A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">openimscore-users at lists.berlios.de</A>&gt; Subject: Re: [OpenIMSCore-Users] Need help on DNS Zone file changes&gt; &gt; Wow man, so many question mark ?...?? :-D&gt; &gt; the configurator just makes a regexp replace in the cfgs, nothing that&gt; you can't do &quot;by hand&quot;.&gt; &gt; Anyway, the normal procedure flow would be to do:&gt; cp /opt/OpenIMSCore/ser_ims/cfg/*.cfg /opt/OpenIMSCore/&gt; cp /opt/OpenIMSCore/ser_ims/cfg/*.xml /opt/OpenIMSCore/&gt; cp /opt/OpenIMSCore/ser_ims/cfg/*.sh /opt/OpenIMSCore/&gt; &gt; ./opt/OpenIMSCore/ser_ims/cfg/configurator.sh /opt/OpenIMSCore/*.cfg&gt; /opt/OpenIMSCore/*.sh&gt; &gt; The configurator looks for the default tokens, so it won't work the 2nd&gt; time - you'll need to overwrite the files with the default ones or look&gt; inside configurator.sh and change it.&gt; &gt; HSS DB - either change the hss_db.sql then re-create the whole database&gt; - no need to restart MySQL...&gt; - or change the users from the HSS WebUI.&gt; &gt; Yes, you also need to change the DNS files and update your DNS server&gt; accordingly&gt; &gt; yes, you could just change the files in the DNS server - don't forget to&gt; restart this one or at least to make it reload the configuration.&gt; &gt; The Installation Guide has been tried by many people and it usually&gt; takes about 1/2 hour to do it, without previous experience.&gt; &gt; If you want more than the standard setup, you need to look in the&gt; configuration files and understand them. Really now, I think they are&gt; very very ease to understand... I mean, should we make a manual like &quot;if&gt; you want to change the listening point, change the &quot;listen&quot; line in the&gt; xcscf.cfg&quot;?&gt; &gt; If you need more, like function reference, there is also a manual&gt; available on the website and don't forget the SER manuals from iptel.org.&gt; &gt; -Dragos&gt; &gt; Jingyi Hu wrote:&gt; &gt; &gt; &gt; Hi All,&gt; &gt; &gt; &gt; I need change the local address in original IMS configurations&gt; &gt; 127.0.0.1 to 10.1.41.100. Should I ser_ims/cfg/configurator.sh?&gt; &gt; or run ser_ims/cfg/configurator.sh ser_ims/cfg/scscf.cfg&gt; &gt; ser_ims/cfg/icscf.xml \ FHoSS/deploy/hss_db.sql&gt; &gt; FHoSS/deploy/hss.properties?&gt; &gt; &gt; &gt; After that do I need copy all configuration files into&gt; &gt; /opt/OpenIMSCore directory How about hss_db.sql? Do I need restart&gt; &gt; SQL server?&gt; &gt; &gt; &gt; Also do the DNS Zone file changed after the reconfigurated? So I need&gt; &gt; copy it into /var/bind/pri/open-ims.dnszone?&gt; &gt; &gt; &gt; If the zone file has not be changed, could I just modify all 127.0.0.1&gt; &gt; to 10.1.41.100 and change localhost and root.localhost to 10.1.41.100&gt; &gt; as well as?&gt; &gt; &gt; &gt; The installation manual seem not very clear? Do you have more detail&gt; &gt; documents and technical API functional documents as well as?&gt; &gt; &gt; &gt; Thanks.&gt; &gt; &gt; &gt; Best regards,&gt; &gt; &gt; &gt; Jingyi Hu&gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt;&gt; &gt; ------------------------------------------------------------------------&gt; &gt; Climb to the top of the charts! Play Star Shuffle: the word scramble&gt; &gt; challenge with star power. Play Now!&gt; &gt; &lt;<A HREF="http://club.live.com/star_shuffle.aspx?icid=starshuffle_wlmailtextlink_oct">http://club.live.com/star_shuffle.aspx?icid=starshuffle_wlmailtextlink_oct</A>&gt;&gt; &gt;&gt; &gt; ------------------------------------------------------------------------&gt; &gt;&gt; &gt; _______________________________________________&gt; &gt; OpenIMSCore-Users mailing list&gt; &gt; <A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">OpenIMSCore-Users at lists.berlios.de</A>&gt; &gt; <A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">https://lists.berlios.de/mailman/listinfo/openimscore-users</A>&gt; &gt; &gt; &gt; &gt; -- &gt; -----------------------------------------&gt; Dipl. Eng. Dragos Vingarzan&gt; Fraunhofer FOKUS/NGNI&gt; Kaiserin-Augusta-Allee 31&gt; 10589 Berlin,Germany&gt; Phone +49 (0)30 - 3463 - 7385&gt; Mobile +49 (0)163 - 159 - 5221&gt; Web www.fokus.fraunhofer.de www.openimscore.org&gt; We could change the world if God would give us the source code...&gt; -----------------------------------------------------------------&gt; 
</I>_________________________________________________________________
Climb to the top of the charts!&#160; Play Star Shuffle:&#160; the word scramble challenge with star power.
<A HREF="http://club.live.com/star_shuffle.aspx?icid=starshuffle_wlmailtextlink_oct">http://club.live.com/star_shuffle.aspx?icid=starshuffle_wlmailtextlink_oct</A>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="https://lists.berlios.de/pipermail/openimscore-users/attachments/20071114/1433d4c4/attachment.html">https://lists.berlios.de/pipermail/openimscore-users/attachments/20071114/1433d4c4/attachment.html</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002921.html">[OpenIMSCore-Users] Need help on DNS Zone file changes
</A></li>
	<LI>Next message: <A HREF="002955.html">[OpenIMSCore-Users] Need help on DNS Zone file changes
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2942">[ date ]</a>
              <a href="thread.html#2942">[ thread ]</a>
              <a href="subject.html#2942">[ subject ]</a>
              <a href="author.html#2942">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/openimscore-users">More information about the OpenIMSCore-Users
mailing list</a><br>
</body></html>
