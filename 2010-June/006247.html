<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [OpenIMSCore-Users] &quot;403 Forbidden! Not Registered - You	mustregister first with a S_CSCF&quot; when sending NOTIFY	fromPresence Server
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/openimscore-users/2010-June/index.html" >
   <LINK REL="made" HREF="mailto:openimscore-users%40lists.berlios.de?Subject=Re%3A%20%5BOpenIMSCore-Users%5D%20%22403%20Forbidden%21%20Not%20Registered%20-%20You%0A%09mustregister%20first%20with%20a%20S_CSCF%22%20when%20sending%20NOTIFY%0A%09fromPresence%20Server&In-Reply-To=%3CAANLkTik4RCsMnUn1bRT_Ca832W7lff1yQtdWLtshIMba%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="006246.html">
   <LINK REL="Next"  HREF="006248.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[OpenIMSCore-Users] &quot;403 Forbidden! Not Registered - You	mustregister first with a S_CSCF&quot; when sending NOTIFY	fromPresence Server</H1>
    <B>Ngoc Son</B> 
    <A HREF="mailto:openimscore-users%40lists.berlios.de?Subject=Re%3A%20%5BOpenIMSCore-Users%5D%20%22403%20Forbidden%21%20Not%20Registered%20-%20You%0A%09mustregister%20first%20with%20a%20S_CSCF%22%20when%20sending%20NOTIFY%0A%09fromPresence%20Server&In-Reply-To=%3CAANLkTik4RCsMnUn1bRT_Ca832W7lff1yQtdWLtshIMba%40mail.gmail.com%3E"
       TITLE="[OpenIMSCore-Users] &quot;403 Forbidden! Not Registered - You	mustregister first with a S_CSCF&quot; when sending NOTIFY	fromPresence Server">technology789 at gmail.com
       </A><BR>
    <I>Mon Jun  7 13:50:15 CEST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="006246.html">[OpenIMSCore-Users] Problems after &quot;go back&quot; to 127.0.0.1
</A></li>
        <LI>Next message: <A HREF="006248.html">[OpenIMSCore-Users] &quot;403 Forbidden! Not Registered - You	mustregister first with a S_CSCF&quot; when sending NOTIFY	fromPresence Server
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6247">[ date ]</a>
              <a href="thread.html#6247">[ thread ]</a>
              <a href="subject.html#6247">[ subject ]</a>
              <a href="author.html#6247">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Franz,

I'm sorry for tardy response. I tried to log output of P-CSCF to log file
but i cannot see anything unusual in that log. And a weird thing is if i use
Monster as IMS client, NOTIFY will be sent successful from my Presence
Server and Monster also responses with 200 OK but with Mercuro, it's not.
Can you skim log file of P-CSCF i attached and give me some advise? This is
log file when i use Mecuro to SUBSCRIBE to my Presence Server. Thank you.

2010/6/4 Franz Edler &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">franz.edler at technikum-wien.at</A>&gt;

&gt;<i>  Hi Ngoc,
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> the best way to capture all messages also the internal is to use tcpdump on
</I>&gt;<i> Linux.
</I>&gt;<i>
</I>&gt;<i> Try the command &#8220;tcpdump -i any -s 3000 -w /var/tmp/tracefile.pcap&#8221; and you
</I>&gt;<i> will get all messages in pcap-format (readable with Wireshark).
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> With logfile I meant the console-log. You should try to log all output of
</I>&gt;<i> the P-CSCF console (e.g. by setting &#8220;log_stderror=no&#8221; to direct the log to
</I>&gt;<i> syslog).
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> BR
</I>&gt;<i>
</I>&gt;<i> Franz
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>   ------------------------------
</I>&gt;<i>
</I>&gt;<i> *Von:* Ngoc Son [mailto:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">technology789 at gmail.com</A>]
</I>&gt;<i> *Gesendet:* Freitag, 04. Juni 2010 07:48
</I>&gt;<i> *An**:* <A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">franz.edler at technikum-wien.at</A>
</I>&gt;<i> *Betreff:* Re: [OpenIMSCore-Users] &quot;403 Forbidden! Not Registered - You
</I>&gt;<i> mustregister first with a S_CSCF&quot; when sending NOTIFY fromPresence Server
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Hi Franz,
</I>&gt;<i>
</I>&gt;<i>    You're right. This 403 message come from P-CSCF. The last trace file I
</I>&gt;<i> captured in Ethernet interface, not loopback interface, and all components
</I>&gt;<i> of Open IMS reside in 1 host, so messages between P-CSCF and S-CSCF are not
</I>&gt;<i> showed. But now i see that P-CSCF reply this &quot;403 Forbidden&quot; message after
</I>&gt;<i> capturing in loopback interface. I've tried to find log file of  P-CSCF in
</I>&gt;<i> /var/log and /opt/OpenIMSCore folder but it 's not there.
</I>&gt;<i>    Can you tell me where is this log file?
</I>&gt;<i>
</I>&gt;<i> 2010/6/3 Franz Edler &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">franz.edler at technikum-wien.at</A>&gt;
</I>&gt;<i>
</I>&gt;<i> The failure response &#8222; 403 Forbidden - Not Registered! You must register
</I>&gt;<i> first with a S-CSCF&#8221; comes from P-CSCF.
</I>&gt;<i>
</I>&gt;<i> A P-CSCF-log would help to see what P-CSCF expects.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> BTW: Why are messages between P-CSCF and S-CSCF missing in your tracefile?
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> BR
</I>&gt;<i>
</I>&gt;<i> Franz
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>   ------------------------------
</I>&gt;<i>
</I>&gt;<i> *Von:* <A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">openimscore-users-bounces at lists.berlios.de</A> [mailto:
</I>&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">openimscore-users-bounces at lists.berlios.de</A>] *Im Auftrag von *Ngoc Son
</I>&gt;<i> *Gesendet:* Donnerstag, 03. Juni 2010 07:03
</I>&gt;<i> *An:* <A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">openimscore-users at lists.berlios.de</A>
</I>&gt;<i> *Betreff:* [OpenIMSCore-Users] &quot;403 Forbidden! Not Registered - You
</I>&gt;<i> mustregister first with a S_CSCF&quot; when sending NOTIFY fromPresence Server
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Hi everybody,
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>      I'm developing Presence Server for IMS and using Open IMS Core as my
</I>&gt;<i> testbed. But, i encountered with &quot;403 Fobidden&quot; when NOTIFY is sent to
</I>&gt;<i> S-CSCF from Presence Server. Dialog states which is created for SUBSCRIBE
</I>&gt;<i> are handled as specified in RFC 3261. It means that remote target, route
</I>&gt;<i> set, local URI, remote URI, local tag, remote tag, call ID, local and remote
</I>&gt;<i> CSeq are all managed and NOTIFY request is created rely on that dialog
</I>&gt;<i> state. I saw in Wireshark capture file that 200 OK for SUBSCRIBE is routed
</I>&gt;<i> to IMS client through IMS core but it's not with NOTIFY.
</I>&gt;<i>
</I>&gt;<i>      I also attach Wireshark capture file below. And I'm using Mercuro as
</I>&gt;<i> IMS client.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>     Can you explain me why it doesn't work with NOTIFY? And how can i
</I>&gt;<i> resolve this problem?
</I>&gt;<i>
</I>&gt;<i>     Thanks in advance.
</I>&gt;<i>
</I>&gt;<i> --
</I>&gt;<i> Regards!
</I>&gt;<i> DinhNgocSon
</I>&gt;<i> Email: <A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">technology789 at gmail.com</A>
</I>&gt;<i> Developer at Xener Systems
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> --
</I>&gt;<i> Regards!
</I>&gt;<i> DinhNgocSon
</I>&gt;<i> Email: <A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">technology789 at gmail.com</A>
</I>&gt;<i> Developer at Xener Systems
</I>&gt;<i>
</I>


-- 
Regards!
DinhNgocSon
Email: <A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">technology789 at gmail.com</A>
Developer at Xener Systems
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="https://lists.berlios.de/pipermail/openimscore-users/attachments/20100607/48cf6724/attachment.html">https://lists.berlios.de/pipermail/openimscore-users/attachments/20100607/48cf6724/attachment.html</A>&gt;
-------------- next part --------------
A non-text attachment was scrubbed...
Name: messages
Type: application/octet-stream
Size: 84480 bytes
Desc: not available
URL: &lt;<A HREF="https://lists.berlios.de/pipermail/openimscore-users/attachments/20100607/48cf6724/attachment.obj">https://lists.berlios.de/pipermail/openimscore-users/attachments/20100607/48cf6724/attachment.obj</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="006246.html">[OpenIMSCore-Users] Problems after &quot;go back&quot; to 127.0.0.1
</A></li>
	<LI>Next message: <A HREF="006248.html">[OpenIMSCore-Users] &quot;403 Forbidden! Not Registered - You	mustregister first with a S_CSCF&quot; when sending NOTIFY	fromPresence Server
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6247">[ date ]</a>
              <a href="thread.html#6247">[ thread ]</a>
              <a href="subject.html#6247">[ subject ]</a>
              <a href="author.html#6247">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/openimscore-users">More information about the OpenIMSCore-Users
mailing list</a><br>
</body></html>
