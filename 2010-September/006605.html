<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [OpenIMSCore-Users] Registration from AS
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/openimscore-users/2010-September/index.html" >
   <LINK REL="made" HREF="mailto:openimscore-users%40lists.berlios.de?Subject=Re%3A%20%5BOpenIMSCore-Users%5D%20Registration%20from%20AS&In-Reply-To=%3CAANLkTik4aEkZxYWuxd%3D-yxKxmDW0Ek12d1%2Bd4tV_%3DbQn%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="006604.html">
   <LINK REL="Next"  HREF="006606.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[OpenIMSCore-Users] Registration from AS</H1>
    <B>Amanda Mattiuz</B> 
    <A HREF="mailto:openimscore-users%40lists.berlios.de?Subject=Re%3A%20%5BOpenIMSCore-Users%5D%20Registration%20from%20AS&In-Reply-To=%3CAANLkTik4aEkZxYWuxd%3D-yxKxmDW0Ek12d1%2Bd4tV_%3DbQn%40mail.gmail.com%3E"
       TITLE="[OpenIMSCore-Users] Registration from AS">amattiuz at gmail.com
       </A><BR>
    <I>Mon Sep 27 15:37:59 CEST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="006604.html">[OpenIMSCore-Users] Problem with integrating OpenIMSCore	with	Mobicents sip presence server
</A></li>
        <LI>Next message: <A HREF="006606.html">[OpenIMSCore-Users] How to integrate IMS Bench SIPp in OpenIMSCore??
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6605">[ date ]</a>
              <a href="thread.html#6605">[ thread ]</a>
              <a href="subject.html#6605">[ subject ]</a>
              <a href="author.html#6605">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello all,

I&#180;m making a little experiment: i&#180;m trying to send a REGISTER request from
the Application Server (mobicents) on behalf of an user. I&#180;m using SIP
servlets API for that.

My REGISTER request goes to the port 5060 (I-CSCF) and the response I get
is: &quot;Server error on UAR&quot;.

Anybody has any idea of what I may doing wrong???


Here are the messages exchanged between AS and IMS Core:


REGISTER sip:my.domain.com SIP/2.0
Call-ID: <A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">68facbd6d2b0b4f6c0b73dec207e3524 at 200.133.201.53</A>
CSeq: 1 REGISTER
From: &lt;sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">user at my.domain.com</A> &lt;sip%<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">3Auser at my.domain.com</A>&gt;
&gt;<i>;tag=40511676_6633f461_ce88b508-11a6-4f54-bdc2-052ac37af234^M
</I>To: &lt;sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">user at my.domain.com</A> &lt;sip%<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">3Auser at my.domain.com</A>&gt;&gt;
Max-Forwards: 70
P-Visited-Network-ID: my.domain.com
Via: SIP/2.0/UDP
20.13.21.53:5080;branch=z9hG4bKce88b508-11a6-4f54-bdc2-052ac37af234_6633f461_2396634640979519
  ====&gt;&gt;&gt; this is mobicents AS info
Content-Length: 0

SIP/2.0 500 Server error on UAR
Call-ID: <A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">68facbd6d2b0b4f6c0b73dec207e3524 at 200.133.201.53</A>
CSeq: 1 REGISTER
From: &lt;sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">user at my.domain.com</A> &lt;sip%<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">3Auser at my.domain.com</A>&gt;
&gt;<i>;tag=40511676_6633f461_ce88b508-11a6-4f54-bdc2-052ac37af234^M
</I>To: &lt;sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">user at my.domain.com</A> &lt;sip%<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">3Auser at my.domain.com</A>&gt;
&gt;<i>;tag=d30e7461f030d4497a22e9204a9d3a76-9ff5^M
</I>Via: SIP/2.0/UDP 20.13.21.53:5080
;branch=z9hG4bKce88b508-11a6-4f54-bdc2-052ac37af234_6633f461_2396634640979519^M
Server: Sip EXpress router (2.1.0-dev1 OpenIMSCore (x86_64/linux))
Warning: 392 200.133.201.53:5060 &quot;Noisy feedback tells:  pid=14599
req_src_ip=20.13.21.53 req_src_port=5080
in_uri=sip:ims.giga.cpqd.com.brout_uri=sip:
ims.giga.cpqd.com.br via_cnt==1&quot;
Content-Length: 0


And this is the output from ICSCF:


^[[00m 1(14472) ^[[01;30mDEBUG: t_lookup_request: no transaction found
^[[00m 1(14472) ^[[01;30mDEBUG: t_check: msg id=1 global id=1 T end=(nil)
^[[00m 1(14472) ^[[01;30mERROR: t_get_trans_ident: no transaction found
^[[00m 1(14472) ^[[01;30mDBG:I-CSCF:I_UAR: Starting ... &lt;my.domain.com&gt;
^[[00m 1(14472) ^[[01;30mparse_headers: flags=2000
^[[00m 1(14472) ^[[01;33mERR:I-CSCF:cscf_get_private_identity: Message does
not contain Authorization header.
^[[00m 1(14472) ^[[01;32mINF:I-CSCF:cscf_get_private_identity: Falling back
to private_id=stripped(public_id)
-&gt; Message did not contain a valid Authorization Header!!! This fallback is
deprecated outside Early-IMS or NASS-Bundled!
^[[00m 1(14472) ^[[01;30mparse_headers: flags=8
^[[00m 1(14472) ^[[01;30mDBG:I-CSCF:cscf_get_public_identity: &lt;
sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">user at my.domain.com</A> &lt;sip%<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">3Auser at my.domain.com</A>&gt;&gt;
^[[00m 1(14472) ^[[01;30mDBG:I-CSCF:cscf_get_private_identity: &lt;
sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">user at my.domain.com</A> &lt;sip%<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">3Auser at my.domain.com</A>&gt;&gt;
^[[00m 1(14472) ^[[01;30mparse_headers: flags=8
^[[00m 1(14472) ^[[01;30mDBG:I-CSCF:cscf_get_public_identity: &lt;
sip:sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">user at my.domain.com</A> &lt;sip%3Asip%<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">3Auser at my.domain.com</A>&gt;&gt;
^[[00m 1(14472) ^[[01;30mparse_headers: flags=ffffffffffffffff
^[[00m 1(14472) ^[[01;30mDBG:I-CSCF:I_UAR: No contacts found
^[[00m 1(14472) ^[[01;30mDBG:I-CSCF:I_UAR: ... Done
^[[00m 1(14472) ^[[01;30mDEBUG: t_newtran: msg id=1 , global msg id=1 , T on
entrance=(nil)
^[[00m 1(14472) ^[[01;30mparse_headers: flags=ffffffffffffffff
^[[00m 1(14472) ^[[01;30mparse_headers: flags=78
^[[00m 1(14472) ^[[01;30mt_lookup_request: start searching: hash=12547,
isACK=0
^[[00m 1(14472) ^[[01;30mDEBUG: RFC3261 transaction matching failed
^[[00m 1(14472) ^[[01;30mDEBUG: t_lookup_request: no transaction found
^[[00m 1(14472) ^[[01;30mDEBUG: t_check: msg id=1 global id=1 T
start=0x2b866f4bf960
^[[00m 1(14472) ^[[01;30mDEBUG: t_check: T already found!
^[[00m 1(14472) ^[[01;30mparse_headers: flags=ffffffffffffffff
^[[00m 1(14472) ^[[01;30mcheck_via_address(200.133.201.53, 200.133.201.53,
0)
^[[00m 1(14472) ^[[01;30mWARNING:vqm_resize: resize(0) called
^[[00m 1(14472) ^[[01;30mDEBUG: cleanup_uac_timers: RETR/FR timers reset
^[[00m 1(14472) ^[[01;30mDEBUG: reply sent out. buf=0x774e90: SIP/2.0 5...,
shmem=0x2b866f4c1590: SIP/2.0 5
^[[00m 1(14472) ^[[01;30mDEBUG: _reply_light: finished
^[[00m 1(14472) ^[[01;30mDEBUG:destroy_avp_list: destroying list (nil)
^[[00m 1(14472) ^[[01;30mDEBUG:destroy_avp_list: destroying list (nil)
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="https://lists.berlios.de/pipermail/openimscore-users/attachments/20100927/946fb3b5/attachment.html">https://lists.berlios.de/pipermail/openimscore-users/attachments/20100927/946fb3b5/attachment.html</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="006604.html">[OpenIMSCore-Users] Problem with integrating OpenIMSCore	with	Mobicents sip presence server
</A></li>
	<LI>Next message: <A HREF="006606.html">[OpenIMSCore-Users] How to integrate IMS Bench SIPp in OpenIMSCore??
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6605">[ date ]</a>
              <a href="thread.html#6605">[ thread ]</a>
              <a href="subject.html#6605">[ subject ]</a>
              <a href="author.html#6605">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/openimscore-users">More information about the OpenIMSCore-Users
mailing list</a><br>
</body></html>
