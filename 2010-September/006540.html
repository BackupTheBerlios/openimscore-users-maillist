<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [OpenIMSCore-Users] 424 Bad Location For emergency call (zabi)
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/openimscore-users/2010-September/index.html" >
   <LINK REL="made" HREF="mailto:openimscore-users%40lists.berlios.de?Subject=Re%3A%20%5BOpenIMSCore-Users%5D%20424%20Bad%20Location%20For%20emergency%20call%20%28zabi%29&In-Reply-To=%3C4C80886D.9050004%40globaledgesoft.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="006539.html">
   <LINK REL="Next"  HREF="006541.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[OpenIMSCore-Users] 424 Bad Location For emergency call (zabi)</H1>
    <B>zabi</B> 
    <A HREF="mailto:openimscore-users%40lists.berlios.de?Subject=Re%3A%20%5BOpenIMSCore-Users%5D%20424%20Bad%20Location%20For%20emergency%20call%20%28zabi%29&In-Reply-To=%3C4C80886D.9050004%40globaledgesoft.com%3E"
       TITLE="[OpenIMSCore-Users] 424 Bad Location For emergency call (zabi)">mohamed.zabiulla at globaledgesoft.com
       </A><BR>
    <I>Fri Sep  3 07:32:29 CEST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="006539.html">[OpenIMSCore-Users] IMS- communicator
</A></li>
        <LI>Next message: <A HREF="006541.html">[OpenIMSCore-Users] 424 Bad Location For emergency call (zabi)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6540">[ date ]</a>
              <a href="thread.html#6540">[ thread ]</a>
              <a href="subject.html#6540">[ subject ]</a>
              <a href="author.html#6540">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Ancuta,

As suggested I replaced the
xmlns:gml=&quot;<A HREF="http://www.opengis.net/gml">http://www.opengis.net/gml</A>&quot; instead of 
xmlns:gml=&quot;urn:opengis:specification:gml:schema-xsd:feature:v3.0&quot;

But the open-ims server still responds with 424 Bad Location.

Regards,
Zabi



Onofrei, Andreea Ancuta wrote:
&gt;<i>
</I>&gt;<i> Hello Zabi,
</I>&gt;<i>
</I>&gt;<i> Please try also with:
</I>&gt;<i> xmlns:gml=&quot;<A HREF="http://www.opengis.net/gml">http://www.opengis.net/gml</A>&quot;
</I>&gt;<i> instead of
</I>&gt;<i> xmlns:gml=&quot;urn:opengis:specification:gml:schema-xsd:feature:v3.0&quot;
</I>&gt;<i> int the geodetic location, like in 
</I>&gt;<i> <A HREF="http://svn.berlios.de/viewvc/openimscore/ser_ims/branches/12_em_services/test/emerg_serv/em_uac_anonym_geodetic.xml?revision=963&amp;view=markup">http://svn.berlios.de/viewvc/openimscore/ser_ims/branches/12_em_services/test/emerg_serv/em_uac_anonym_geodetic.xml?revision=963&amp;view=markup</A> 
</I>&gt;<i> &lt;<A HREF="http://svn.berlios.de/viewvc/openimscore/ser_ims/branches/12_em_services/test/emerg_serv/em_uac_anonym_geodetic.xml?revision=963&amp;view=markup">http://svn.berlios.de/viewvc/openimscore/ser_ims/branches/12_em_services/test/emerg_serv/em_uac_anonym_geodetic.xml?revision=963&amp;view=markup</A>&gt;
</I>&gt;<i>
</I>&gt;<i> I will have a look and et you know when this is fixed.
</I>&gt;<i>
</I>&gt;<i> Best regards,
</I>&gt;<i> Ancuta
</I>&gt;<i>
</I>&gt;<i> -----Original Message-----
</I>&gt;<i> From: <A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">openimscore-users-bounces at lists.berlios.de</A> on behalf of 
</I>&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">openimscore-users-request at lists.berlios.de</A>
</I>&gt;<i> Sent: Tue 8/31/2010 1:02 PM
</I>&gt;<i> To: <A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">openimscore-users at lists.berlios.de</A>
</I>&gt;<i> Subject: OpenIMSCore-Users Digest, Vol 46, Issue 45
</I>&gt;<i>
</I>&gt;<i> Send OpenIMSCore-Users mailing list submissions to
</I>&gt;<i>         <A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">openimscore-users at lists.berlios.de</A>
</I>&gt;<i>
</I>&gt;<i> To subscribe or unsubscribe via the World Wide Web, visit
</I>&gt;<i>         <A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">https://lists.berlios.de/mailman/listinfo/openimscore-users</A>
</I>&gt;<i> or, via email, send a message with subject or body 'help' to
</I>&gt;<i>         <A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">openimscore-users-request at lists.berlios.de</A>
</I>&gt;<i>
</I>&gt;<i> You can reach the person managing the list at
</I>&gt;<i>         <A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">openimscore-users-owner at lists.berlios.de</A>
</I>&gt;<i>
</I>&gt;<i> When replying, please edit your Subject line so it is more specific
</I>&gt;<i> than &quot;Re: Contents of OpenIMSCore-Users digest...&quot;
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Today's Topics:
</I>&gt;<i>
</I>&gt;<i>    1. 424 Bad Location For emergency call (zabi)
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> ----------------------------------------------------------------------
</I>&gt;<i>
</I>&gt;<i> Message: 1
</I>&gt;<i> Date: Tue, 31 Aug 2010 16:30:51 +0530
</I>&gt;<i> From: zabi &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">mohamed.zabiulla at globaledgesoft.com</A>&gt;
</I>&gt;<i> To: <A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">openimscore-users at lists.berlios.de</A>
</I>&gt;<i> Subject: [OpenIMSCore-Users] 424 Bad Location For emergency call
</I>&gt;<i> Message-ID: &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">4C7CE0E3.1020506 at globaledgesoft.com</A>&gt;
</I>&gt;<i> Content-Type: text/plain; charset=&quot;iso-8859-1&quot;; Format=&quot;flowed&quot;
</I>&gt;<i>
</I>&gt;<i> Hi All,
</I>&gt;<i>
</I>&gt;<i> When an emergency call is made with the geolocation mentioned below, the
</I>&gt;<i> openims server [version 933] responds with 424 Bad location for INVITE
</I>&gt;<i> request. Ecscf prints following in the console.
</I>&gt;<i>
</I>&gt;<i> ==============================================================================
</I>&gt;<i>  4(6281) INFO:udp_rcv_loop udp read bytes[2651]
</I>&gt;<i>  4(6281) ERR:E-CSCF:E_is_in_dialog: could not find the dialog with the
</I>&gt;<i> callid 1321822442605057747 and dir orig
</I>&gt;<i>  4(6281) ERR:E-CSCF:E_is_in_dialog: could not find the dialog with the
</I>&gt;<i> callid 1321822442605057747 and dir term
</I>&gt;<i>  4(6281) &gt;&gt;       Orig_Initial
</I>&gt;<i>  4(6281) DBG:E-CSCF:E_is_anonymous_user: Check if anonymous identity used
</I>&gt;<i>  4(6281) DBG:E-CSCF:E_save_dialog(orig): Call-ID &lt;1321822442605057747&gt;
</I>&gt;<i>  4(6281) INF:E-CSCF:----------  E-CSCF Dialog List begin --------------
</I>&gt;<i>  4(6281) INF:E-CSCF:[ 212] Dir[0] Call-ID:&lt;1321822442605057747&gt;
</I>&gt;<i> AOR:&lt;sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">07111 at open-ims.test</A>&gt;
</I>&gt;<i>  4(6281) INF:E-CSCF:            Method:[1] State:[1] Exp:[1800] Ref:[]
</I>&gt;<i> Anonym:[ ]
</I>&gt;<i> ] Event:[]
</I>&gt;<i>  4(6281) INF:E-CSCF:----------  E-CSCF Dialog List end   --------------
</I>&gt;<i>  4(6281) ERROR: pidf_loc.c:117: the location node is not a RFC 4119
</I>&gt;<i> geodetic location info
</I>&gt;<i>  4(6281) ERROR: pidf_loc.c:301: no valid xml namespace with the valid
</I>&gt;<i> href values  urn:ietf:params:xml:ns:pidf:geopriv10:civicAddr,
</I>&gt;<i> <A HREF="http://www.opengis.net/gml,">http://www.opengis.net/gml,</A>
</I>&gt;<i> urn:opengis:specification:gml:schema-xsd:feature:v3.0 or
</I>&gt;<i> urn:ietf:params:xml:ns:pidf:geopriv10:civicLoc, or the right format
</I>&gt;<i>  4(6281) ERR:E-CSCF:E_get_location:could not find a valid location
</I>&gt;<i> element, but with the Geolocation header set
</I>&gt;<i> =================================================================================
</I>&gt;<i>
</I>&gt;<i> Could you please help us to locate the issue?
</I>&gt;<i>
</I>&gt;<i> Please find the attached captures(caller log and server log), config
</I>&gt;<i> files(lrf and ecscf) and ecscf logs.
</I>&gt;<i>
</I>&gt;<i> FYI,
</I>&gt;<i> With only GeoLocation  in message body  of INVITE       -&gt; Fails(424)
</I>&gt;<i> With only Civic Location  in message body  of INVITE     -&gt; Works
</I>&gt;<i> WIth Geolocation + civic loc in message body of INVITE -&gt; works
</I>&gt;<i>
</I>&gt;<i> The message body sent as follows
</I>&gt;<i> ===============================================================
</I>&gt;<i> &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
</I>&gt;<i> &lt;presence xmlns=&quot;urn:ietf:params:xml:ns:pidf&quot;
</I>&gt;<i> xmlns:gp=&quot;urn:ietf:params:xml:ns:pidf:geopriv10&quot;
</I>&gt;<i> xmlns:gml=&quot;urn:opengis:specification:gml:schema-xsd:feature:v3.0&quot;
</I>&gt;<i> entity=&quot;pres:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">07111 at open-ims.test</A>&quot;&gt;
</I>&gt;<i> &lt;tuple id=&quot;sg89ae&quot;&gt;
</I>&gt;<i>   &lt;status&gt;
</I>&gt;<i>     &lt;gp:geopriv&gt;
</I>&gt;<i>       &lt;gp:location-info&gt;
</I>&gt;<i>         &lt;gml:location&gt;
</I>&gt;<i>           &lt;gml:Point&gt;
</I>&gt;<i>             &lt;gml:coordinates&gt;12:58: 0N 77:33:59E&lt;/gml:coordinates&gt;
</I>&gt;<i>           &lt;/gml:Point&gt;
</I>&gt;<i>         &lt;/gml:location&gt;
</I>&gt;<i>       &lt;/gp:location-info&gt;
</I>&gt;<i>       &lt;gp:usage-rules&gt;
</I>&gt;<i>         &lt;gp:retransmission-allowed&gt;no&lt;/gp:retransmission-allowed&gt;
</I>&gt;<i>         &lt;gp:retention-expiry&gt;2010-08-31T11:44:02Z&lt;/gp:retention-expiry&gt;
</I>&gt;<i>        
</I>&gt;<i> &lt;gp:ruleset-reference&gt;cid:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">07111 at open-ims.test</A>&lt;/gp:ruleset-reference&gt;
</I>&gt;<i>       &lt;/gp:usage-rules&gt;
</I>&gt;<i>       &lt;gp:method&gt;DHCP&lt;/gp:method&gt;
</I>&gt;<i>     &lt;/gp:geopriv&gt;
</I>&gt;<i>   &lt;/status&gt;
</I>&gt;<i>   &lt;timestamp&gt;2010-08-31T11:44:02Z&lt;/timestamp&gt;
</I>&gt;<i> &lt;/tuple&gt;
</I>&gt;<i> &lt;/presence&gt;
</I>&gt;<i> =============================================================================================================
</I>&gt;<i>
</I>&gt;<i> Regards,
</I>&gt;<i> Zabi
</I>&gt;<i>
</I>&gt;<i> -------------- next part --------------
</I>&gt;<i> An embedded and charset-unspecified text was scrubbed...
</I>&gt;<i> Name: ecscf.cfg
</I>&gt;<i> URL: 
</I>&gt;<i> &lt;<A HREF="https://lists.berlios.de/pipermail/openimscore-users/attachments/20100831/74acdf1e/attachment.ksh">https://lists.berlios.de/pipermail/openimscore-users/attachments/20100831/74acdf1e/attachment.ksh</A>&gt;
</I>&gt;<i> -------------- next part --------------
</I>&gt;<i> An embedded and charset-unspecified text was scrubbed...
</I>&gt;<i> Name: ecscf_log.txt
</I>&gt;<i> URL: 
</I>&gt;<i> &lt;<A HREF="https://lists.berlios.de/pipermail/openimscore-users/attachments/20100831/74acdf1e/attachment.txt">https://lists.berlios.de/pipermail/openimscore-users/attachments/20100831/74acdf1e/attachment.txt</A>&gt;
</I>&gt;<i> -------------- next part --------------
</I>&gt;<i> A non-text attachment was scrubbed...
</I>&gt;<i> Name: emergency_fail_caller1.pcap
</I>&gt;<i> Type: application/x-extension-pcap
</I>&gt;<i> Size: 42059 bytes
</I>&gt;<i> Desc: not available
</I>&gt;<i> URL: 
</I>&gt;<i> &lt;<A HREF="https://lists.berlios.de/pipermail/openimscore-users/attachments/20100831/74acdf1e/attachment.bin">https://lists.berlios.de/pipermail/openimscore-users/attachments/20100831/74acdf1e/attachment.bin</A>&gt;
</I>&gt;<i> -------------- next part --------------
</I>&gt;<i> A non-text attachment was scrubbed...
</I>&gt;<i> Name: emergency_fail_tcpdump1.pcap
</I>&gt;<i> Type: application/x-extension-pcap
</I>&gt;<i> Size: 150685 bytes
</I>&gt;<i> Desc: not available
</I>&gt;<i> URL: 
</I>&gt;<i> &lt;<A HREF="https://lists.berlios.de/pipermail/openimscore-users/attachments/20100831/74acdf1e/attachment-0001.bin">https://lists.berlios.de/pipermail/openimscore-users/attachments/20100831/74acdf1e/attachment-0001.bin</A>&gt;
</I>&gt;<i> -------------- next part --------------
</I>&gt;<i> An embedded and charset-unspecified text was scrubbed...
</I>&gt;<i> Name: lrf.cfg
</I>&gt;<i> URL: 
</I>&gt;<i> &lt;<A HREF="https://lists.berlios.de/pipermail/openimscore-users/attachments/20100831/74acdf1e/attachment-0001.ksh">https://lists.berlios.de/pipermail/openimscore-users/attachments/20100831/74acdf1e/attachment-0001.ksh</A>&gt;
</I>&gt;<i>
</I>&gt;<i> ------------------------------
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> OpenIMSCore-Users mailing list
</I>&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">OpenIMSCore-Users at lists.berlios.de</A>
</I>&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">https://lists.berlios.de/mailman/listinfo/openimscore-users</A>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> End of OpenIMSCore-Users Digest, Vol 46, Issue 45
</I>&gt;<i> *************************************************
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> ------------------------------------------------------------------------
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> OpenIMSCore-Users mailing list
</I>&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">OpenIMSCore-Users at lists.berlios.de</A>
</I>&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">https://lists.berlios.de/mailman/listinfo/openimscore-users</A>
</I>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="006539.html">[OpenIMSCore-Users] IMS- communicator
</A></li>
	<LI>Next message: <A HREF="006541.html">[OpenIMSCore-Users] 424 Bad Location For emergency call (zabi)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6540">[ date ]</a>
              <a href="thread.html#6540">[ thread ]</a>
              <a href="subject.html#6540">[ subject ]</a>
              <a href="author.html#6540">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/openimscore-users">More information about the OpenIMSCore-Users
mailing list</a><br>
</body></html>
