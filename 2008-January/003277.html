<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [OpenIMSCore-Users] How to test IPSec in Open IMS
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/openimscore-users/2008-January/index.html" >
   <LINK REL="made" HREF="mailto:openimscore-users%40lists.berlios.de?Subject=Re%3A%20%5BOpenIMSCore-Users%5D%20How%20to%20test%20IPSec%20in%20Open%20IMS&In-Reply-To=%3Cde593f410801310808n35420c10y633259f90f198371%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003283.html">
   <LINK REL="Next"  HREF="003284.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[OpenIMSCore-Users] How to test IPSec in Open IMS</H1>
    <B>Sabyasachi Samal</B> 
    <A HREF="mailto:openimscore-users%40lists.berlios.de?Subject=Re%3A%20%5BOpenIMSCore-Users%5D%20How%20to%20test%20IPSec%20in%20Open%20IMS&In-Reply-To=%3Cde593f410801310808n35420c10y633259f90f198371%40mail.gmail.com%3E"
       TITLE="[OpenIMSCore-Users] How to test IPSec in Open IMS">sabyasachisamal at gmail.com
       </A><BR>
    <I>Thu Jan 31 17:08:54 CET 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="003283.html">[OpenIMSCore-Users] 403 Forbiddent: HSS unable to comply error	--&gt;HSS diameter : unable to comply
</A></li>
        <LI>Next message: <A HREF="003284.html">[OpenIMSCore-Users] OpenIMSCore on the network for my degree thesis
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3277">[ date ]</a>
              <a href="thread.html#3277">[ thread ]</a>
              <a href="subject.html#3277">[ subject ]</a>
              <a href="author.html#3277">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello Dragos,

I need your help to test IPSec using Open IMS. I am simulating UE through
SIPp. The problem is that SIPp sends 2nd Register over ESP and the ethereal
at Open IMS side captures that request, but Open IMS are not able to decode
that even though the SAs are created successfully.

I am sending the ethereal trace and setkey output for both UE and Open IMS
also sending the pcscf logs. Pl have a look and let me know if there is
anything wrong.

Here is my setup:

UE(SIPp) on 10.21.21.149 (EL4 with ipsec-tools installed)
Open IMS on 10.21.21.147 (EL4 with ipsec-tools installed)

Pl help me to solve this problem so that i can test the IPSec through Open
IMS. Is it possible to give your ph no so that i can call you if required.

Thanks in advance.

Regards,
Sabyasachi


On 1/26/08, Klemens Schragel &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">klemens.schragel at gmx.at</A>&gt; wrote:
&gt;<i>
</I>&gt;<i> Hi,
</I>&gt;<i>
</I>&gt;<i> About the shell-scripts: actually I don't really know, didn't care much
</I>&gt;<i> about it..
</I>&gt;<i>
</I>&gt;<i> The SA on P-CSCF is created:
</I>&gt;<i> 3(14030) INF:P-CSCF:execute_cmd:
</I>&gt;<i> [/opt/OpenIMSCore/ser_ims/modules/pcscf/ipsec_P_Inc_Req.sh 10.21.21.1496001
</I>&gt;<i> 10.21.21.147 4064 5001 null 0x43e0597777e294752d6283443c704e40 hmac-md5
</I>&gt;<i> 0x8bc5d0f2366cf8625a1a7dd67acdeb74]
</I>&gt;<i>
</I>&gt;<i> This is required to be able to decode the encrypted (2nd) REGISTER... I
</I>&gt;<i> think PCSCF generates the other SAs when the 2nd REGISTER is received and
</I>&gt;<i> correct (security-verify)...
</I>&gt;<i>
</I>&gt;<i> But I think I understand now the error message...
</I>&gt;<i> 3(14030) ERR:P-CSCF:P_security_relay: we cannot find the contact or its
</I>&gt;<i> IPSec/TLS SAs for &lt;1://10.21.21.149:6070&gt;.
</I>&gt;<i>
</I>&gt;<i> It looks like the 2nd REGISTER uses port 6070 (same as the first REGISTER)
</I>&gt;<i> but in your security-client header you announce that it will be sent from
</I>&gt;<i> 6001! Have once more a look at the p-cscf execute_cmd, the IP of your
</I>&gt;<i> client
</I>&gt;<i> is stored with the src-port 6001 =&gt; your client misses to change the port!
</I>&gt;<i>
</I>&gt;<i> Br, Klemens
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> ________________________________________
</I>&gt;<i> From: Sabyasachi Samal [mailto:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">sabyasachisamal at gmail.com</A>]
</I>&gt;<i> Sent: Freitag, 25. J&#228;nner 2008 12:34
</I>&gt;<i> To: Klemens Schragel; Dragos Vingarzan
</I>&gt;<i> Cc: <A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">openimscore-users at lists.berlios.de</A>
</I>&gt;<i> Subject: Re: How to test IPSec in Open IMS
</I>&gt;<i>
</I>&gt;<i> Hello,
</I>&gt;<i>
</I>&gt;<i> I am confused about the sh files meant for IPSec. There are 10 sh files in
</I>&gt;<i> the /modules/pcscf folder. 5 for E and 5 for P. But in pcscf.cfg only 5
</I>&gt;<i> for
</I>&gt;<i> P is used. When the sh files for E are used?
</I>&gt;<i>
</I>&gt;<i> From the pcscf logs it seems every thing is okay but why SA is not
</I>&gt;<i> created?
</I>&gt;<i> any idea? pl have a look to the log.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> 3(14030) DBG:P-CSCF:P_security_401: Security-Client header found :
</I>&gt;<i>
</I>&gt;<i> &lt;ipsec-3gpp;alg=hmac-md5-96;prot=esp;mod=trans;spi-c=2345;spi-s=9870;port-c=
</I>&gt;<i> 6001;port-s=6000&gt;.
</I>&gt;<i> 3(14030) parse_headers: flags=ffffffffffffffff
</I>&gt;<i> 3(14030) DBG:P-CSCF:save_contact_security:
</I>&gt;<i> &lt;sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">bob at 10.21.21.149</A>:6070;transport=udp&gt;
</I>&gt;<i> 3(14030) DBG:P-CSCF:save_contact_security: 1 10.21.21.149 : 6070
</I>&gt;<i> 3(14030) DBG:P-CSCF:save_contact_security: CK:
</I>&gt;<i> &lt;43e0597777e294752d6283443c704e40&gt;
</I>&gt;<i> 3(14030) DBG:P-CSCF:save_contact_security: IK:
</I>&gt;<i> &lt;8bc5d0f2366cf8625a1a7dd67acdeb74&gt;
</I>&gt;<i> 3(14030) DBG:P-CSCF:save_contact_security: Enc Algorithm: &lt;&gt;
</I>&gt;<i> 3(14030) DBG:P-CSCF:save_contact_security: Int Algorithm: &lt;hmac-md5-96&gt;
</I>&gt;<i> 3(14030) DBG:P-CSCF:save_contact_security: SPI-C: 2345
</I>&gt;<i> 3(14030) DBG:P-CSCF:save_contact_security: SPI-S: 9870
</I>&gt;<i> 3(14030) DBG:P-CSCF:save_contact_security: Port-C: 6001
</I>&gt;<i> 3(14030) DBG:P-CSCF:save_contact_security: Port-S: 6000
</I>&gt;<i> 3(14030) INF:P-CSCF:execute_cmd:
</I>&gt;<i> [/opt/OpenIMSCore/ser_ims/modules/pcscf/ipsec_P_Inc_Req.sh 10.21.21.1496001
</I>&gt;<i> 10.21.21.147 4064 5001 null 0x43e0597777e294752d6283443c704e40 hmac-md5
</I>&gt;<i> 0x8bc5d0f2366cf8625a1a7dd67acdeb74]
</I>&gt;<i> 3(14030) DEBUG: t_check: msg id=1 global id=1 T start=0xb61999a8
</I>&gt;<i> 3(14030) DEBUG: t_check: T already found!
</I>&gt;<i> 3(14030) DEBUG:t_check_status: checked status is &lt;401&gt;
</I>&gt;<i> 3(14030) ERR:P-CSCF:P_security_relay: we cannot find the contact or its
</I>&gt;<i> IPSec/TLS SAs for &lt;1://10.21.21.149:6070&gt;.
</I>&gt;<i> 3(14030) -&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; T_code=0, new_code=401
</I>&gt;<i> 3(14030) DEBUG: t_check: msg id=0 global id=0 T start=0xb61999a8
</I>&gt;<i> 3(14030) DEBUG: t_check: T already found!
</I>&gt;<i> 3(14030) DEBUG:t_check_status: checked status is &lt;401&gt;
</I>&gt;<i> 3(14030) DBG:free_faked_req: removing hdr-&gt;parsed 7
</I>&gt;<i> 3(14030) DEBUG: relay_reply: branch=0, save=0, relay=0
</I>&gt;<i> 3(14030)  old size: 1043, new size: 1013
</I>&gt;<i> 3(14030) build_res_from_sip_res: copied size: orig:1041, new: 1011, rest:
</I>&gt;<i> 2
</I>&gt;<i> msg=
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> BR,
</I>&gt;<i> Sabyasachi
</I>&gt;<i>
</I>&gt;<i> On 1/25/08, Klemens Schragel &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">klemens.schragel at gmx.at</A>&gt; wrote:
</I>&gt;<i> &gt; &gt; Hello,
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Hi,
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; &gt; I want to do a Register over IPSec but pcscf gives one error like
</I>&gt;<i> below.
</I>&gt;<i> &gt; &gt; ERR:P-CSCF:P_security_relay: we cannot find the contact or its
</I>&gt;<i> &gt; &gt; IPSec/TLS SAs for &lt;1://10.21.21.149:6070&gt;.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; I'm not sure if the ERROR message is really a problem.. I think it's
</I>&gt;<i> more
</I>&gt;<i> an information from P-CSCF that there hasn't been yet a SA established for
</I>&gt;<i> this connection..
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; more interesting is this, here handles the response...
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;  1(8012) build_res_from_sip_res: copied size: orig:1040, new: 1010,
</I>&gt;<i> rest:
</I>&gt;<i> 2 msg=
</I>&gt;<i> &gt;  SIP/2.0 401 Unauthorized - Challenging the UE
</I>&gt;<i> &gt;  Via: SIP/2.0/UDP 10.21.21.149:6070
</I>&gt;<i> ;rport=6070;branch=z9hG4bK1201096438817
</I>&gt;<i> &gt;  From: &quot;bob&quot; &lt;sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">bob at open-ims2.test</A>&gt;;tag=1201096438817
</I>&gt;<i> &gt;  To: &quot;bob&quot;
</I>&gt;<i> &lt;sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">bob at open-ims2.test</A>&gt;;tag=ba3c9c9c2e1d2842aad0ac49411acef0-c046
</I>&gt;<i> &gt;  Call-ID: <A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">1201096438511 at 10.21.21.149</A>
</I>&gt;<i> &gt;  CSeq: 1 REGISTER
</I>&gt;<i> &gt;  Path: &lt;sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">term at pcscf.open-ims2.test</A>:4060;lr&gt;
</I>&gt;<i> &gt;  Service-Route: &lt;sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">orig at scscf.open-ims2.test</A>:6060;lr&gt;
</I>&gt;<i> &gt;  Allow: INVITE, ACK, CANCEL, OPTIONS, BYE, REFER, SUBSCRIBE, NOTIFY,
</I>&gt;<i> MESSAGE, INFO
</I>&gt;<i> &gt;  Server: Sip EXpress router (2.1.0-dev1 OpenIMSCore (i386/linux))
</I>&gt;<i> &gt;  Content-Length: 0
</I>&gt;<i> &gt;  Warning: 392 10.21.21.147:6060 &quot;Noisy feedback tells:  pid=6992
</I>&gt;<i> req_src_ip=10.21.21.147 req_src_port=5060
</I>&gt;<i> in_uri=sip:scscf.open-ims2.test:6060 out_uri=sip:scscf.open-ims2.test:6060
</I>&gt;<i> via_cnt==3&quot;
</I>&gt;<i> &gt;  WWW-Authenticate: Digest realm=&quot;open-ims2.test&quot;,
</I>&gt;<i> nonce=&quot;HmlHeaUo1mGzqMxSPx05UoQsop/54wAARBZrISwY0eM=&quot;, algorithm=AKAv1-MD5
</I>&gt;<i> &gt;  Security-Server: ipsec-3gpp; ealg=null; alg=hmac-md5-96; spi-c=5000;
</I>&gt;<i> spi-s=5001; port-c=4063; port-s=4064; q=0.1
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; so far so good... the trace reveals that this is sent to UE. as far as I
</I>&gt;<i> remember the P-CSCF shoudl now start the shell-scripts creating the IPSec
</I>&gt;<i> SAs, but the next logging just shows:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;  1(8012) WARNING:vqm_resize: resize(0) called
</I>&gt;<i> &gt;  1(8012) qm_malloc(0xb5faf000, 1012) called from mem/shm_mem.c:
</I>&gt;<i> _shm_resize(106)
</I>&gt;<i> &gt;  1(8012) qm_malloc(0xb5faf000, 1012) returns address 0xb619b61c frag.
</I>&gt;<i> 0xb619b604 (size=1012) on 1 -th hit
</I>&gt;<i> &gt;  1(8012) DEBUG: reply relayed. buf=0x8187584: SIP/2.0 401 Una...,
</I>&gt;<i> shmem=0xb619b61c: SIP/2.0 4 totag_retr=0
</I>&gt;<i> &gt;  1(8012) qm_free(0x812d580, 0x8187584), called from t_reply.c:
</I>&gt;<i> relay_reply(1420)
</I>&gt;<i> &gt;  1(8012) qm_free: freeing frag. 0x818756c alloc'ed from
</I>&gt;<i> msg_translator.c:
</I>&gt;<i> build_res_buf_from_sip_res(1684)
</I>&gt;<i> &gt;  1(8012) DEBUG: cleanup_uac_timers: RETR/FR timers reset
</I>&gt;<i> &gt;  1(8012) DEBUG:destroy_avp_list: destroying list (nil)
</I>&gt;<i> &gt;  1(8012) DEBUG:destroy_avp_list: destroying list (nil)
</I>&gt;<i> &gt;  1(8012) DEBUG:destroy_avp_list: destroying list (nil)
</I>&gt;<i> &gt;  1(8012) DEBUG:destroy_avp_list: destroying list (nil)
</I>&gt;<i> &gt;  1(8012) DEBUG:destroy_avp_list: destroying list (nil)
</I>&gt;<i> &gt;  1(8012) DEBUG:destroy_avp_list: destroying list (nil)
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; what happens after these strange (at least I don't know them)
</I>&gt;<i> 'destroy_avp_list' messages?
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; btw: your setkey output isn't complete...
</I>&gt;<i> &gt; you have build the SA for a request from UE =&gt; P-CSCF... for this
</I>&gt;<i> transaction you need at least an additional SA decoding the response, i.e.
</I>&gt;<i> from P-CSCF =&gt; UE...
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; br, Klemens
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; Here is my testbed:::
</I>&gt;<i> &gt; &gt; I am using Xpresent stack for IPSec at client ip 10.21.21.149
</I>&gt;<i> &gt; &gt; Open IMS in ip 10.21.21.147
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; While sending the first REGISTER it is okay but while sending the
</I>&gt;<i> &gt; &gt; encrypted REG over IPSec (esp) it does not handled by Open IMS. The
</I>&gt;<i> &gt; &gt; 2nd REG does not reach at pcscf.
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; Sending the ethereal trace for both client and server, output of
</I>&gt;<i> &gt; &gt; setkey, pcscf logs and pcscf.cfg for your reference.
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; Pl have a look and let me know if i did something wrong.
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; Also pl let me know how to handle logging info for servers like
</I>&gt;<i> &gt; &gt; p/s/icscf. Like suppose i want to dump the logs only for DEBUG and ERR
</I>&gt;<i> &gt; &gt; what should be the log level in cfg files.
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; Regards,
</I>&gt;<i> &gt; &gt; Sabyasachi
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; On 1/24/08, Klemens Schragel &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">klemens.schragel at gmx.at</A>&gt; wrote:
</I>&gt;<i> &gt; &gt; &gt; Hi,
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; try
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; setkey -c &lt;&lt; EOF
</I>&gt;<i> &gt; &gt; &gt; spdadd 192.168.0.7/32[5060] 192.168.0.5/32[5060] tcp -P out ipsec
</I>&gt;<i> &gt; &gt; esp/transport//unique:1 ;
</I>&gt;<i> &gt; &gt; &gt; EOF
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; then setkey -DP should response:
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; 192.168.0.7[5060] 192.168.0.5[5060] tcp
</I>&gt;<i> &gt; &gt; &gt;        out prio def ipsec
</I>&gt;<i> &gt; &gt; &gt;        esp/transport//unique:1
</I>&gt;<i> &gt; &gt; &gt;        created: Jan 24 06:43:35 2008  lastused:
</I>&gt;<i> &gt; &gt; &gt;        lifetime: 0(s) validtime: 0(s)
</I>&gt;<i> &gt; &gt; &gt;        spid=1 seq=0 pid=2041
</I>&gt;<i> &gt; &gt; &gt;        refcnt=1
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; br, Klemens
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; -----Original Message-----
</I>&gt;<i> &gt; &gt; &gt; From: Sabyasachi Samal [mailto:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">sabyasachisamal at gmail.com</A>]
</I>&gt;<i> &gt; &gt; &gt; Sent: Mittwoch, 23. J&#228;nner 2008 16:51
</I>&gt;<i> &gt; &gt; &gt; To: Klemens Schragel
</I>&gt;<i> &gt; &gt; &gt; Subject: Re: How to test IPSec in Open IMS
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; Hey,
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; I have already tried setkey -DP command but it is showing No SPD
</I>&gt;<i> &gt; &gt; entries.
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; Can you pl give one sample command to add one entry and how to dump
</I>&gt;<i> &gt; &gt; that.
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; I think there is some problem in the installation.
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; after installing the ipsec-tools in my /etc there is no ipsec.confand
</I>&gt;<i> &gt; &gt; &gt; /etc/init.d there is no ipsec to start.
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; BR,
</I>&gt;<i> &gt; &gt; &gt; Sabyasachi
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; On 1/23/08, Klemens Schragel &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">klemens.schragel at gmx.at</A>&gt; wrote:
</I>&gt;<i> &gt; &gt; &gt; &gt; Yes, actually this command should show the DB entries...
</I>&gt;<i> &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; Although I don't understand why you start setkey with a end of
</I>&gt;<i> file
</I>&gt;<i> &gt; &gt; &gt; entry...
</I>&gt;<i> &gt; &gt; &gt; [Hide Quoted Text]
</I>&gt;<i> &gt; &gt; &gt; &gt; I think you'll need the EOF also after adding spddump...
</I>&gt;<i> &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; But also for the dump you can start directly from the command line
</I>&gt;<i> &gt; &gt; with
</I>&gt;<i> &gt; &gt; &gt; &gt; setkey -DP
</I>&gt;<i> &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; br
</I>&gt;<i> &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; -----Original Message-----
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; From: Sabyasachi Samal [mailto:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">sabyasachisamal at gmail.com</A>]
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; Sent: Mittwoch, 23. J&#228;nner 2008 16:27
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; To: Klemens Schragel
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; Subject: Re: How to test IPSec in Open IMS
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; Thanks, Now it is not showing any error. but while adding a spd
</I>&gt;<i> &gt; &gt; using
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; below commad, i think it is not storing the data.
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; # setkey -c &lt;&lt; EOF
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; spdadd 10.21.21.147 10.21.21.149 any -P out ipsec
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt;EOF
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; then i am using setkey -c &lt;&lt; spddump to show those value. It is
</I>&gt;<i> not
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; showing anything.
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; Is there any database ipsec stores the data?
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; Regards,
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; Sabyasachi
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; On 1/23/08, Klemens Schragel &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">klemens.schragel at gmx.at</A>&gt; wrote:
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; Hi Sabyasachi,
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; Try it with &quot;setkey -c &lt;&lt; spdflush&quot;
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; And you can have the same effect by just entering setkey -FP
</I>&gt;<i> (see
</I>&gt;<i> &gt; &gt; also
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; man-pages of setkey)
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; br
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; -----Original Message-----
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; From: Sabyasachi Samal [mailto:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">sabyasachisamal at gmail.com</A>]
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; Sent: Mittwoch, 23. J&#228;nner 2008 15:54
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; To: Klemens Schragel
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; Subject: Re: How to test IPSec in Open IMS
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; Hello Klemens,
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; I am using # setkey -c spdflush the output is setkey:
</I>&gt;<i> spdflush:
</I>&gt;<i> &gt; &gt; no
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; such file or directory.
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; Pl let me know how to overcome this.
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; Regards,
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; Sabyasachi
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; On 1/23/08, Klemens Schragel &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">klemens.schragel at gmx.at</A>&gt;
</I>&gt;<i> wrote:
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; Hi Sabyasachi,
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; Could you send me the whole command you entered with
</I>&gt;<i> output?
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; First: as far as I know its spdadd =&gt; security policy
</I>&gt;<i> database
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; Second: the way you describe it sounds like you entered
</I>&gt;<i> the
</I>&gt;<i> &gt; &gt; &gt; command
</I>&gt;<i> &gt; &gt; &gt; [Hide Quoted Text]
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; direct
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; in your shell.. but sdpadd is a command of setkey so you
</I>&gt;<i> fist
</I>&gt;<i> &gt; &gt; have
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; to
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; start
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; setkey...
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; br, Klemens
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; -----Original Message-----
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; From: Sabyasachi Samal [mailto:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">sabyasachisamal at gmail.com</A>
</I>&gt;<i> ]
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; Sent: Mittwoch, 23. J&#228;nner 2008 13:53
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; To: Dragos Vingarzan
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; Cc: Klemens Schragel; <A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">openimscore-users at lists.berlios.de</A>
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; Subject: How to test IPSec in Open IMS
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; Hello Guys,
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; I am having problem while testing the stuffs using
</I>&gt;<i> IPSec.
</I>&gt;<i> I
</I>&gt;<i> &gt; &gt; am
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; using
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; 2.6.9-22.ELsmp kernel and install ipsec-tools 0.6.7. But
</I>&gt;<i> &gt; &gt; while i
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; am
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; using &quot;sdpadd&quot; it is showing command not found.
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; So can you pl help me how to over come this issue. For
</I>&gt;<i> this
</I>&gt;<i> &gt; &gt; the
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; scripts related to ipsec inside /ser_ims/modules/pcscf
</I>&gt;<i> did
</I>&gt;<i> &gt; &gt; not
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; work.
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; whether i need some extra module for the same, pl advise
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; Regards,
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt; Sabyasachi
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; --
</I>&gt;<i> &gt; &gt; &gt; GMX FreeMail: 1 GB Postfach, 5 E-Mail-Adressen, 10 Free SMS.
</I>&gt;<i> &gt; &gt; &gt; Alle Infos und kostenlose Anmeldung:
</I>&gt;<i> <A HREF="http://www.gmx.net/de/go/freemail">http://www.gmx.net/de/go/freemail</A>
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; --
</I>&gt;<i> &gt; Ist Ihr Browser Vista-kompatibel? Jetzt die neuesten
</I>&gt;<i> &gt; Browser-Versionen downloaden: <A HREF="http://www.gmx.net/de/go/browser">http://www.gmx.net/de/go/browser</A>
</I>&gt;<i> &gt;
</I>&gt;<i>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="https://lists.berlios.de/pipermail/openimscore-users/attachments/20080131/21698a6f/attachment.html">https://lists.berlios.de/pipermail/openimscore-users/attachments/20080131/21698a6f/attachment.html</A>&gt;
-------------- next part --------------
A non-text attachment was scrubbed...
Name: IPSec_Error_310108.zip
Type: application/zip
Size: 10772 bytes
Desc: not available
URL: &lt;<A HREF="https://lists.berlios.de/pipermail/openimscore-users/attachments/20080131/21698a6f/attachment.zip">https://lists.berlios.de/pipermail/openimscore-users/attachments/20080131/21698a6f/attachment.zip</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003283.html">[OpenIMSCore-Users] 403 Forbiddent: HSS unable to comply error	--&gt;HSS diameter : unable to comply
</A></li>
	<LI>Next message: <A HREF="003284.html">[OpenIMSCore-Users] OpenIMSCore on the network for my degree thesis
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3277">[ date ]</a>
              <a href="thread.html#3277">[ thread ]</a>
              <a href="subject.html#3277">[ subject ]</a>
              <a href="author.html#3277">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/openimscore-users">More information about the OpenIMSCore-Users
mailing list</a><br>
</body></html>
