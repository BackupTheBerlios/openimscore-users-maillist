<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [OpenIMSCore-Users] NAT problems
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/openimscore-users/2007-May/index.html" >
   <LINK REL="made" HREF="mailto:openimscore-users%40lists.berlios.de?Subject=Re%3A%20%5BOpenIMSCore-Users%5D%20NAT%20problems&In-Reply-To=%3COFC4AC5C59.A4C75510-ONC12572E9.002FDE18-C12572E9.00321576%40sagem.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001893.html">
   <LINK REL="Next"  HREF="001855.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[OpenIMSCore-Users] NAT problems</H1>
    <B>Daniel VIRASSAMY</B> 
    <A HREF="mailto:openimscore-users%40lists.berlios.de?Subject=Re%3A%20%5BOpenIMSCore-Users%5D%20NAT%20problems&In-Reply-To=%3COFC4AC5C59.A4C75510-ONC12572E9.002FDE18-C12572E9.00321576%40sagem.com%3E"
       TITLE="[OpenIMSCore-Users] NAT problems">daniel.virassamy at sagem.com
       </A><BR>
    <I>Mon May 28 11:07:02 CEST 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="001893.html">[OpenIMSCore-Users] Triggers
</A></li>
        <LI>Next message: <A HREF="001855.html">[OpenIMSCore-Users] NAT problems - RTP Proxy issue
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1854">[ date ]</a>
              <a href="thread.html#1854">[ thread ]</a>
              <a href="subject.html#1854">[ subject ]</a>
              <a href="author.html#1854">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi everyone,

I have tested lately IMS Core in NAT mode and came up with some issues.

Network explanation:

 IMS Core [private network - NAT mode activated] ---------------- (L3 
NAT)[with port forwarding towards P-CSCF] ------------ IMS Communicator [ 
registering to NAT public @:4060]


So registration goes well. The problem is after the registration phase in 
subsequent requests.

Actually the UE adds a route = next hop proxy, service route.

So it will be route = nat public@, scscf @


PCSCF waits for route = pcscf @, scscf @

So I get a 400 Bad request response.


The question is: Is it suppose to be the NAT which modifies the route 
header? (L5 NAT required).
As you can see from the traces the P-CSCF has no way to detect NAT as L3 @ 
== L5 @. So this is a blocking issue.

The only solution I see with this type of NAT is either to have a UE with 
can input the correct @ in route header or provision an @ (NAT public @) 
in P-CSCF to modify the expected route header.



Regards

Daniel


&quot; Ce courriel et les documents qui y sont attaches peuvent contenir des informations confidentielles. Si vous n'etes  pas le destinataire escompte, merci d'en informer l'expediteur immediatement et de detruire ce courriel  ainsi que tous les documents attaches de votre systeme informatique. Toute divulgation, distribution ou copie du present courriel et des documents attaches sans autorisation prealable de son emetteur est interdite.&quot; 

&quot; This e-mail and any attached documents may contain confidential or proprietary information. If you are not the intended recipient, please advise the sender immediately and delete this e-mail and all attached documents from your computer system. Any unauthorised disclosure, distribution or copying hereof is prohibited.&quot;
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="https://lists.berlios.de/pipermail/openimscore-users/attachments/20070528/d5981dc0/attachment.html">https://lists.berlios.de/pipermail/openimscore-users/attachments/20070528/d5981dc0/attachment.html</A>&gt;
-------------- next part --------------
A non-text attachment was scrubbed...
Name: nat_problem.pcap
Type: application/octet-stream
Size: 26457 bytes
Desc: not available
URL: &lt;<A HREF="https://lists.berlios.de/pipermail/openimscore-users/attachments/20070528/d5981dc0/attachment.obj">https://lists.berlios.de/pipermail/openimscore-users/attachments/20070528/d5981dc0/attachment.obj</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001893.html">[OpenIMSCore-Users] Triggers
</A></li>
	<LI>Next message: <A HREF="001855.html">[OpenIMSCore-Users] NAT problems - RTP Proxy issue
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1854">[ date ]</a>
              <a href="thread.html#1854">[ thread ]</a>
              <a href="subject.html#1854">[ subject ]</a>
              <a href="author.html#1854">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/openimscore-users">More information about the OpenIMSCore-Users
mailing list</a><br>
</body></html>
