<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [OpenIMSCore-Users] Bad Request Line --- REGISTER	sip:pcscf.open-ims.net:4060
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/openimscore-users/2008-April/index.html" >
   <LINK REL="made" HREF="mailto:openimscore-users%40lists.berlios.de?Subject=Re%3A%20%5BOpenIMSCore-Users%5D%20Bad%20Request%20Line%20---%20REGISTER%0A%09sip%3Apcscf.open-ims.net%3A4060&In-Reply-To=%3C48084BD9.50003%40crg.ee.uct.ac.za%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003794.html">
   <LINK REL="Next"  HREF="003797.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[OpenIMSCore-Users] Bad Request Line --- REGISTER	sip:pcscf.open-ims.net:4060</H1>
    <B>Adeyeye Michael</B> 
    <A HREF="mailto:openimscore-users%40lists.berlios.de?Subject=Re%3A%20%5BOpenIMSCore-Users%5D%20Bad%20Request%20Line%20---%20REGISTER%0A%09sip%3Apcscf.open-ims.net%3A4060&In-Reply-To=%3C48084BD9.50003%40crg.ee.uct.ac.za%3E"
       TITLE="[OpenIMSCore-Users] Bad Request Line --- REGISTER	sip:pcscf.open-ims.net:4060">micadeyeye at crg.ee.uct.ac.za
       </A><BR>
    <I>Fri Apr 18 09:20:57 CEST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="003794.html">[OpenIMSCore-Users] Adding Gq &amp; Rx libraries to Wireshark
</A></li>
        <LI>Next message: <A HREF="003797.html">[OpenIMSCore-Users] Rewrite uri
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3795">[ date ]</a>
              <a href="thread.html#3795">[ thread ]</a>
              <a href="subject.html#3795">[ subject ]</a>
              <a href="author.html#3795">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,
Here is an error, the log below shows that a REGISTER is sent to
sip.pcscf.open-ims.net:4060, and the ROUTE is sip:open-ims.net. The
reverse should be the appropriate way i.e. REGISTER to sip:open-ims.net
and ROUTE through sip.pcscf.open-ims.net:4060. To confirm, see
<A HREF="http://lists.pjsip.org/pipermail/pjsip_lists.pjsip.org/2008-April/002604.html">http://lists.pjsip.org/pipermail/pjsip_lists.pjsip.org/2008-April/002604.html</A>


The P-CSCF always generates an error that the Authorization header isn't
found. Whenever I use &quot;--proxy sip:pcscf.open-ims.test:4060&quot; i.e. without
lr, an authorization header is formed and the REGISTER is still addressed
to sip:pcscf..... In this case, the P-CSCF does not indicate that a
message is sent to it, needless to say that the registration fails also. I
understand that &quot;lr&quot; is needed here and that's why I get a feedback from
P-CSCF whenever I include it.


Is there any reason why these REGISTER parameters are reversed??

Michael.



micadeyeye at micadeyeye-desktop &lt;<A HREF="http://lists.pjsip.org/mailman/listinfo/pjsip_lists.pjsip.org">http://lists.pjsip.org/mailman/listinfo/pjsip_lists.pjsip.org</A>&gt;:/opt/pjproject-0.8.0/pjsip-apps/bin$
./pjsua-i686-pc-linux-gnu --registrar sip:open-ims.test --id
sip:bob at open-ims.test &lt;<A HREF="http://lists.pjsip.org/mailman/listinfo/pjsip_lists.pjsip.org">http://lists.pjsip.org/mailman/listinfo/pjsip_lists.pjsip.org</A>&gt; --username bob at open-ims.test &lt;<A HREF="http://lists.pjsip.org/mailman/listinfo/pjsip_lists.pjsip.org">http://lists.pjsip.org/mailman/listinfo/pjsip_lists.pjsip.org</A>&gt; --password bob
--local-port 5066 --realm open-ims.test --proxy
sip:pcscf.open-ims.test:4060;lr --use-ims
 09:04:33.689 os_core_unix.c pjlib 0.8.0-trunk for POSIX initialized
 09:04:33.691 sip_endpoint.c Creating endpoint instance...
 09:04:33.784          pjlib select() I/O Queue created (0xb7b2b098)
 09:04:33.784 sip_endpoint.c Module &quot;mod-msg-print&quot; registered
 09:04:33.785 sip_transport. Transport manager created.
 09:04:33.785 sip_endpoint.c Module &quot;mod-pjsua-log&quot; registered
 09:04:33.785 sip_endpoint.c Module &quot;mod-tsx-layer&quot; registered
 09:04:33.786 sip_endpoint.c Module &quot;mod-stateful-util&quot; registered
 09:04:33.787 sip_endpoint.c Module &quot;mod-ua&quot; registered
 09:04:33.787 sip_endpoint.c Module &quot;mod-100rel&quot; registered
 09:04:33.787 sip_endpoint.c Module &quot;mod-pjsua&quot; registered
 09:04:33.787 sip_endpoint.c Module &quot;mod-invite&quot; registered
 09:04:33.841      pasound.c PortAudio sound library initialized, status=0
 09:04:33.841      pasound.c PortAudio host api count=2
 09:04:33.841      pasound.c Sound device count=8
 09:04:33.841          pjlib select() I/O Queue created (0x81cd78c)
 09:04:33.842 sip_endpoint.c Module &quot;mod-evsub&quot; registered
 09:04:33.842 sip_endpoint.c Module &quot;mod-presence&quot; registered
 09:04:33.842 sip_endpoint.c Module &quot;mod-refer&quot; registered
 09:04:33.842 sip_endpoint.c Module &quot;mod-pjsua-pres&quot; registered
 09:04:33.843 sip_endpoint.c Module &quot;mod-pjsua-im&quot; registered
 09:04:33.843 sip_endpoint.c Module &quot;mod-pjsua-options&quot; registered
 09:04:33.843   pjsua_core.c 1 SIP worker threads created
 09:04:33.843   pjsua_core.c pjsua version 0.8.0-trunk for
i686-pc-linux-gnu initialized
 09:04:33.843   pjsua_core.c SIP UDP socket reachable at 192.168.0.1:5066
 09:04:33.843   udp0x81d9818 SIP UDP transport started, published address
is 192.168.0.1:5066
 09:04:33.843    pjsua_acc.c Account &lt;sip:192.168.0.1:5066&gt; added with id 0
 09:04:33.844    tcplis:5066 SIP TCP listener ready for incoming
connections at 192.168.0.1:5066
 09:04:33.844    pjsua_acc.c Account &lt;sip:192.168.0.1:5066;transport=TCP&gt;
added with id 1
 09:04:33.844    pjsua_acc.c Account sip:bob at open-ims.test &lt;<A HREF="http://lists.pjsip.org/mailman/listinfo/pjsip_lists.pjsip.org">http://lists.pjsip.org/mailman/listinfo/pjsip_lists.pjsip.org</A>&gt; added with id 2
 09:04:33.919   pjsua_core.c TX 468 bytes Request msg REGISTER/cseq=65040
(tdta0x81dd658) to UDP 127.0.0.1:4060:
REGISTER sip:pcscf.open-ims.test:4060 SIP/2.0
Via: SIP/2.0/UDP
192.168.0.1:5066;rport;branch=z9hG4bKPjHG6meV4A2cM3P-d9jQ1t-1T8GKsVxl8u
Max-Forwards: 70
From: &lt;sip:bob at open-ims.test &lt;<A HREF="http://lists.pjsip.org/mailman/listinfo/pjsip_lists.pjsip.org">http://lists.pjsip.org/mailman/listinfo/pjsip_lists.pjsip.org</A>&gt;&gt;;tag=tEhWFyEVplbCvWw6oDe8g32cqVCAmlk1
To: &lt;sip:bob at open-ims.test &lt;<A HREF="http://lists.pjsip.org/mailman/listinfo/pjsip_lists.pjsip.org">http://lists.pjsip.org/mailman/listinfo/pjsip_lists.pjsip.org</A>&gt;&gt;
Call-ID: leUbaAM2vvqvzrdcNucYXOGuRWfJFstv
CSeq: 65040 REGISTER
User-Agent: PJSUA v0.8.0-trunk/i686-pc-linux-gnu
Contact: &lt;sip:bob at 192.168.0.1 &lt;<A HREF="http://lists.pjsip.org/mailman/listinfo/pjsip_lists.pjsip.org">http://lists.pjsip.org/mailman/listinfo/pjsip_lists.pjsip.org</A>&gt;:5066&gt;
Expires: 300
Route: &lt;sip:open-ims.test&gt;
Content-Length:  0


--end msg--
 09:04:33.919    pjsua_acc.c Registration sent

 09:05:03.972   pjsua_core.c RX 621 bytes Response msg
504/REGISTER/cseq=65040 (rdata0x81d9c8c) from UDP 127.0.0.1:4060:
SIP/2.0 504 Server Time-Out
Via: SIP/2.0/UDP
192.168.0.1:5066;rport=5066;branch=z9hG4bKPjHG6meV4A2cM3P-d9jQ1t-1T8GKsVxl8u;received=127.0.0.1
From: &lt;sip:bob at open-ims.test &lt;<A HREF="http://lists.pjsip.org/mailman/listinfo/pjsip_lists.pjsip.org">http://lists.pjsip.org/mailman/listinfo/pjsip_lists.pjsip.org</A>&gt;&gt;;tag=tEhWFyEVplbCvWw6oDe8g32cqVCAmlk1
To: &lt;sip:bob at open-ims.test &lt;<A HREF="http://lists.pjsip.org/mailman/listinfo/pjsip_lists.pjsip.org">http://lists.pjsip.org/mailman/listinfo/pjsip_lists.pjsip.org</A>&gt;&gt;;tag=f4c6194fd3f02ff08827e179165a540f-d611
Call-ID: leUbaAM2vvqvzrdcNucYXOGuRWfJFstv
CSeq: 65040 REGISTER
Server: Sip EXpress router (2.1.0-dev1 OpenIMSCore (i386/linux))
Content-Length: 0
Warning: 392 127.0.0.1:4060 &quot;Noisy feedback tells:  pid=25086
req_src_ip=127.0.0.1 req_src_port=5066 in_uri=sip:pcscf.open-ims.test:4060
out_uri=sip:pcscf.open-ims.test:4060 via_cnt==0&quot;


--end msg--
 09:05:03.972    pjsua_acc.c SIP registration failed, status=504 (Server
Time-Out)





P-CSCF ERROR MESSAGE

 2(25083) DBG:P-CSCF:P_remove_header_tag(): Original &lt;Require&gt; -&gt; &lt;path&gt;
 2(25083) DBG:P-CSCF:P_remove_header_tag(): Original &lt;Require&gt; -&gt; &lt;path&gt;
 2(25083) DBG:P-CSCF:P_verify_security: Looking for &lt;1://127.0.0.1:4060 &lt;<A HREF="http://lists.pjsip.org/pipermail/pjsip_lists.pjsip.org/2008-April/1://127.0.0.1:4060">http://lists.pjsip.org/pipermail/pjsip_lists.pjsip.org/2008-April/1://127.0.0.1:4060</A>&gt;&gt;
 2(25083) ERR:P-CSCF:cscf_get_authorization: Message does not contain
Authorization header.
 2(25083) INF:P-CSCF:P_add_integrity_protected: No authorization header
found.
 2(25083) DBG:P-CSCF:P_remove_header_tag(): Original &lt;Require&gt; -&gt; &lt;path&gt;
 2(25083) DBG:P-CSCF:P_remove_header_tag(): Original &lt;Require&gt; -&gt; &lt;path&gt;
 2(25083) DBG:P-CSCF:P_remove_header_tag(): Original &lt;Require&gt; -&gt; &lt;path&gt;
 2(25083) DBG:P-CSCF:P_remove_header_tag(): Original &lt;Require&gt; -&gt; &lt;path&gt;







Yours,
Michael.


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003794.html">[OpenIMSCore-Users] Adding Gq &amp; Rx libraries to Wireshark
</A></li>
	<LI>Next message: <A HREF="003797.html">[OpenIMSCore-Users] Rewrite uri
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3795">[ date ]</a>
              <a href="thread.html#3795">[ thread ]</a>
              <a href="subject.html#3795">[ subject ]</a>
              <a href="author.html#3795">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/openimscore-users">More information about the OpenIMSCore-Users
mailing list</a><br>
</body></html>
