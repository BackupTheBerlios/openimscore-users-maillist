<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [OpenIMSCore-Users] AS sends only a 200Ok, but other messages are refused
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/openimscore-users/2008-April/index.html" >
   <LINK REL="made" HREF="mailto:openimscore-users%40lists.berlios.de?Subject=Re%3A%20%5BOpenIMSCore-Users%5D%20AS%20sends%20only%20a%20200Ok%2C%0A%20but%20other%20messages%20are%20refused&In-Reply-To=%3C47FC997B.3050609%40fokus.fraunhofer.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003745.html">
   <LINK REL="Next"  HREF="003771.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[OpenIMSCore-Users] AS sends only a 200Ok, but other messages are refused</H1>
    <B>Dragos Vingarzan</B> 
    <A HREF="mailto:openimscore-users%40lists.berlios.de?Subject=Re%3A%20%5BOpenIMSCore-Users%5D%20AS%20sends%20only%20a%20200Ok%2C%0A%20but%20other%20messages%20are%20refused&In-Reply-To=%3C47FC997B.3050609%40fokus.fraunhofer.de%3E"
       TITLE="[OpenIMSCore-Users] AS sends only a 200Ok, but other messages are refused">Dragos.Vingarzan at fokus.fraunhofer.de
       </A><BR>
    <I>Wed Apr  9 12:24:59 CEST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="003745.html">[OpenIMSCore-Users] AS sends only a 200Ok, but other messages are refused
</A></li>
        <LI>Next message: <A HREF="003771.html">[OpenIMSCore-Users] AS sends only a 200Ok, but other messages are refused
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3751">[ date ]</a>
              <a href="thread.html#3751">[ thread ]</a>
              <a href="subject.html#3751">[ subject ]</a>
              <a href="author.html#3751">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>errm... are you sure that you actually have an user: 
&quot;sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">laila at scscf.ims.netgroup.uniroma2.it</A>&quot;?

Then could you please send a full wireshark/tcpdump trace showing all 
the message between all the Open IMS Core components and the AS?

Cheers,
-Dragos


laila aoufi wrote:
&gt;<i> Hi Dragos!
</I>&gt;<i> Thank's a lot for your quick response..
</I>&gt;<i> I have changed the Route Header as you have suggested to me...
</I>&gt;<i> I am also routing to an SCSCF because i have only one SCSCF in my 
</I>&gt;<i> domain, and i am talking directly to it..
</I>&gt;<i> but i still have the same problem...
</I>&gt;<i> Here you have the message i am trying to send.. and the 403-Forbidden 
</I>&gt;<i> response
</I>&gt;<i>  
</I>&gt;<i> 1207734240201: 09:44:00.201 Wed 09 Apr 2008, 160.80.221.19:5060/udp 
</I>&gt;<i> (903 bytes): sent
</I>&gt;<i> MESSAGE 
</I>&gt;<i> sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">laila at scscf.ims.netgroup.uniroma2.it</A>;pName=ist1;pType=meteoClient 
</I>&gt;<i> SIP/2.0
</I>&gt;<i> Via: SIP/2.0/UDP 
</I>&gt;<i> appserver.ims.netgroup.uniroma2.it:5060;rport;branch=z9hG4bKc41ad52c
</I>&gt;<i> Route: &lt;sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">orig at appserver.ims.netgroup.uniroma2.it</A>;lr&gt;
</I>&gt;<i> Max-Forwards: 70
</I>&gt;<i> To: 
</I>&gt;<i> &lt;sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">laila at scscf.ims.netgroup.uniroma2.it</A>;pName=ist1;pType=meteoClient&gt;
</I>&gt;<i> From: &lt;sip:appserver.ims.netgroup.uniroma2.it&gt;;tag=505358073382
</I>&gt;<i> Call-ID: <A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">305903370552 at appserver.ims.netgroup.uniroma2.it</A>
</I>&gt;<i> CSeq: 1 MESSAGE
</I>&gt;<i> Expires: 3600
</I>&gt;<i> User-Agent: mjsip 1.7
</I>&gt;<i> Subject:
</I>&gt;<i> Content-Length: 333
</I>&gt;<i> Content-Type: application/text
</I>&gt;<i> {&quot;WrappedMessage&quot;:{&quot;Name&quot;:&quot;it.uniroma2.smile.sipbinding.sipmessage.YPSearchResponseMessage&quot;,&quot;Fault&quot;:&quot;false&quot;,&quot;Response&quot;:[],&quot;__class&quot;:&quot;it.uniroma2.smile.sipbinding.sipmessage.YPSearchResponseMessage&quot;},&quot;Request&quot;:&quot;false&quot;,&quot;__class&quot;:&quot;it.uniroma2.smile.sipbinding.sipmessage.JSONMessage&quot;,&quot;FragTot&quot;:&quot;0&quot;,&quot;SeqNo&quot;:&quot;1&quot;,&quot;RefSeq&quot;:&quot;0&quot;,&quot;FragNo&quot;:&quot;0&quot;}-----End-of-message-----
</I>&gt;<i>  
</I>&gt;<i> 1207734240202: 09:44:00.202 Wed 09 Apr 2008, 160.80.221.19:5060/udp 
</I>&gt;<i> (571 bytes): received
</I>&gt;<i> SIP/2.0 403 Forbidden - Dialog not found on S-CSCF or Terminating user 
</I>&gt;<i> not suitable for unregistered services
</I>&gt;<i> Via: SIP/2.0/UDP 
</I>&gt;<i> appserver.ims.netgroup.uniroma2.it:5060;rport=5060;branch=z9hG4bKe9156960;received=160.80.221.22
</I>&gt;<i> To: 
</I>&gt;<i> &lt;sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">laila at scscf.ims.netgroup.uniroma2.it</A>;pName=ist0;pType=processMem&gt;;tag=0cd906250d7bd8847bbe9f3434cf0f4c.e99a
</I>&gt;<i> From: &lt;sip:appserver.ims.netgroup.uniroma2.it&gt;;tag=778988654270
</I>&gt;<i> Call-ID: <A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">321444959333 at appserver.ims.netgroup.uniroma2.it</A>
</I>&gt;<i> CSeq: 1 MESSAGE
</I>&gt;<i> Server: Sip EXpress router (2.1.0-dev1 OpenIMSCore (i386/linux))
</I>&gt;<i> Content-Length: 0
</I>&gt;<i> -----End-of-message-----
</I>&gt;<i>  
</I>&gt;<i> Hope someone can help me!
</I>&gt;<i>  
</I>&gt;<i> Thank you very much
</I>&gt;<i>  
</I>&gt;<i> Laila
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> &gt; Date: Fri, 28 Mar 2008 00:32:26 +0100
</I>&gt;<i> &gt; From: <A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">Dragos.Vingarzan at fokus.fraunhofer.de</A>
</I>&gt;<i> &gt; To: <A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">lailaaoufi at hotmail.com</A>
</I>&gt;<i> &gt; CC: <A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">openimscore-users at lists.berlios.de</A>
</I>&gt;<i> &gt; Subject: Re: [OpenIMSCore-Users] AS sends only a 200Ok, but other 
</I>&gt;<i> messages are refused
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Hi Laila,
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; That would be because you would have to follow certain rules when
</I>&gt;<i> &gt; sending messages from the AS towards clients. The first thing is to
</I>&gt;<i> &gt; figure out if you want to do origination or termination. Based on that
</I>&gt;<i> &gt; you need to route the message to an I-CSCF that will find out what is
</I>&gt;<i> &gt; the S-CSCF for the originating/terminating identity. Then the I-CSCF
</I>&gt;<i> &gt; would route there.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; - for origination - you need to have a Route:
</I>&gt;<i> &gt; &lt;sip:domain.of.originating.user;orig;lr&gt;. Of course, proper
</I>&gt;<i> &gt; P-Asserted-Identity and a proper PSI + service profile for the AS is
</I>&gt;<i> &gt; required if you do origination with the AS identity
</I>&gt;<i> &gt; - for termination - no route header
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; The basic Open IMS Core setup with just one S-CSCF allows you to get
</I>&gt;<i> &gt; away with bad routing in most situation, but I would say that you 
</I>&gt;<i> should
</I>&gt;<i> &gt; not route initial requests from the AS directly to an S-CSCF unless you
</I>&gt;<i> &gt; really know what you are doing, as you probably discovered somehow the
</I>&gt;<i> &gt; right S-CSCF to send to.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Cheers,
</I>&gt;<i> &gt; -Dragos
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; laila aoufi wrote:
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; Hi all!
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; Please can someone help me?
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; I have created an Application Server (AS) and attached it to the
</I>&gt;<i> &gt; &gt; HSS using open-ims.The AS doesn't have to register to HSS. I have
</I>&gt;<i> &gt; &gt; defined it following the instructions written in openimscore, and
</I>&gt;<i> &gt; &gt; it seems that it's all ok.
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; But the problem is that, when my client try to contact the AS
</I>&gt;<i> &gt; &gt; sending a MESSAGE, the AS makes a 200 ok response and sends it
</I>&gt;<i> &gt; &gt; (through the SCSCF), and the client receives it successfuly. But
</I>&gt;<i> &gt; &gt; the AS has also to send another message for the service requested
</I>&gt;<i> &gt; &gt; by client. In the captures, we see that the AS create this
</I>&gt;<i> &gt; &gt; message, but when it sends it, it receives a
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; SIP/2.0 403 Forbidden - Dialog not found on S-CSCF or Terminating
</I>&gt;<i> &gt; &gt; user not suitable for unregistered services
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; Someone has any idea about the possible problem?
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; Thank you very much
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; Laila
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> ------------------------------------------------------------------------
</I>&gt;<i> &gt; &gt; Sigue de cerca las &#250;ltimas tendencias y lo que m&#225;s rompe MSN V&#237;deo
</I>&gt;<i> &gt; &gt; &lt;<A HREF="http://video.msn.com/video.aspx?mkt=es-es">http://video.msn.com/video.aspx?mkt=es-es</A>&gt;
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> ------------------------------------------------------------------------
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; _______________________________________________
</I>&gt;<i> &gt; &gt; OpenIMSCore-Users mailing list
</I>&gt;<i> &gt; &gt; <A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">OpenIMSCore-Users at lists.berlios.de</A>
</I>&gt;<i> &gt; &gt; <A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">https://lists.berlios.de/mailman/listinfo/openimscore-users</A>
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; --
</I>&gt;<i> &gt; -----------------------------------------
</I>&gt;<i> &gt; Dipl. Eng. Dragos Vingarzan
</I>&gt;<i> &gt; Fraunhofer FOKUS/NGNI
</I>&gt;<i> &gt; Kaiserin-Augusta-Allee 31
</I>&gt;<i> &gt; 10589 Berlin,Germany
</I>&gt;<i> &gt; Phone +49 (0)30 - 3463 - 7385
</I>&gt;<i> &gt; Mobile +49 (0)176 - 48 32 16 00
</I>&gt;<i> &gt; Web www.fokus.fraunhofer.de www.openimscore.org
</I>&gt;<i> &gt; We could change the world if God would give us the source code...
</I>&gt;<i> &gt; -----------------------------------------------------------------
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> ------------------------------------------------------------------------
</I>&gt;<i> Sigue de cerca las &#250;ltimas tendencias y lo que m&#225;s rompe MSN V&#237;deo 
</I>&gt;<i> &lt;<A HREF="http://video.msn.com/video.aspx?mkt=es-es">http://video.msn.com/video.aspx?mkt=es-es</A>&gt;
</I>

-- 
-----------------------------------------
Dipl. Eng. Dragos Vingarzan
Fraunhofer FOKUS/NGNI
Kaiserin-Augusta-Allee 31
10589 Berlin,Germany
Phone +49 (0)30 - 3463 - 7385
Mobile +49 (0)176 - 48 32 16 00
Web www.fokus.fraunhofer.de www.openimscore.org
We could change the world if God would give us the source code...
-----------------------------------------------------------------


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003745.html">[OpenIMSCore-Users] AS sends only a 200Ok, but other messages are refused
</A></li>
	<LI>Next message: <A HREF="003771.html">[OpenIMSCore-Users] AS sends only a 200Ok, but other messages are refused
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3751">[ date ]</a>
              <a href="thread.html#3751">[ thread ]</a>
              <a href="subject.html#3751">[ subject ]</a>
              <a href="author.html#3751">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/openimscore-users">More information about the OpenIMSCore-Users
mailing list</a><br>
</body></html>
