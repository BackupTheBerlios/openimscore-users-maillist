<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [OpenIMSCore-Users] AS sends only a 200Ok, but other messages are refused
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/openimscore-users/2008-April/index.html" >
   <LINK REL="made" HREF="mailto:openimscore-users%40lists.berlios.de?Subject=Re%3A%20%5BOpenIMSCore-Users%5D%20AS%20sends%20only%20a%20200Ok%2C%0A%20but%20other%20messages%20are%20refused&In-Reply-To=%3CBAY105-W214F6770E602376D3DD97CD2EB0%40phx.gbl%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003751.html">
   <LINK REL="Next"  HREF="003772.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[OpenIMSCore-Users] AS sends only a 200Ok, but other messages are refused</H1>
    <B>laila aoufi</B> 
    <A HREF="mailto:openimscore-users%40lists.berlios.de?Subject=Re%3A%20%5BOpenIMSCore-Users%5D%20AS%20sends%20only%20a%20200Ok%2C%0A%20but%20other%20messages%20are%20refused&In-Reply-To=%3CBAY105-W214F6770E602376D3DD97CD2EB0%40phx.gbl%3E"
       TITLE="[OpenIMSCore-Users] AS sends only a 200Ok, but other messages are refused">lailaaoufi at hotmail.com
       </A><BR>
    <I>Tue Apr 15 13:32:33 CEST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="003751.html">[OpenIMSCore-Users] AS sends only a 200Ok, but other messages are refused
</A></li>
        <LI>Next message: <A HREF="003772.html">[OpenIMSCore-Users] AS sends only a 200Ok,	but other messages are refused
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3771">[ date ]</a>
              <a href="thread.html#3771">[ thread ]</a>
              <a href="subject.html#3771">[ subject ]</a>
              <a href="author.html#3771">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
Hi all,
 
Is there someone who has understood what's wrong with the messages i send (between scscf and AS)?
I have sent all the wireshark captures between all of the nodes of Open IMSCore...(because i still have a 403-Forbidden response).
Please can someone help me? it is very important and urgent..
 
Thank you so much
 
Laila&gt; Date: Wed, 9 Apr 2008 12:24:59 +0200&gt; From: <A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">Dragos.Vingarzan at fokus.fraunhofer.de</A>&gt; To: <A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">lailaaoufi at hotmail.com</A>&gt; CC: <A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">openimscore-users at lists.berlios.de</A>&gt; Subject: Re: [OpenIMSCore-Users] AS sends only a 200Ok,but other messages are refused&gt; &gt; errm... are you sure that you actually have an user: &gt; &quot;sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">laila at scscf.ims.netgroup.uniroma2.it</A>&quot;?&gt; &gt; Then could you please send a full wireshark/tcpdump trace showing all &gt; the message between all the Open IMS Core components and the AS?&gt; &gt; Cheers,&gt; -Dragos&gt; &gt; &gt; laila aoufi wrote:&gt; &gt; Hi Dragos!&gt; &gt; Thank's a lot for your quick response..&gt; &gt; I have changed the Route Header as you have suggested to me...&gt; &gt; I am also routing to an SCSCF because i have only one SCSCF in my &gt; &gt; domain, and i am talking directly to it..&gt; &gt; but i still have the same problem...&gt; &gt; Here you have the message i am trying to send.. and the 403-Forbidden &gt; &gt; response&gt; &gt; &gt; &gt; 1207734240201: 09:44:00.201 Wed 09 Apr 2008, 160.80.221.19:5060/udp &gt; &gt; (903 bytes): sent&gt; &gt; MESSAGE &gt; &gt; sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">laila at scscf.ims.netgroup.uniroma2.it</A>;pName=ist1;pType=meteoClient &gt; &gt; SIP/2.0&gt; &gt; Via: SIP/2.0/UDP &gt; &gt; appserver.ims.netgroup.uniroma2.it:5060;rport;branch=z9hG4bKc41ad52c&gt; &gt; Route: &lt;sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">orig at appserver.ims.netgroup.uniroma2.it</A>;lr&gt;&gt; &gt; Max-Forwards: 70&gt; &gt; To: &gt; &gt; &lt;sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">laila at scscf.ims.netgroup.uniroma2.it</A>;pName=ist1;pType=meteoClient&gt;&gt; &gt; From: &lt;sip:appserver.ims.netgroup.uniroma2.it&gt;;tag=505358073382&gt; &gt; Call-ID: <A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">305903370552 at appserver.ims.netgroup.uniroma2.it</A>&gt; &gt; CSeq: 1 MESSAGE&gt; &gt; Expires: 3600&gt; &gt; User-Agent: mjsip 1.7&gt; &gt; Subject:&gt; &gt; Content-Length: 333&gt; &gt; Content-Type: application/text&gt; &gt; {&quot;WrappedMessage&quot;:{&quot;Name&quot;:&quot;it.uniroma2.smile.sipbinding.sipmessage.YPSearchResponseMessage&quot;,&quot;Fault&quot;:&quot;false&quot;,&quot;Response&quot;:[],&quot;__class&quot;:&quot;it.uniroma2.smile.sipbinding.sipmessage.YPSearchResponseMessage&quot;},&quot;Request&quot;:&quot;false&quot;,&quot;__class&quot;:&quot;it.uniroma2.smile.sipbinding.sipmessage.JSONMessage&quot;,&quot;FragTot&quot;:&quot;0&quot;,&quot;SeqNo&quot;:&quot;1&quot;,&quot;RefSeq&quot;:&quot;0&quot;,&quot;FragNo&quot;:&quot;0&quot;}-----End-of-message-----&gt; &gt; &gt; &gt; 1207734240202: 09:44:00.202 Wed 09 Apr 2008, 160.80.221.19:5060/udp &gt; &gt; (571 bytes): received&gt; &gt; SIP/2.0 403 Forbidden - Dialog not found on S-CSCF or Terminating user &gt; &gt; not suitable for unregistered services&gt; &gt; Via: SIP/2.0/UDP &gt; &gt; appserver.ims.netgroup.uniroma2.it:5060;rport=5060;branch=z9hG4bKe9156960;received=160.80.221.22&gt; &gt; To: &gt; &gt; &lt;sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">laila at scscf.ims.netgroup.uniroma2.it</A>;pName=ist0;pType=processMem&gt;;tag=0cd906250d7bd8847bbe9f3434cf0f4c.e99a&gt; &gt; From: &lt;sip:appserver.ims.netgroup.uniroma2.it&gt;;tag=778988654270&gt; &gt; Call-ID: <A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">321444959333 at appserver.ims.netgroup.uniroma2.it</A>&gt; &gt; CSeq: 1 MESSAGE&gt; &gt; Server: Sip EXpress router (2.1.0-dev1 OpenIMSCore (i386/linux))&gt; &gt; Content-Length: 0&gt; &gt; -----End-of-message-----&gt; &gt; &gt; &gt; Hope someone can help me!&gt; &gt; &gt; &gt; Thank you very much&gt; &gt; &gt; &gt; Laila&gt; &gt;&gt; &gt;&gt; &gt; &gt; Date: Fri, 28 Mar 2008 00:32:26 +0100&gt; &gt; &gt; From: <A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">Dragos.Vingarzan at fokus.fraunhofer.de</A>&gt; &gt; &gt; To: <A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">lailaaoufi at hotmail.com</A>&gt; &gt; &gt; CC: <A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">openimscore-users at lists.berlios.de</A>&gt; &gt; &gt; Subject: Re: [OpenIMSCore-Users] AS sends only a 200Ok, but other &gt; &gt; messages are refused&gt; &gt; &gt;&gt; &gt; &gt; Hi Laila,&gt; &gt; &gt;&gt; &gt; &gt; That would be because you would have to follow certain rules when&gt; &gt; &gt; sending messages from the AS towards clients. The first thing is to&gt; &gt; &gt; figure out if you want to do origination or termination. Based on that&gt; &gt; &gt; you need to route the message to an I-CSCF that will find out what is&gt; &gt; &gt; the S-CSCF for the originating/terminating identity. Then the I-CSCF&gt; &gt; &gt; would route there.&gt; &gt; &gt;&gt; &gt; &gt; - for origination - you need to have a Route:&gt; &gt; &gt; &lt;sip:domain.of.originating.user;orig;lr&gt;. Of course, proper&gt; &gt; &gt; P-Asserted-Identity and a proper PSI + service profile for the AS is&gt; &gt; &gt; required if you do origination with the AS identity&gt; &gt; &gt; - for termination - no route header&gt; &gt; &gt;&gt; &gt; &gt;&gt; &gt; &gt; The basic Open IMS Core setup with just one S-CSCF allows you to get&gt; &gt; &gt; away with bad routing in most situation, but I would say that you &gt; &gt; should&gt; &gt; &gt; not route initial requests from the AS directly to an S-CSCF unless you&gt; &gt; &gt; really know what you are doing, as you probably discovered somehow the&gt; &gt; &gt; right S-CSCF to send to.&gt; &gt; &gt;&gt; &gt; &gt; Cheers,&gt; &gt; &gt; -Dragos&gt; &gt; &gt;&gt; &gt; &gt; laila aoufi wrote:&gt; &gt; &gt; &gt;&gt; &gt; &gt; &gt; Hi all!&gt; &gt; &gt; &gt;&gt; &gt; &gt; &gt; Please can someone help me?&gt; &gt; &gt; &gt;&gt; &gt; &gt; &gt; I have created an Application Server (AS) and attached it to the&gt; &gt; &gt; &gt; HSS using open-ims.The AS doesn't have to register to HSS. I have&gt; &gt; &gt; &gt; defined it following the instructions written in openimscore, and&gt; &gt; &gt; &gt; it seems that it's all ok.&gt; &gt; &gt; &gt;&gt; &gt; &gt; &gt; But the problem is that, when my client try to contact the AS&gt; &gt; &gt; &gt; sending a MESSAGE, the AS makes a 200 ok response and sends it&gt; &gt; &gt; &gt; (through the SCSCF), and the client receives it successfuly. But&gt; &gt; &gt; &gt; the AS has also to send another message for the service requested&gt; &gt; &gt; &gt; by client. In the captures, we see that the AS create this&gt; &gt; &gt; &gt; message, but when it sends it, it receives a&gt; &gt; &gt; &gt;&gt; &gt; &gt; &gt; SIP/2.0 403 Forbidden - Dialog not found on S-CSCF or Terminating&gt; &gt; &gt; &gt; user not suitable for unregistered services&gt; &gt; &gt; &gt;&gt; &gt; &gt; &gt; Someone has any idea about the possible problem?&gt; &gt; &gt; &gt;&gt; &gt; &gt; &gt; Thank you very much&gt; &gt; &gt; &gt;&gt; &gt; &gt; &gt; Laila&gt; &gt; &gt; &gt;&gt; &gt; &gt; &gt;&gt; &gt; &gt; &gt;&gt; &gt; &gt; &gt; &gt; &gt; ------------------------------------------------------------------------&gt; &gt; &gt; &gt; Sigue de cerca las &#250;ltimas tendencias y lo que m&#225;s rompe MSN V&#237;deo&gt; &gt; &gt; &gt; &lt;<A HREF="http://video.msn.com/video.aspx?mkt=es-es">http://video.msn.com/video.aspx?mkt=es-es</A>&gt;&gt; &gt; &gt; &gt; &gt; &gt; ------------------------------------------------------------------------&gt; &gt; &gt; &gt;&gt; &gt; &gt; &gt; _______________________________________________&gt; &gt; &gt; &gt; OpenIMSCore-Users mailing list&gt; &gt; &gt; &gt; <A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">OpenIMSCore-Users at lists.berlios.de</A>&gt; &gt; &gt; &gt; <A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">https://lists.berlios.de/mailman/listinfo/openimscore-users</A>&gt; &gt; &gt; &gt;&gt; &gt; &gt;&gt; &gt; &gt;&gt; &gt; &gt; --&gt; &gt; &gt; -----------------------------------------&gt; &gt; &gt; Dipl. Eng. Dragos Vingarzan&gt; &gt; &gt; Fraunhofer FOKUS/NGNI&gt; &gt; &gt; Kaiserin-Augusta-Allee 31&gt; &gt; &gt; 10589 Berlin,Germany&gt; &gt; &gt; Phone +49 (0)30 - 3463 - 7385&gt; &gt; &gt; Mobile +49 (0)176 - 48 32 16 00&gt; &gt; &gt; Web www.fokus.fraunhofer.de www.openimscore.org&gt; &gt; &gt; We could change the world if God would give us the source code...&gt; &gt; &gt; -----------------------------------------------------------------&gt; &gt; &gt;&gt; &gt; &gt;&gt; &gt;&gt; &gt;&gt; &gt; ------------------------------------------------------------------------&gt; &gt; Sigue de cerca las &#250;ltimas tendencias y lo que m&#225;s rompe MSN V&#237;deo &gt; &gt; &lt;<A HREF="http://video.msn.com/video.aspx?mkt=es-es">http://video.msn.com/video.aspx?mkt=es-es</A>&gt;&gt; &gt; &gt; -- &gt; -----------------------------------------&gt; Dipl. Eng. Dragos Vingarzan&gt; Fraunhofer FOKUS/NGNI&gt; Kaiserin-Augusta-Allee 31&gt; 10589 Berlin,Germany&gt; Phone +49 (0)30 - 3463 - 7385&gt; Mobile +49 (0)176 - 48 32 16 00&gt; Web www.fokus.fraunhofer.de www.openimscore.org&gt; We could change the world if God would give us the source code...&gt; -----------------------------------------------------------------&gt; 
_________________________________________________________________
MSN Video. 
<A HREF="http://video.msn.com/?mkt=es-es">http://video.msn.com/?mkt=es-es</A>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="https://lists.berlios.de/pipermail/openimscore-users/attachments/20080415/4ad394b8/attachment.html">https://lists.berlios.de/pipermail/openimscore-users/attachments/20080415/4ad394b8/attachment.html</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003751.html">[OpenIMSCore-Users] AS sends only a 200Ok, but other messages are refused
</A></li>
	<LI>Next message: <A HREF="003772.html">[OpenIMSCore-Users] AS sends only a 200Ok,	but other messages are refused
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3771">[ date ]</a>
              <a href="thread.html#3771">[ thread ]</a>
              <a href="subject.html#3771">[ subject ]</a>
              <a href="author.html#3771">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/openimscore-users">More information about the OpenIMSCore-Users
mailing list</a><br>
</body></html>
