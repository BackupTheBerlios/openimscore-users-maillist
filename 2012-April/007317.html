<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [OpenIMSCore-Users] Routing of SIP OPTIONS
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/openimscore-users/2012-April/index.html" >
   <LINK REL="made" HREF="mailto:openimscore-users%40lists.berlios.de?Subject=Re%3A%20%5BOpenIMSCore-Users%5D%20Routing%20of%20SIP%20OPTIONS&In-Reply-To=%3CCBACAAA5.8CC0%25Alan.Kwon%40interoptechnologies.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="007316.html">
   <LINK REL="Next"  HREF="007313.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[OpenIMSCore-Users] Routing of SIP OPTIONS</H1>
    <B>Kwon, Alan</B> 
    <A HREF="mailto:openimscore-users%40lists.berlios.de?Subject=Re%3A%20%5BOpenIMSCore-Users%5D%20Routing%20of%20SIP%20OPTIONS&In-Reply-To=%3CCBACAAA5.8CC0%25Alan.Kwon%40interoptechnologies.com%3E"
       TITLE="[OpenIMSCore-Users] Routing of SIP OPTIONS">Alan.Kwon at interoptechnologies.com
       </A><BR>
    <I>Thu Apr 12 22:54:51 CEST 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="007316.html">[OpenIMSCore-Users] Routing of SIP OPTIONS
</A></li>
        <LI>Next message: <A HREF="007313.html">[OpenIMSCore-Users] 4th ngnlab.eu workshop CALL FOR PAPERS
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7317">[ date ]</a>
              <a href="thread.html#7317">[ thread ]</a>
              <a href="subject.html#7317">[ subject ]</a>
              <a href="author.html#7317">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Franz,

Below is the console log for an OPTIONS and its response coming from
I-CSCF.
I've increased it to level 7. How/where do I get the tracefile?

Thanks,
Alan

4(14198) qm_malloc(0x8171fa0, 808) called from receive.c: receive_msg(94)
 4(14198) qm_malloc(0x8171fa0, 808) returns address 0x81d8d34 frag.
0x81d8d1c (size=808) on 1 -th hit
 4(14198) SIP Request:
 4(14198)  method:  &lt;OPTIONS&gt;
 4(14198)  uri:     &lt;sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">+12398512495 at ims.iot1.com</A>;user=phone&gt;
 4(14198)  version: &lt;SIP/2.0&gt;
 4(14198) parse_headers: flags=2
 4(14198) qm_malloc(0x8171fa0, 32) called from parser/msg_parser.c:
parse_headers(298)
 4(14198) qm_malloc(0x8171fa0, 32) returns address 0x81d9ee0 frag.
0x81d9ec8 (size=32) on 1 -th hit
 4(14198) qm_malloc(0x8171fa0, 32) called from parser/msg_parser.c:
parse_headers(298)
 4(14198) qm_malloc(0x8171fa0, 32) returns address 0x81d9cd8 frag.
0x81d9cc0 (size=32) on 1 -th hit
 4(14198) qm_malloc(0x8171fa0, 20) called from parser/msg_parser.c:
get_hdr_field(130)
 4(14198) qm_malloc(0x8171fa0, 20) returns address 0x81d912c frag.
0x81d9114 (size=20) on 1 -th hit
 4(14198) get_hdr_field: cseq &lt;CSeq&gt;: &lt;1&gt; &lt;OPTIONS&gt;
 4(14198) qm_malloc(0x8171fa0, 32) called from parser/msg_parser.c:
parse_headers(298)
 4(14198) qm_malloc(0x8171fa0, 32) returns address 0x81d985c frag.
0x81d9844 (size=32) on 1 -th hit
 4(14198) qm_malloc(0x8171fa0, 32) called from parser/msg_parser.c:
parse_headers(298)
 4(14198) qm_malloc(0x8171fa0, 32) returns address 0x81d976c frag.
0x81d9754 (size=32) on 1 -th hit
 4(14198) qm_malloc(0x8171fa0, 44) called from parser/msg_parser.c:
get_hdr_field(151)
 4(14198) qm_malloc(0x8171fa0, 44) returns address 0x81d9210 frag.
0x81d91f8 (size=44) on 1 -th hit
 4(14198) end of header reached, state=9
 4(14198) DEBUG: get_hdr_field: &lt;To&gt; [44];
uri=[sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">+12398512495 at ims.iot1.com</A>;user=phone]
 4(14198) DEBUG: to body [&lt;sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">+12398512495 at ims.iot1.com</A>;user=phone&gt;
]
 4(14198) qm_malloc(0x8171fa0, 32) called from parser/msg_parser.c:
parse_headers(298)
 4(14198) qm_malloc(0x8171fa0, 32) returns address 0x81d967c frag.
0x81d9664 (size=32) on 1 -th hit
 4(14198) qm_malloc(0x8171fa0, 116) called from parser/msg_parser.c:
get_hdr_field(111)
 4(14198) qm_malloc(0x8171fa0, 116) returns address 0x81d9304 frag.
0x81d92ec (size=116) on 1 -th hit
 4(14198) qm_malloc(0x8171fa0, 32) called from parser/parse_via.c:
parse_via(2142)
 4(14198) qm_malloc(0x8171fa0, 32) returns address 0x81d97bc frag.
0x81d97a4 (size=32) on 1 -th hit
 4(14198) Found param type 232, &lt;branch&gt; = &lt;z9hG4bK1334263350860&gt;; state=16
 4(14198) end of header reached, state=5
 4(14198) parse_headers: Via found, flags=2
 4(14198) parse_headers: this is the first via
 4(14198) After parse_msg...
 4(14198) preparing to run routing scripts...
 4(14198) parse_headers: flags=100
 4(14198) qm_malloc(0x8171fa0, 32) called from parser/msg_parser.c:
parse_headers(298)
 4(14198) qm_malloc(0x8171fa0, 32) returns address 0x81d971c frag.
0x81d9704 (size=32) on 1 -th hit
 4(14198) DEBUG:maxfwd:is_maxfwd_present: value = 70
 4(14198) DBG:maxfwd:process_maxfwd_header: value 70 decreased to 16
 4(14198) Calling SELECT 0x81b1220
 4(14198) parse_headers: flags=ffffffffffffffff
 4(14198) qm_malloc(0x8171fa0, 32) called from parser/msg_parser.c:
parse_headers(298)
 4(14198) qm_malloc(0x8171fa0, 32) returns address 0x81d9f30 frag.
0x81d9f18 (size=32) on 1 -th hit
 4(14198) qm_malloc(0x8171fa0, 32) called from parser/msg_parser.c:
parse_headers(298)
 4(14198) qm_malloc(0x8171fa0, 32) returns address 0x81d953c frag.
0x81d9524 (size=32) on 1 -th hit
 4(14198) qm_malloc(0x8171fa0, 32) called from parser/msg_parser.c:
parse_headers(298)
 4(14198) qm_malloc(0x8171fa0, 32) returns address 0x81d958c frag.
0x81d9574 (size=32) on 1 -th hit
 4(14198) qm_malloc(0x8171fa0, 32) called from parser/msg_parser.c:
parse_headers(298)
 4(14198) qm_malloc(0x8171fa0, 32) returns address 0x81d9448 frag.
0x81d9430 (size=32) on 1 -th hit
 4(14198) qm_malloc(0x8171fa0, 32) called from parser/msg_parser.c:
parse_headers(298)
 4(14198) qm_malloc(0x8171fa0, 32) returns address 0x81d91c0 frag.
0x81d91a8 (size=32) on 1 -th hit
 4(14198) qm_malloc(0x8171fa0, 32) called from parser/msg_parser.c:
parse_headers(298)
 4(14198) qm_malloc(0x8171fa0, 32) returns address 0x81d93f8 frag.
0x81d93e0 (size=32) on 1 -th hit
 4(14198) qm_malloc(0x8171fa0, 32) called from parser/msg_parser.c:
parse_headers(298)
 4(14198) qm_malloc(0x8171fa0, 32) returns address 0x81d93a8 frag.
0x81d9390 (size=32) on 1 -th hit
 4(14198) qm_malloc(0x8171fa0, 32) called from parser/msg_parser.c:
parse_headers(298)
 4(14198) qm_malloc(0x8171fa0, 32) returns address 0x81d9170 frag.
0x81d9158 (size=32) on 1 -th hit
 4(14198) DEBUG: get_hdr_body : content_length=0
 4(14198) qm_malloc(0x8171fa0, 32) called from parser/msg_parser.c:
parse_headers(298)
 4(14198) qm_malloc(0x8171fa0, 32) returns address 0x81d90dc frag.
0x81d90c4 (size=32) on 1 -th hit
 4(14198) found end of header
 4(14198) qm_free(0x8171fa0, 0x81d90dc), called from parser/msg_parser.c:
parse_headers(314)
 4(14198) qm_free: freeing frag. 0x81d90c4 alloc'ed from
parser/msg_parser.c: parse_headers(298)
 4(14198) DBG:P-CSCF:P_check_sent_by(): Received from &lt;172.25.50.78&gt;
 4(14198) parse_headers: flags=ffffffffffffffff
 4(14198) DBG:P-CSCF:P_check_sent_by(): Via sent-by=&lt;172.25.50.78&gt;
 4(14198) DBG:P-CSCF:P_check_sent_by(): sent-by matches the actual IP
received from
 4(14198) parse_headers: flags=200
 4(14198) qm_malloc(0x8171fa0, 36) called from parser/parse_rr.c:
do_parse_rr_body(68)
 4(14198) qm_malloc(0x8171fa0, 36) returns address 0x81d9a50 frag.
0x81d9a38 (size=36) on 1 -th hit
 4(14198) DBG:P-CSCF:P_mobile_terminating: Term indication not found in
&lt;sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">orig at scscf.ims.iot1.com</A>:6060&gt; as &lt;sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">term at pcscf.ims.iot1.com</A>:4060&gt;.
 4(14198) DBG:P-CSCF:cscf_get_originating_contact: 1://172.25.50.78:5762
 4(14198) parse_headers: flags=40
 4(14198) DBG:P-CSCF:cscf_get_terminating_contact: 0://ims.iot1.com:0
 4(14198) parse_headers: flags=40
 4(14198) &gt;&gt;       Orig_Standalone
 4(14198) ALAN - loose_route: enter
 4(14198) parse_headers: flags=200
 4(14198) grep_sock_info - checking if host==us: 12==12 &amp;&amp;  [ims.iot1.com]
== [10.12.92.115]
 4(14198) grep_sock_info - checking if port 4060 matches port 5060
 4(14198) grep_sock_info - checking if host==us: 12==12 &amp;&amp;  [ims.iot1.com]
== [10.12.92.115]
 4(14198) grep_sock_info - checking if port 4060 matches port 5060
 4(14198) check_self: host != me
 4(14198) ALAN - loose_route: It's TEL URI
 4(14198) grep_sock_info - checking if host==us: 12==12 &amp;&amp;  [ims.iot1.com]
== [10.12.92.115]
 4(14198) grep_sock_info - checking if port 4060 matches port 5060
 4(14198) grep_sock_info - checking if host==us: 12==12 &amp;&amp;  [ims.iot1.com]
== [10.12.92.115]
 4(14198) grep_sock_info - checking if port 4060 matches port 5060
 4(14198) check_self: host != me
 4(14198) loose_route: RURI is myself (or tel URI)
 4(14198) grep_sock_info - checking if host==us: 18==12 &amp;&amp;
[scscf.ims.iot1.com] == [10.12.92.115]
 4(14198) grep_sock_info - checking if port 4060 matches port 6060
 4(14198) grep_sock_info - checking if host==us: 18==12 &amp;&amp;
[scscf.ims.iot1.com] == [10.12.92.115]
 4(14198) grep_sock_info - checking if port 4060 matches port 6060
 4(14198) check_self: host != me
 4(14198) has_to_tag: No
 4(14198) loose_route: pre-loaded strict routing?!
 4(14198) &gt;&gt;&gt;&gt; DLUONG &gt;&gt;       Strict Route
 4(14198) DEBUG: t_newtran: msg id=24 , global msg id=23 , T on
entrance=0xffffffff
 4(14198) parse_headers: flags=ffffffffffffffff
 4(14198) parse_headers: flags=78
 4(14198) t_lookup_request: start searching: hash=23898, isACK=0
 4(14198) DEBUG: RFC3261 transaction matching failed
 4(14198) DEBUG: t_lookup_request: no transaction found
 4(14198) qm_malloc(0xb5f5a000, 2836) called from h_table.c:
build_cell(254)
 4(14198) qm_malloc(0xb5f5a000, 2836) returns address 0xb6153828 frag.
0xb6153810 (size=2836) on 1 -th hit
 4(14198) qm_malloc(0xb5f5a000, 2520) called from sip_msg.c:
sip_msg_cloner(429)
 4(14198) qm_malloc(0xb5f5a000, 2520) returns address 0xb6155dc4 frag.
0xb6155dac (size=2520) on 1 -th hit
 4(14198) DBG:P-CSCF:P_emergency_ruri:checking if the ruri
sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">+12398512495 at ims.iot1.com</A>;user=phone is an emergency ruri
 4(14198) DBG:P-CSCF:is_emerg_ruri: tel URI
 4(14198) DBG:P-CSCF:check_emerg_number: checking +12398512495
 4(14198) DBG:P-CSCF:check_emerg_number: comparing to 911
 4(14198) DBG:P-CSCF:check_emerg_number: comparing to 112
 4(14198) DBG:P-CSCF:P_is_registered: Looking if registered
 4(14198) DBG:P-CSCF:P_is_registered: Looking for &lt;1://172.25.50.78:5762&gt;
 4(14198) INF:P-CSCF:P_assert_identity: Asserting Identity
 4(14198) parse_headers: flags=ffffffffffffffff
 4(14198) qm_malloc(0x8171fa0, 36) called from parser/parse_rr.c:
do_parse_rr_body(68)
 4(14198) qm_malloc(0x8171fa0, 36) returns address 0x81d99a8 frag.
0x81d9990 (size=36) on 1 -th hit
 4(14198) parse_nameaddr(): No &lt; found
 4(14198) parse_rr(): Error while parsing name-addr
 4(14198) qm_free(0x8171fa0, 0x81d99a8), called from parser/parse_rr.c:
do_parse_rr_body(136)
 4(14198) qm_free: freeing frag. 0x81d9990 alloc'ed from
parser/parse_rr.c: do_parse_rr_body(68)
 4(14198) WARN:P-CSCF:cscf_get_preferred_identity: P-Preferred-Identity
header must contain a Nameaddr!!! Fix the client!
 4(14198) DBG:P-CSCF:P_assert_identity: Looking for
&lt;1://172.25.50.78:5762&gt; Pref: sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">+12392238993 at ims.iot1.com</A>
 4(14198) DBG:P-CSCF:r_assert_identity: Asserting preferred id
&lt;sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">+12392238993 at ims.iot1.com</A>&gt;
 4(14198) DBG:P-CSCF:r_assert_identity: to &lt;sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">+12392238993 at ims.iot1.com</A>&gt;
 4(14198) qm_malloc(0x8171fa0, 32) called from data_lump.c: del_lump(287)
 4(14198) qm_malloc(0x8171fa0, 32) returns address 0x81d90dc frag.
0x81d90c4 (size=32) on 1 -th hit
 4(14198) qm_malloc(0x8171fa0, 54) called from registration.c:
P_assert_identity(618)
 4(14198) qm_malloc(0x8171fa0, 56) returns address 0x81d9dcc frag.
0x81d9db4 (size=68) on 1 -th hit
 4(14198) parse_headers: flags=ffffffffffffffff
 4(14198) qm_malloc(0x8171fa0, 32) called from data_lump.c:
anchor_lump(341)
 4(14198) qm_malloc(0x8171fa0, 32) returns address 0x81d95dc frag.
0x81d95c4 (size=32) on 1 -th hit
 4(14198) qm_malloc(0x8171fa0, 32) called from data_lump.c:
insert_new_lump_after(115)
 4(14198) qm_malloc(0x8171fa0, 32) returns address 0x81d98ac frag.
0x81d9894 (size=32) on 1 -th hit
 4(14198) parse_headers: flags=ffffffffffffffff
 4(14198) DBG:P-CSCF:cscf_get_next_route: Route
&lt;sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">orig at scscf.ims.iot1.com</A>:6060;lr&gt;
 4(14198) grep_sock_info - checking if host==us: 18==12 &amp;&amp;
[scscf.ims.iot1.com] == [10.12.92.115]
 4(14198) grep_sock_info - checking if port 4060 matches port 6060
 4(14198) grep_sock_info - checking if host==us: 18==12 &amp;&amp;
[scscf.ims.iot1.com] == [10.12.92.115]
 4(14198) grep_sock_info - checking if port 4060 matches port 6060
 4(14198) check_self: host != me
 4(14198) DBG:P-CSCF:P_follows_service_route: mst
sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">orig at scscf.ims.iot1.com</A>:6060;lr
 4(14198) DBG:P-CSCF:P_follows_service_route: src
sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">orig at scscf.ims.iot1.com</A>:6060;lr
 4(14198) DBG:P-CSCF:P_follows_service_route: src match
 4(14198) parse_headers: flags=ffffffffffffffff
 4(14198) parse_headers: flags=ffffffffffffffff
 4(14198) parse_headers: flags=ffffffffffffffff
 4(14198) parse_headers: flags=ffffffffffffffff
 4(14198) qm_malloc(0x8171fa0, 115) called from sip.c:
cscf_add_p_charging_vector(2968)
 4(14198) qm_malloc(0x8171fa0, 116) returns address 0x81d9d28 frag.
0x81d9d10 (size=116) on 1 -th hit
 4(14198) DBG:P-CSCF:cscf_add_p_charging_vector: time is 1334263352d
 4(14198) DBG:P-CSCF:cscf_add_p_charging_vector: count is 47d
 4(14198) parse_headers: flags=ffffffffffffffff
 4(14198) qm_malloc(0x8171fa0, 32) called from data_lump.c:
anchor_lump(341)
 4(14198) qm_malloc(0x8171fa0, 32) returns address 0x81d962c frag.
0x81d9614 (size=32) on 1 -th hit
 4(14198) qm_malloc(0x8171fa0, 32) called from data_lump.c:
insert_new_lump_after(115)
 4(14198) qm_malloc(0x8171fa0, 32) returns address 0x81d96cc frag.
0x81d96b4 (size=32) on 1 -th hit
 4(14198) DEBUG: t_newtran: msg id=24 , global msg id=24 , T on
entrance=0xb6153828
 4(14198) DEBUG: t_newtran: transaction already in process 0xb6153828
 4(14198) dns_hash_find(_sip._udp.ims.iot1.com(22), 33), h=615
 4(14198) dns_hash_find(ims.iot1.com(12), 1), h=76
 4(14198) qm_malloc(0x8171fa0, 32) called from data_lump.c:
dup_lump_list_r(453)
 4(14198) qm_malloc(0x8171fa0, 32) returns address 0x81d9e90 frag.
0x81d9e78 (size=32) on 1 -th hit
 4(14198) qm_malloc(0x8171fa0, 32) called from data_lump.c:
dup_lump_list_r(453)
 4(14198) qm_malloc(0x8171fa0, 32) returns address 0x81da048 frag.
0x81da030 (size=32) on 1 -th hit
 4(14198) qm_malloc(0x8171fa0, 32) called from data_lump.c:
dup_lump_list_r(453)
 4(14198) qm_malloc(0x8171fa0, 32) returns address 0x81d980c frag.
0x81d97f4 (size=32) on 1 -th hit
 4(14198) qm_malloc(0x8171fa0, 32) called from data_lump.c:
dup_lump_list_r(453)
 4(14198) qm_malloc(0x8171fa0, 32) returns address 0x81d9ff8 frag.
0x81d9fe0 (size=32) on 1 -th hit
 4(14198) qm_malloc(0x8171fa0, 32) called from data_lump.c:
dup_lump_list_r(453)
 4(14198) qm_malloc(0x8171fa0, 32) returns address 0x81d908c frag.
0x81d9074 (size=32) on 1 -th hit
 4(14198) qm_malloc(0x8171fa0, 69) called from msg_translator.c:
via_builder(2122)
 4(14198) qm_malloc(0x8171fa0, 72) returns address 0x81da32c frag.
0x81da314 (size=72) on 1 -th hit
 4(14198) check_via_address(172.25.50.78, 172.25.50.78, 0)
 4(14198) qm_malloc(0x8171fa0, 12) called from msg_translator.c:
rport_builder(353)
 4(14198) qm_malloc(0x8171fa0, 12) returns address 0x81d926c frag.
0x81d9254 (size=24) on 1 -th hit
 4(14198) qm_malloc(0x8171fa0, 32) called from data_lump.c:
anchor_lump(341)
 4(14198) qm_malloc(0x8171fa0, 32) returns address 0x81da3f4 frag.
0x81da3dc (size=32) on 1 -th hit
 4(14198) qm_malloc(0x8171fa0, 32) called from data_lump.c:
insert_new_lump_before(140)
 4(14198) qm_malloc(0x8171fa0, 32) returns address 0x81da494 frag.
0x81da47c (size=32) on 1 -th hit
 4(14198) qm_malloc(0x8171fa0, 32) called from data_lump.c:
anchor_lump(341)
 4(14198) qm_malloc(0x8171fa0, 32) returns address 0x81da098 frag.
0x81da080 (size=32) on 1 -th hit
 4(14198) qm_malloc(0x8171fa0, 32) called from data_lump.c:
insert_new_lump_after(115)
 4(14198) qm_malloc(0x8171fa0, 32) returns address 0x81d9e40 frag.
0x81d9e28 (size=32) on 1 -th hit
 4(14198) qm_malloc(0x8171fa0, 1245) called from msg_translator.c:
build_req_buf_from_sip_req(1583)
 4(14198) qm_malloc(0x8171fa0, 1248) returns address 0x81da658 frag.
0x81da640 (size=1248) on 1 -th hit
 4(14198) qm_malloc(0xb5f5a000, 1244) called from t_fwd.c:
print_uac_request(187)
 4(14198) qm_malloc(0xb5f5a000, 1244) returns address 0xb6154d74 frag.
0xb6154d5c (size=1244) on 1 -th hit
 4(14198) qm_free(0x8171fa0, 0x81da658), called from t_fwd.c:
print_uac_request(196)
 4(14198) qm_free: freeing frag. 0x81da640 alloc'ed from msg_translator.c:
build_req_buf_from_sip_req(1583)
 4(14198) qm_free(0x8171fa0, 0x81da32c), called from data_lump.c:
free_lump(382)
 4(14198) qm_free: freeing frag. 0x81da314 alloc'ed from msg_translator.c:
via_builder(2122)
 4(14198) qm_free(0x8171fa0, 0x81da494), called from data_lump.c:
free_duped_lump_list(529)
 4(14198) qm_free: freeing frag. 0x81da47c alloc'ed from data_lump.c:
insert_new_lump_before(140)
 4(14198) qm_free(0x8171fa0, 0x81da3f4), called from data_lump.c:
free_duped_lump_list(542)
 4(14198) qm_free: freeing frag. 0x81da3dc alloc'ed from data_lump.c:
anchor_lump(341)
 4(14198) qm_free(0x8171fa0, 0x81d926c), called from data_lump.c:
free_lump(382)
 4(14198) qm_free: freeing frag. 0x81d9254 alloc'ed from msg_translator.c:
rport_builder(353)
 4(14198) qm_free(0x8171fa0, 0x81d9e40), called from data_lump.c:
free_duped_lump_list(536)
 4(14198) qm_free: freeing frag. 0x81d9e28 alloc'ed from data_lump.c:
insert_new_lump_after(115)
 4(14198) qm_free(0x8171fa0, 0x81da098), called from data_lump.c:
free_duped_lump_list(542)
 4(14198) qm_free: freeing frag. 0x81da080 alloc'ed from data_lump.c:
anchor_lump(341)
 4(14198) qm_free(0x8171fa0, 0x81d9e90), called from data_lump.c:
free_duped_lump_list(542)
 4(14198) qm_free: freeing frag. 0x81d9e78 alloc'ed from data_lump.c:
dup_lump_list_r(453)
 4(14198) qm_free(0x8171fa0, 0x81d980c), called from data_lump.c:
free_duped_lump_list(536)
 4(14198) qm_free: freeing frag. 0x81d97f4 alloc'ed from data_lump.c:
dup_lump_list_r(453)
 4(14198) qm_free(0x8171fa0, 0x81da048), called from data_lump.c:
free_duped_lump_list(542)
 4(14198) qm_free: freeing frag. 0x81da030 alloc'ed from data_lump.c:
dup_lump_list_r(453)
 4(14198) qm_free(0x8171fa0, 0x81d908c), called from data_lump.c:
free_duped_lump_list(536)
 4(14198) qm_free: freeing frag. 0x81d9074 alloc'ed from data_lump.c:
dup_lump_list_r(453)
 4(14198) qm_free(0x8171fa0, 0x81d9ff8), called from data_lump.c:
free_duped_lump_list(542)
 4(14198) qm_free: freeing frag. 0x81d9fe0 alloc'ed from data_lump.c:
dup_lump_list_r(453)
 4(14198) SER: new transaction fwd'ed
 4(14198) DEBUG:destroy_avp_list: destroying list (nil)
 4(14198) DEBUG:destroy_avp_list: destroying list (nil)
 4(14198) DEBUG:destroy_avp_list: destroying list (nil)
 4(14198) DEBUG:destroy_avp_list: destroying list (nil)
 4(14198) DEBUG:destroy_avp_list: destroying list (nil)
 4(14198) DEBUG:destroy_avp_list: destroying list (nil)
 4(14198) receive_msg: cleaning up
 4(14198) qm_free(0x8171fa0, 0x81d9ee0), called from parser/hf.c:
free_hdr_field_lst(215)
 4(14198) qm_free: freeing frag. 0x81d9ec8 alloc'ed from
parser/msg_parser.c: parse_headers(298)
 4(14198) qm_free(0x8171fa0, 0x81d912c), called from parser/parse_cseq.c:
free_cseq(102)
 4(14198) qm_free: freeing frag. 0x81d9114 alloc'ed from
parser/msg_parser.c: get_hdr_field(130)
 4(14198) qm_free(0x8171fa0, 0x81d9cd8), called from parser/hf.c:
free_hdr_field_lst(215)
 4(14198) qm_free: freeing frag. 0x81d9cc0 alloc'ed from
parser/msg_parser.c: parse_headers(298)
 4(14198) qm_free(0x8171fa0, 0x81d985c), called from parser/hf.c:
free_hdr_field_lst(215)
 4(14198) qm_free: freeing frag. 0x81d9844 alloc'ed from
parser/msg_parser.c: parse_headers(298)
 4(14198) qm_free(0x8171fa0, 0x81d9210), called from parser/parse_to.c:
free_to(784)
 4(14198) qm_free: freeing frag. 0x81d91f8 alloc'ed from
parser/msg_parser.c: get_hdr_field(151)
 4(14198) qm_free(0x8171fa0, 0x81d976c), called from parser/hf.c:
free_hdr_field_lst(215)
 4(14198) qm_free: freeing frag. 0x81d9754 alloc'ed from
parser/msg_parser.c: parse_headers(298)
 4(14198) qm_free(0x8171fa0, 0x81d97bc), called from parser/parse_via.c:
free_via_param_list(2361)
 4(14198) qm_free: freeing frag. 0x81d97a4 alloc'ed from
parser/parse_via.c: parse_via(2142)
 4(14198) qm_free(0x8171fa0, 0x81d9304), called from parser/parse_via.c:
free_via_list(2373)
 4(14198) qm_free: freeing frag. 0x81d92ec alloc'ed from
parser/msg_parser.c: get_hdr_field(111)
 4(14198) qm_free(0x8171fa0, 0x81d967c), called from parser/hf.c:
free_hdr_field_lst(215)
 4(14198) qm_free: freeing frag. 0x81d9664 alloc'ed from
parser/msg_parser.c: parse_headers(298)
 4(14198) qm_free(0x8171fa0, 0x81d971c), called from parser/hf.c:
free_hdr_field_lst(215)
 4(14198) qm_free: freeing frag. 0x81d9704 alloc'ed from
parser/msg_parser.c: parse_headers(298)
 4(14198) qm_free(0x8171fa0, 0x81d9f30), called from parser/hf.c:
free_hdr_field_lst(215)
 4(14198) qm_free: freeing frag. 0x81d9f18 alloc'ed from
parser/msg_parser.c: parse_headers(298)
 4(14198) qm_free(0x8171fa0, 0x81d953c), called from parser/hf.c:
free_hdr_field_lst(215)
 4(14198) qm_free: freeing frag. 0x81d9524 alloc'ed from
parser/msg_parser.c: parse_headers(298)
 4(14198) qm_free(0x8171fa0, 0x81d958c), called from parser/hf.c:
free_hdr_field_lst(215)
 4(14198) qm_free: freeing frag. 0x81d9574 alloc'ed from
parser/msg_parser.c: parse_headers(298)
 4(14198) qm_free(0x8171fa0, 0x81d9a50), called from parser/parse_rr.c:
do_free_rr(193)
 4(14198) qm_free: freeing frag. 0x81d9a38 alloc'ed from
parser/parse_rr.c: do_parse_rr_body(68)
 4(14198) qm_free(0x8171fa0, 0x81d9448), called from parser/hf.c:
free_hdr_field_lst(215)
 4(14198) qm_free: freeing frag. 0x81d9430 alloc'ed from
parser/msg_parser.c: parse_headers(298)
 4(14198) qm_free(0x8171fa0, 0x81d91c0), called from parser/hf.c:
free_hdr_field_lst(215)
 4(14198) qm_free: freeing frag. 0x81d91a8 alloc'ed from
parser/msg_parser.c: parse_headers(298)
 4(14198) qm_free(0x8171fa0, 0x81d93f8), called from parser/hf.c:
free_hdr_field_lst(215)
 4(14198) qm_free: freeing frag. 0x81d93e0 alloc'ed from
parser/msg_parser.c: parse_headers(298)
 4(14198) qm_free(0x8171fa0, 0x81d93a8), called from parser/hf.c:
free_hdr_field_lst(215)
 4(14198) qm_free: freeing frag. 0x81d9390 alloc'ed from
parser/msg_parser.c: parse_headers(298)
 4(14198) qm_free(0x8171fa0, 0x81d9170), called from parser/hf.c:
free_hdr_field_lst(215)
 4(14198) qm_free: freeing frag. 0x81d9158 alloc'ed from
parser/msg_parser.c: parse_headers(298)
 4(14198) qm_free(0x8171fa0, 0x81d90dc), called from data_lump.c:
free_lump_list(420)
 4(14198) qm_free: freeing frag. 0x81d90c4 alloc'ed from data_lump.c:
del_lump(287)
 4(14198) qm_free(0x8171fa0, 0x81d9dcc), called from data_lump.c:
free_lump(382)
 4(14198) qm_free: freeing frag. 0x81d9db4 alloc'ed from registration.c:
P_assert_identity(618)
 4(14198) qm_free(0x8171fa0, 0x81d98ac), called from data_lump.c:
free_lump_list(415)
 4(14198) qm_free: freeing frag. 0x81d9894 alloc'ed from data_lump.c:
insert_new_lump_after(115)
 4(14198) qm_free(0x8171fa0, 0x81d95dc), called from data_lump.c:
free_lump_list(420)
 4(14198) qm_free: freeing frag. 0x81d95c4 alloc'ed from data_lump.c:
anchor_lump(341)
 4(14198) qm_free(0x8171fa0, 0x81d9d28), called from data_lump.c:
free_lump(382)
 4(14198) qm_free: freeing frag. 0x81d9d10 alloc'ed from sip.c:
cscf_add_p_charging_vector(2968)
 4(14198) qm_free(0x8171fa0, 0x81d96cc), called from data_lump.c:
free_lump_list(415)
 4(14198) qm_free: freeing frag. 0x81d96b4 alloc'ed from data_lump.c:
insert_new_lump_after(115)
 4(14198) qm_free(0x8171fa0, 0x81d962c), called from data_lump.c:
free_lump_list(420)
 4(14198) qm_free: freeing frag. 0x81d9614 alloc'ed from data_lump.c:
anchor_lump(341)
 4(14198) qm_free(0x8171fa0, 0x81d8d34), called from receive.c:
receive_msg(243)
 4(14198) qm_free: freeing frag. 0x81d8d1c alloc'ed from receive.c:
receive_msg(94)
 2(14196) qm_malloc(0x8171fa0, 808) called from receive.c: receive_msg(94)
 2(14196) qm_malloc(0x8171fa0, 808) returns address 0x81d8d34 frag.
0x81d8d1c (size=808) on 1 -th hit
 2(14196) SIP Reply  (status):
 2(14196)  version: &lt;SIP/2.0&gt;
 2(14196)  status:  &lt;480&gt;
 2(14196)  reason:  &lt;Temporarily Unavailable - HSS Identity not registered&gt;
 2(14196) parse_headers: flags=2
 2(14196) qm_malloc(0x8171fa0, 32) called from parser/msg_parser.c:
parse_headers(298)
 2(14196) qm_malloc(0x8171fa0, 32) returns address 0x81d9c7c frag.
0x81d9c64 (size=32) on 1 -th hit
 2(14196) qm_malloc(0x8171fa0, 32) called from parser/msg_parser.c:
parse_headers(298)
 2(14196) qm_malloc(0x8171fa0, 32) returns address 0x81d9360 frag.
0x81d9348 (size=32) on 1 -th hit
 2(14196) qm_malloc(0x8171fa0, 20) called from parser/msg_parser.c:
get_hdr_field(130)
 2(14196) qm_malloc(0x8171fa0, 20) returns address 0x81d912c frag.
0x81d9114 (size=20) on 1 -th hit
 2(14196) get_hdr_field: cseq &lt;CSeq&gt;: &lt;1&gt; &lt;OPTIONS&gt;
 2(14196) qm_malloc(0x8171fa0, 32) called from parser/msg_parser.c:
parse_headers(298)
 2(14196) qm_malloc(0x8171fa0, 32) returns address 0x81d91c0 frag.
0x81d91a8 (size=32) on 1 -th hit
 2(14196) qm_malloc(0x8171fa0, 32) called from parser/msg_parser.c:
parse_headers(298)
 2(14196) qm_malloc(0x8171fa0, 32) returns address 0x81d93b0 frag.
0x81d9398 (size=32) on 1 -th hit
 2(14196) qm_malloc(0x8171fa0, 44) called from parser/msg_parser.c:
get_hdr_field(151)
 2(14196) qm_malloc(0x8171fa0, 44) returns address 0x81d9210 frag.
0x81d91f8 (size=44) on 1 -th hit
 2(14196) qm_malloc(0x8171fa0, 24) called from parser/parse_to.c:
parse_to_param(284)
 2(14196) qm_malloc(0x8171fa0, 24) returns address 0x81d97cc frag.
0x81d97b4 (size=28) on 1 -th hit
 2(14196) DEBUG: add_param: tag=9acfb3c005535f13f34c4570a2eb69f1-ebd6
 2(14196) end of header reached, state=29
 2(14196) DEBUG: get_hdr_field: &lt;To&gt; [86];
uri=[sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">+12398512495 at ims.iot1.com</A>;user=phone]
 2(14196) DEBUG: to body [&lt;sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">+12398512495 at ims.iot1.com</A>;user=phone&gt;]
 2(14196) qm_malloc(0x8171fa0, 32) called from parser/msg_parser.c:
parse_headers(298)
 2(14196) qm_malloc(0x8171fa0, 32) returns address 0x81d9630 frag.
0x81d9618 (size=32) on 1 -th hit
 2(14196) qm_malloc(0x8171fa0, 116) called from parser/msg_parser.c:
get_hdr_field(111)
 2(14196) qm_malloc(0x8171fa0, 116) returns address 0x81d92bc frag.
0x81d92a4 (size=116) on 1 -th hit
 2(14196) qm_malloc(0x8171fa0, 32) called from parser/parse_via.c:
parse_via(2142)
 2(14196) qm_malloc(0x8171fa0, 32) returns address 0x81d926c frag.
0x81d9254 (size=32) on 1 -th hit
 2(14196) Found param type 232, &lt;branch&gt; = &lt;z9hG4bKa5d5.1b0e6387.0&gt;;
state=16
 2(14196) end of header reached, state=5
 2(14196) parse_headers: Via found, flags=2
 2(14196) parse_headers: this is the first via
 2(14196) After parse_msg...
 2(14196) forward_reply: found module tm, passing reply to it
 2(14196) DEBUG: t_check: msg id=29 global id=28 T start=0xffffffff
 2(14196) parse_headers: flags=22
 2(14196) DEBUG: t_reply_matching: hash 23898 label 2016862385 branch 0
 2(14196) DEBUG: t_reply_matching: reply matched (T=0xb6153828)!
 2(14196) DEBUG: t_check: msg id=29 global id=29 T end=0xb6153828
 2(14196) DEBUG: reply_received: org. status uas=0, uac[0]=0 local=0
is_invite=0)
 2(14196) &gt;&gt;       Orig_Standalone_reply
 2(14196) qm_malloc(0x8171fa0, 41) called from registration.c:
get_NAT_dst_uri(1029)
 2(14196) qm_malloc(0x8171fa0, 44) returns address 0x81d9970 frag.
0x81d9958 (size=44) on 1 -th hit
 2(14196) INFO:P-CSCF:P_NAT_relay: &lt;sip:172.25.50.78:5762&gt;
 2(14196) -&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; T_code=0, new_code=480
 2(14196) DEBUG: relay_reply: branch=0, save=0, relay=0
 2(14196) qm_malloc(0x8171fa0, 32) called from data_lump.c: del_lump(287)
 2(14196) qm_malloc(0x8171fa0, 32) returns address 0x81d90dc frag.
0x81d90c4 (size=32) on 1 -th hit
 2(14196)  old size: 707, new size: 641
 2(14196) qm_malloc(0x8171fa0, 642) called from msg_translator.c:
build_res_buf_from_sip_res(1684)
 2(14196) qm_malloc(0x8171fa0, 644) returns address 0x81da6fc frag.
0x81da6e4 (size=648) on 1 -th hit
 2(14196) build_res_from_sip_res: copied size: orig:328, new: 262, rest:
379 msg=
SIP/2.0 480 Temporarily Unavailable - HSS Identity not registered
Call-Id: <A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">EZwSoaTQAA at 172.25.50.78</A>
CSeq: 1 OPTIONS
From: &lt;sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">+12392238993 at ims.iot1.com</A>&gt;;tag=EZwSoaTRAA
To:
&lt;sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">+12398512495 at ims.iot1.com</A>;user=phone&gt;;tag=9acfb3c005535f13f34c4570a2eb
69f1-ebd6
Via: SIP/2.0/UDP 172.25.50.78:5762;rport=5762;branch=z9hG4bK1334263350860
Server: Sip EXpress router (2.1.0-dev1 OpenIMSCore (i386/linux))
Content-Length: 0
Warning: 392 10.12.92.115:5060 &quot;Noisy feedback tells:  pid=14056
req_src_ip=10.12.92.115 req_src_port=4060
in_uri=sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">+12398512495 at ims.iot1.com</A>;user=phone
out_uri=sip:<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">+12398512495 at ims.iot1.com</A>;user=phone via_cnt==2&quot;


 2(14196) WARNING:vqm_resize: resize(0) called
 2(14196) qm_malloc(0xb5f5a000, 641) called from mem/shm_mem.c:
_shm_resize(106)
 2(14196) qm_malloc(0xb5f5a000, 644) returns address 0xb61589e4 frag.
0xb61589cc (size=644) on 1 -th hit
 2(14196) DEBUG: reply relayed. buf=0x81da6fc: SIP/2.0 480 Tem...,
shmem=0xb61589e4: SIP/2.0 4 totag_retr=0
 2(14196) qm_free(0x8171fa0, 0x81da6fc), called from t_reply.c:
relay_reply(1428)
 2(14196) qm_free: freeing frag. 0x81da6e4 alloc'ed from msg_translator.c:
build_res_buf_from_sip_res(1684)
 2(14196) DEBUG: cleanup_uac_timers: RETR/FR timers reset
 2(14196) DEBUG:destroy_avp_list: destroying list (nil)
 2(14196) DEBUG:destroy_avp_list: destroying list (nil)
 2(14196) DEBUG:destroy_avp_list: destroying list (nil)
 2(14196) DEBUG:destroy_avp_list: destroying list (nil)
 2(14196) DEBUG:destroy_avp_list: destroying list (nil)
 2(14196) DEBUG:destroy_avp_list: destroying list (nil)
 2(14196) receive_msg: cleaning up
 2(14196) qm_free(0x8171fa0, 0x81d9970), called from parser/msg_parser.c:
free_sip_msg(656)
 2(14196) qm_free: freeing frag. 0x81d9958 alloc'ed from registration.c:
get_NAT_dst_uri(1029)
 2(14196) qm_free(0x8171fa0, 0x81d9c7c), called from parser/hf.c:
free_hdr_field_lst(215)
 2(14196) qm_free: freeing frag. 0x81d9c64 alloc'ed from
parser/msg_parser.c: parse_headers(298)
 2(14196) qm_free(0x8171fa0, 0x81d912c), called from parser/parse_cseq.c:
free_cseq(102)
 2(14196) qm_free: freeing frag. 0x81d9114 alloc'ed from
parser/msg_parser.c: get_hdr_field(130)
 2(14196) qm_free(0x8171fa0, 0x81d9360), called from parser/hf.c:
free_hdr_field_lst(215)
 2(14196) qm_free: freeing frag. 0x81d9348 alloc'ed from
parser/msg_parser.c: parse_headers(298)
 2(14196) qm_free(0x8171fa0, 0x81d91c0), called from parser/hf.c:
free_hdr_field_lst(215)
 2(14196) qm_free: freeing frag. 0x81d91a8 alloc'ed from
parser/msg_parser.c: parse_headers(298)
 2(14196) qm_free(0x8171fa0, 0x81d97cc), called from parser/parse_to.c:
free_to(781)
 2(14196) qm_free: freeing frag. 0x81d97b4 alloc'ed from
parser/parse_to.c: parse_to_param(284)
 2(14196) qm_free(0x8171fa0, 0x81d9210), called from parser/parse_to.c:
free_to(784)
 2(14196) qm_free: freeing frag. 0x81d91f8 alloc'ed from
parser/msg_parser.c: get_hdr_field(151)
 2(14196) qm_free(0x8171fa0, 0x81d93b0), called from parser/hf.c:
free_hdr_field_lst(215)
 2(14196) qm_free: freeing frag. 0x81d9398 alloc'ed from
parser/msg_parser.c: parse_headers(298)
 2(14196) qm_free(0x8171fa0, 0x81d926c), called from parser/parse_via.c:
free_via_param_list(2361)
 2(14196) qm_free: freeing frag. 0x81d9254 alloc'ed from
parser/parse_via.c: parse_via(2142)
 2(14196) qm_free(0x8171fa0, 0x81d92bc), called from parser/parse_via.c:
free_via_list(2373)
 2(14196) qm_free: freeing frag. 0x81d92a4 alloc'ed from
parser/msg_parser.c: get_hdr_field(111)
 2(14196) qm_free(0x8171fa0, 0x81d9630), called from parser/hf.c:
free_hdr_field_lst(215)
 2(14196) qm_free: freeing frag. 0x81d9618 alloc'ed from
parser/msg_parser.c: parse_headers(298)
 2(14196) qm_free(0x8171fa0, 0x81d90dc), called from data_lump.c:
free_lump_list(420)
 2(14196) qm_free: freeing frag. 0x81d90c4 alloc'ed from data_lump.c:
del_lump(287)
 2(14196) qm_free(0x8171fa0, 0x81d8d34), called from receive.c:
receive_msg(243)
 2(14196) qm_free: freeing frag. 0x81d8d1c alloc'ed from receive.c:
receive_msg(94)






On 4/12/12 1:50 PM, &quot;Franz Edler&quot; &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/openimscore-users">franz.edler at technikum-wien.at</A>&gt; wrote:

&gt;<i>Hi Alan,
</I>&gt;<i>
</I>&gt;&gt;<i> Thanks for the reply. I added some debug prints and I see that for
</I>&gt;<i>OPTIONS,
</I>&gt;&gt;<i> it goes to &quot;Orig_Standalone&quot;. I also added some printout on loose.c to
</I>&gt;&gt;<i>see
</I>&gt;&gt;<i> what's happening in loose_route(). The parsed URI's type is determined
</I>&gt;&gt;<i>as
</I>&gt;&gt;<i> TEL-URI and it goes to the else branch where it logs LOG(L_WARN,
</I>&gt;&gt;<i> &quot;loose_route: pre-loaded strict routing?!\n&quot;); and returns -1.
</I>&gt;<i>
</I>&gt;<i>Above statement makes me believe that in your case the routing logic in
</I>&gt;<i>P-CSCF has recognized the previous hop as a &quot;strict router&quot;.
</I>&gt;<i>This is strange and I never have seen a strict routing behavior.
</I>&gt;<i>
</I>&gt;<i>TP verify this a console-log of P-CSCF and a tracefile could help. For the
</I>&gt;<i>console log you should increase debug level.
</I>&gt;<i>
</I>&gt;<i>BR
</I>&gt;<i>Franz
</I>&gt;<i>
</I>
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="007316.html">[OpenIMSCore-Users] Routing of SIP OPTIONS
</A></li>
	<LI>Next message: <A HREF="007313.html">[OpenIMSCore-Users] 4th ngnlab.eu workshop CALL FOR PAPERS
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7317">[ date ]</a>
              <a href="thread.html#7317">[ thread ]</a>
              <a href="subject.html#7317">[ subject ]</a>
              <a href="author.html#7317">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/openimscore-users">More information about the OpenIMSCore-Users
mailing list</a><br>
</body></html>
